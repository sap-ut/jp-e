<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JP Solutions ERP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --blue:#0d6efd;
  --light:#e9f2ff;
  --dropdown-bg:#fff;
  --dropdown-hover:#f0f4ff;
  --sidebar-bg:#1a2b4c;
  --sidebar-width:260px;
  --success:#28a745;
  --warning:#ffc107;
  --danger:#dc3545;
  --info:#17a2b8;
  --dark:#343a40;
  --secondary:#6c757d;
}
*{box-sizing:border-box;font-family:'Segoe UI',Arial,sans-serif}
body{margin:0;background:#f4f8ff;color:#333;overflow-x:hidden}
#app{display:block;height:100vh;overflow:hidden}

/* NAVBAR */
.navbar{
  position:sticky;top:0;z-index:1000;background:var(--blue);
  display:flex;align-items:center;overflow-x:auto;padding:10px 20px;
  color:#fff;white-space:nowrap;box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.brand{font-weight:700;margin-right:30px;flex-shrink:0;font-size:1.5rem;display:flex;align-items:center;gap:10px}
.brand-icon{font-size:1.8rem}
.menu{display:flex;gap:20px;flex-shrink:0}
.menu-item{position:relative;cursor:pointer;flex-shrink:0}
.menu-item span{padding:8px 16px;display:flex;align-items:center;gap:8px;
  transition:background 0.3s;border-radius:8px;font-weight:600}
.menu-item span:hover{background:rgba(255,255,255,0.2)}
.menu-item span::after{content:'â–¼';font-size:0.7rem;margin-left:5px}
.logout-btn{background:rgba(255,255,255,0.2);padding:8px 16px;border-radius:8px;
  cursor:pointer;margin-left:auto;display:flex;align-items:center;gap:8px;font-weight:600}
.logout-btn:hover{background:rgba(255,255,255,0.3)}

/* DROPDOWN */
.dropdown{display:none;position:fixed;background:var(--dropdown-bg);color:#000;
  border-radius:8px;box-shadow:0 10px 25px rgba(0,0,0,.15);z-index:9999;
  padding:8px 0;min-width:250px;max-height:500px;overflow-y:auto;
  transform:scaleY(0);transform-origin:top;transition:transform 0.25s ease, opacity 0.25s ease;
  opacity:0;border:1px solid #e0e0e0}
.dropdown.show{display:block;transform:scaleY(1);opacity:1}
.dropdown div{padding:12px 20px;cursor:pointer;white-space:nowrap;
  transition:background 0.2s;border-bottom:1px solid #f5f5f5;display:flex;align-items:center;gap:10px}
.dropdown div:hover{background:var(--dropdown-hover)}
.dropdown div:last-child{border-bottom:none}

/* CONTENT */
.content{padding:0;position:relative;z-index:1;background:#fff;
  min-height:calc(100vh - 60px);margin:0;overflow-y:auto;
  max-height:calc(100vh - 60px);display:none}
.content.active{display:block}

/* MODULE HEADER */
.module-header{display:flex;justify-content:space-between;align-items:center;
  border-bottom:2px solid #f0f0f0;padding:20px;margin-bottom:0;
  background:white;position:sticky;top:0;z-index:100}
.module-header h2{margin:0;color:#1a2b4c;font-size:1.8rem;display:flex;align-items:center;gap:10px}
.action-buttons{display:flex;gap:10px;flex-wrap:wrap}
.action-btn{padding:10px 20px;background:var(--blue);color:white;
  border:none;border-radius:8px;cursor:pointer;font-weight:600;
  transition:background 0.3s, transform 0.2s;display:flex;align-items:center;gap:8px}
.action-btn:hover{background:#0b5ed7;transform:translateY(-2px)}
.action-btn-success{background:var(--success)}
.action-btn-success:hover{background:#218838}
.action-btn-warning{background:var(--warning);color:#000}
.action-btn-warning:hover{background:#e0a800}
.action-btn-danger{background:var(--danger);color:white}
.action-btn-danger:hover{background:#c82333}
.action-btn-info{background:var(--info);color:white}
.action-btn-info:hover{background:#138496}
.action-btn-secondary{background:var(--secondary);color:white}
.action-btn-secondary:hover{background:#5a6268}

/* FORM STYLES */
.form-container{display:grid;grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:25px;margin:20px;padding:20px;background:#f8f9fa;border-radius:12px}
.form-group{margin-bottom:20px}
.form-group label{display:block;margin-bottom:8px;font-weight:600;color:#444}
.form-group input,.form-group select,.form-group textarea{width:100%;padding:12px 15px;
  border-radius:8px;border:1px solid #ccc;font-size:15px;transition:all 0.3s}
.form-group input:focus,.form-group select:focus,.form-group textarea:focus{
  outline:none;border-color:var(--blue);box-shadow:0 0 0 3px rgba(13,110,253,0.1)}
.checkbox-group{display:flex;align-items:center;gap:10px}
.checkbox-group input{width:auto}

/* TABLE STYLES */
.table-container{margin:20px;padding:20px;background:white;border-radius:12px;box-shadow:0 3px 10px rgba(0,0,0,0.05)}
.data-table{width:100%;border-collapse:separate;border-spacing:0;margin-top:20px;
  background:#fff;border-radius:12px;overflow:hidden;box-shadow:0 3px 15px rgba(0,0,0,0.05)}
.data-table th{background:#f8f9fa;padding:15px 20px;text-align:left;font-weight:600;color:#333;border-bottom:2px solid #e9ecef}
.data-table td{padding:15px 20px;border-bottom:1px solid #e9ecef;color:#555}
.data-table tr:hover{background:#f8f9fa}
.data-table tr:last-child td{border-bottom:none}
.table-actions{display:flex;gap:8px}

/* STATUS BADGES */
.status-badge{padding:6px 12px;border-radius:20px;font-size:12px;font-weight:600;display:inline-block}
.status-active{background:#d1e7dd;color:#0f5132}
.status-inactive{background:#f8d7da;color:#842029}
.status-pending{background:#fff3cd;color:#856404}
.status-completed{background:#cce5ff;color:#004085}
.status-approved{background:#d4edda;color:#155724}
.status-rejected{background:#f8d7da;color:#721c24}

/* CARD STYLES */
.optimizer-grid{display:grid;grid-template-columns:repeat(3, 1fr);gap:25px;margin:20px}
.optimizer-card{background:#f8f9fa;padding:25px;border-radius:12px;border:2px solid #e9ecef;
  transition:transform 0.3s, box-shadow 0.3s}
.optimizer-card:hover{transform:translateY(-5px);box-shadow:0 10px 20px rgba(0,0,0,0.1)}
.config-card{background:#fff;padding:25px;border-radius:12px;border:1px solid #ddd;
  margin-bottom:20px;box-shadow:0 3px 10px rgba(0,0,0,0.05)}

/* TABS */
.tab-container{display:flex;border-bottom:2px solid #ddd;margin-bottom:20px;padding:0 20px;overflow-x:auto}
.tab{padding:12px 25px;cursor:pointer;border-bottom:4px solid transparent;font-weight:600;color:#666;transition:all 0.3s}
.tab:hover{color:var(--blue)}
.tab.active{border-bottom-color:var(--blue);color:var(--blue)}
.tab-content{display:none;padding:20px}
.tab-content.active{display:block}

/* INVOICE/ORDER SPECIFIC */
.invoice-header{background:linear-gradient(135deg, #1a2b4c 0%, #2c3e50 100%);color:white;
  padding:25px;border-radius:12px;margin:20px}
.invoice-items-table{width:100%;border-collapse:collapse}
.invoice-items-table th{background:#e9ecef;padding:12px}
.invoice-items-table td{padding:12px;border-bottom:1px solid #dee2e6}
.invoice-totals{width:300px;margin-left:auto;margin-top:20px}
.invoice-totals tr td{text-align:right;padding:8px}
.invoice-totals tr:last-child{font-weight:bold;font-size:1.2rem}

/* REPORT CONTROLS */
.report-controls{display:flex;gap:15px;margin-bottom:25px;flex-wrap:wrap;padding:20px;background:#f8f9fa;border-radius:12px}
.report-card{background:white;padding:20px;border-radius:10px;box-shadow:0 3px 10px rgba(0,0,0,0.05);margin-bottom:20px}
.chart-container{height:400px;background:#f8f9fa;border-radius:10px;padding:20px;margin:20px}

/* ALERTS & MESSAGES */
.alert{ padding:15px;border-radius:8px;margin:15px; }
.alert-success{background:#d1e7dd;color:#0f5132;border:1px solid #badbcc}
.alert-warning{background:#fff3cd;color:#856404;border:1px solid #ffeaa7}
.alert-danger{background:#f8d7da;color:#842029;border:1px solid #f5c6cb}
.alert-info{background:#d1ecf1;color:#0c5460;border:1px solid #bee5eb}

/* MODALS */
.modal{display:none;position:fixed;top:0;left:0;width:100%;height:100%;
  background:rgba(0,0,0,0.5);z-index:9999;justify-content:center;align-items:center}
.modal.active{display:flex}
.modal-content{background:white;padding:30px;border-radius:12px;min-width:400px;max-width:800px;max-height:80vh;overflow-y:auto}
.modal-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
.modal-close{background:none;border:none;font-size:1.5rem;cursor:pointer;color:#666}

/* RESPONSIVE */
@media (max-width: 1024px){.optimizer-grid{grid-template-columns:repeat(2, 1fr)}}
@media (max-width: 768px){
  .form-container{grid-template-columns:1fr;margin:10px;padding:15px}
  .optimizer-grid{grid-template-columns:1fr;margin:10px}
  .menu{gap:10px}.menu-item span{padding:6px 12px;font-size:14px}
  .module-header{flex-direction:column;gap:15px;align-items:flex-start}
  .action-buttons{width:100%;justify-content:center}
  .invoice-totals{width:100%}
}
@media (max-width: 480px){.modal-content{min-width:95%;margin:10px}}
</style>
</head>
<body>

<div id="app">
  <div class="navbar">
    <div class="brand"><span class="brand-icon">ğŸ¢</span><span>JP Solutions ERP</span></div>
    <div class="menu">
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ§± Masters</span>
        <div class="dropdown">
          <div onclick="loadModule('itemMaster')">ğŸ“¦ Item Master</div>
          <div onclick="loadModule('priceMaster')">ğŸ’° Price Master</div>
          <div onclick="loadModule('processMaster')">âš™ï¸ Process Master</div>
          <div onclick="loadModule('cuttingRule')">âœ‚ï¸ Cutting Rule (Z Rule)</div>
          <div onclick="loadModule('glassSize')">ğŸ“ Glass Size Master</div>
          <div onclick="loadModule('glassType')">ğŸ” Glass Type Master</div>
          <div onclick="loadModule('routeMaster')">ğŸ—ºï¸ Route Master</div>
          <div onclick="loadModule('paymentTerms')">ğŸ’³ Payment Terms Master</div>
          <div onclick="loadModule('filmType')">ğŸï¸ Film Type</div>
          <div onclick="loadModule('bankMaster')">ğŸ¦ Bank Master</div>
          <div onclick="loadModule('vehicleMaster')">ğŸšš Vehicle Master</div>
          <div onclick="loadModule('additionalCharges')">â• Additional Charges Master</div>
          <div onclick="loadModule('remarksMaster')">ğŸ“ Remarks Master</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ” Transactions</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaInvoice')">ğŸ“„ Proforma Invoice</div>
          <div onclick="loadModule('workOrder')">ğŸ“‹ Work Order</div>
          <div onclick="loadModule('salesInvoice')">ğŸ§¾ Sales Invoice</div>
          <div onclick="loadModule('cuttingOptimizer')">âœ‚ï¸ Cutting Optimizer</div>
          <div onclick="loadModule('labelGeneration')">ğŸ·ï¸ Label / Sticker Generation</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ“¦ Inventory / Stock</span>
        <div class="dropdown">
          <div onclick="loadModule('hardwareInventory')">ğŸ”© Hardware Inventory</div>
          <div onclick="loadModule('glassInventory')">ğŸ” Glass Inventory</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>âš™ï¸ System Settings</span>
        <div class="dropdown">
          <div onclick="loadModule('defaultConfig')">âš™ï¸ Default Configuration</div>
          <div onclick="loadModule('fileStorage')">ğŸ’¾ File Storage Configuration</div>
          <div onclick="loadModule('networkConfig')">ğŸŒ Network Configuration</div>
          <div onclick="loadModule('dataBackup')">ğŸ’¿ Data Backup & Restore</div>
          <div onclick="loadModule('smsEmail')">ğŸ“§ SMS / Email Configuration</div>
          <div onclick="loadModule('billingConfig')">ğŸ’° Billing Configuration</div>
          <div onclick="loadModule('printConfig')">ğŸ–¨ï¸ Print Configuration</div>
          <div onclick="loadModule('userAccess')">ğŸ‘¤ User Access Control</div>
          <div onclick="loadModule('softwareUpdate')">ğŸ”„ Software Update</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ‘¥ Customer Management</span>
        <div class="dropdown">
          <div onclick="loadModule('customerRegistration')">ğŸ“ Customer Registration</div>
          <div onclick="loadModule('customerList')">ğŸ“‹ Customer List / Customer Master</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ§‘â€ğŸ’¼ Sales Management</span>
        <div class="dropdown">
          <div onclick="loadModule('salespersonRegistration')">ğŸ“ Salesperson Registration</div>
          <div onclick="loadModule('salespersonList')">ğŸ“‹ Salesperson List</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ“Š Reports</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaReport')">ğŸ“„ Proforma Report</div>
          <div onclick="loadModule('invoiceReport')">ğŸ§¾ Invoice Report</div>
          <div onclick="loadModule('salesPerformance')">ğŸ“ˆ Salesperson Performance Report</div>
          <div onclick="loadModule('productionReport')">ğŸ­ Production Report</div>
          <div onclick="loadModule('workOrderReport')">ğŸ“‹ Work Order Report</div>
          <div onclick="loadModule('glassInventoryReport')">ğŸ” Glass Inventory Report</div>
          <div onclick="loadModule('breakageReport')">ğŸ’” Breakage Report</div>
          <div onclick="loadModule('rejectionReport')">âŒ Rejection Report</div>
          <div onclick="loadModule('pendingBilling')">â³ Pending Billing Report</div>
          <div onclick="loadModule('billedArea')">ğŸ“ Billed Area Report (Sq.Mtr)</div>
          <div onclick="loadModule('tallyExport')">ğŸ“¤ Tally Export Report</div>
          <div onclick="loadModule('directInvoice')">ğŸ§¾ Direct Invoice Report</div>
          <div onclick="loadModule('creditNote')">ğŸ“ Credit Note Report</div>
        </div>
      </div>
      <div class="menu-item" onclick="toggleDropdown(event,this)"><span>ğŸ‘¤ User Management</span>
        <div class="dropdown"><div onclick="loadModule('userManagement')">ğŸ‘¥ User Management</div></div>
      </div>
      <div class="logout-btn" onclick="logout()"><span>ğŸšª Exit</span></div>
    </div>
  </div>

  <div class="content" id="moduleContent"></div>
</div>

<!-- MODALS -->
<div id="addItemModal" class="modal"><div class="modal-content">...</div></div>
<div id="printModal" class="modal"><div class="modal-content">...</div></div>
<div id="reportModal" class="modal"><div class="modal-content">...</div></div>

<script>
// ========== GLOBAL VARIABLES ==========
let currentModule = null;
let activeDropdown = null;
let currentInvoiceItems = [];
let currentWorkOrderItems = [];

// ========== SAMPLE DATA ==========
const sampleData = {
  customers: [
    {id:1,name:"ABC Construction",mobile:"9876543210",email:"abc@example.com",gst:"27AABCU9603R1Z5",balance:25000},
    {id:2,name:"XYZ Builders",mobile:"9876543211",email:"xyz@example.com",gst:"27AAACX1234M1Z2",balance:15000}
  ],
  items: [
    {id:1,code:"GL-001",name:"6mm Clear Glass",category:"Glass",unit:"Sq.Mtr",stock:150,price:550},
    {id:2,code:"GL-002",name:"8mm Tinted Glass",category:"Glass",unit:"Sq.Mtr",stock:80,price:850},
    {id:3,code:"HW-001",name:"Aluminum Frame",category:"Hardware",unit:"PCS",stock:500,price:1200},
    {id:4,code:"AC-001",name:"Rubber Beading",category:"Accessories",unit:"Meter",stock:200,price:45}
  ],
  users: [
    {id:1,userid:"ADM001",name:"Admin User",role:"Administrator",status:"Active"},
    {id:2,userid:"SAL001",name:"Sales User",role:"Salesperson",status:"Active"}
  ],
  invoices: [
    {id:1,invoiceNo:"INV-2024-001",date:"2024-01-15",customer:"ABC Construction",amount:25000,status:"Paid"},
    {id:2,invoiceNo:"INV-2024-002",date:"2024-01-16",customer:"XYZ Builders",amount:18000,status:"Pending"}
  ]
};

// ========== MODULE TEMPLATES ==========
const moduleTemplates = {
  // ========== MASTERS ==========
  itemMaster: {
    title: "ğŸ“¦ Item Master",
    content: `
      <div class="module-header">
        <h2>ğŸ“¦ Item Master</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="openAddItemModal()">â• Add New Item</button>
          <button class="action-btn-success" onclick="saveItemMaster()">ğŸ’¾ Save All</button>
          <button class="action-btn-info" onclick="exportToExcel('items')">ğŸ“¤ Export Excel</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group">
          <label>Quick Search</label>
          <input type="text" id="itemSearch" placeholder="Search by code, name..." onkeyup="searchItems()">
        </div>
        <div class="form-group">
          <label>Filter by Category</label>
          <select id="categoryFilter" onchange="filterItems()">
            <option value="">All Categories</option>
            <option>Glass</option>
            <option>Hardware</option>
            <option>Accessories</option>
          </select>
        </div>
      </div>
      <div class="table-container">
        <h3>Item List (${sampleData.items.length} items)</h3>
        <table class="data-table" id="itemTable">
          <thead>
            <tr><th>Code</th><th>Item Name</th><th>Category</th><th>Unit</th><th>Stock</th><th>Price (â‚¹)</th><th>Actions</th></tr>
          </thead>
          <tbody id="itemTableBody">
            ${sampleData.items.map(item => `
              <tr data-id="${item.id}">
                <td>${item.code}</td><td>${item.name}</td><td>${item.category}</td>
                <td>${item.unit}</td><td>${item.stock}</td><td>${item.price}</td>
                <td class="table-actions">
                  <button class="action-btn" onclick="editItem(${item.id})">âœï¸ Edit</button>
                  <button class="action-btn-danger" onclick="deleteItem(${item.id})">ğŸ—‘ï¸ Delete</button>
                </td>
              </tr>
            `).join('')}
          </tbody>
        </table>
        <div style="margin-top:20px;text-align:center">
          <button class="action-btn-secondary" onclick="loadMoreItems()">ğŸ“¥ Load More</button>
        </div>
      </div>`
  },

  priceMaster: {
    title: "ğŸ’° Price Master",
    content: `
      <div class="module-header">
        <h2>ğŸ’° Price Master</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="openPriceUpdateModal()">ğŸ“ˆ Update Prices</button>
          <button class="action-btn-info" onclick="generatePriceList()">ğŸ–¨ï¸ Print Price List</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchPriceTab('current')">Current Prices</div>
        <div class="tab" onclick="switchPriceTab('history')">Price History</div>
        <div class="tab" onclick="switchPriceTab('bulk')">Bulk Update</div>
      </div>
      <div class="tab-content active" id="currentPrices">
        <div class="table-container">
          <table class="data-table">
            <thead><tr><th>Item</th><th>Current Price</th><th>Effective From</th><th>Previous Price</th><th>Change %</th></tr></thead>
            <tbody>
              <tr><td>6mm Clear Glass</td><td>â‚¹550/Sq.Mtr</td><td>01-Jan-2024</td><td>â‚¹520</td><td style="color:green">+5.8%</td></tr>
              <tr><td>8mm Tinted Glass</td><td>â‚¹850/Sq.Mtr</td><td>15-Dec-2023</td><td>â‚¹820</td><td style="color:green">+3.7%</td></tr>
              <tr><td>Aluminum Frame</td><td>â‚¹1,200/PCS</td><td>01-Jan-2024</td><td>â‚¹1,150</td><td style="color:green">+4.3%</td></tr>
            </tbody>
          </table>
        </div>
      </div>
      <div class="tab-content" id="priceHistory">
        <div class="report-controls">
          <div class="form-group"><label>Select Item</label><select><option>All Items</option></select></div>
          <div class="form-group"><label>From Date</label><input type="date"></div>
          <div class="form-group"><label>To Date</label><input type="date"></div>
          <button class="action-btn">ğŸ” Search</button>
        </div>
        <div class="table-container">Price history table here...</div>
      </div>`
  },

  processMaster: {
    title: "âš™ï¸ Process Master",
    content: `
      <div class="module-header">
        <h2>âš™ï¸ Process Master</h2>
        <div class="action-buttons">
          <button class="action-btn">â• Add Process</button>
          <button class="action-btn-success">ğŸ’¾ Save</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Process Code</label><input type="text" placeholder="PRC-001"></div>
        <div class="form-group"><label>Process Name</label><input type="text" placeholder="Cutting"></div>
        <div class="form-group"><label>Department</label><select><option>Production</option><option>Quality</option></select></div>
        <div class="form-group"><label>Standard Time (mins)</label><input type="number" placeholder="30"></div>
        <div class="form-group"><label>Cost Per Unit (â‚¹)</label><input type="number" placeholder="50"></div>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead><tr><th>Process Code</th><th>Process Name</th><th>Department</th><th>Time</th><th>Cost</th><th>Status</th></tr></thead>
          <tbody>
            <tr><td>PRC-001</td><td>Cutting</td><td>Production</td><td>30 mins</td><td>â‚¹50</td><td><span class="status-badge status-active">Active</span></td></tr>
            <tr><td>PRC-002</td><td>Grinding</td><td>Production</td><td>45 mins</td><td>â‚¹75</td><td><span class="status-badge status-active">Active</span></td></tr>
          </tbody>
        </table>
      </div>`
  },

  cuttingRule: {
    title: "âœ‚ï¸ Cutting Rule (Z Rule)",
    content: `
      <div class="module-header">
        <h2>âœ‚ï¸ Cutting Rule (Z Rule)</h2>
        <div class="action-buttons">
          <button class="action-btn">â• Add Rule</button>
          <button class="action-btn-success">ğŸ’¾ Save Rules</button>
        </div>
      </div>
      <div class="optimizer-grid">
        <div class="optimizer-card">
          <h3>ğŸ“ Rule Configuration</h3>
          <div class="form-group"><label>Rule Name</label><input type="text" value="Z-Rule Standard"></div>
          <div class="form-group"><label>Wastage Allowance (%)</label><input type="number" value="3"></div>
          <div class="form-group"><label>Minimum Remnant Size (mm)</label><input type="number" value="100"></div>
        </div>
        <div class="optimizer-card">
          <h3>âš™ï¸ Optimization Settings</h3>
          <div class="form-group"><label>Panel Size (mm)</label><input type="text" value="2440x1220"></div>
          <div class="form-group"><label>Cutting Kerf (mm)</label><input type="number" value="3"></div>
          <div class="form-group"><label>Priority</label><select><option>Minimize Wastage</option><option>Maximize Pieces</option></select></div>
        </div>
        <div class="optimizer-card">
          <h3>ğŸ“Š Current Rules</h3>
          <ul style="list-style:none;padding:0">
            <li>âœ… Z-Rule Standard (Active)</li>
            <li>âœ… Optimized Cutting Pattern</li>
            <li>âœ… 3% Wastage Allowance</li>
            <li>âœ… Auto remnant utilization</li>
          </ul>
        </div>
      </div>`
  },

  glassSize: {
    title: "ğŸ“ Glass Size Master",
    content: `
      <div class="module-header">
        <h2>ğŸ“ Glass Size Master</h2>
        <div class="action-buttons">
          <button class="action-btn">â• Add Size</button>
          <button class="action-btn-success">ğŸ’¾ Save</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Thickness (mm)</label><select><option>6</option><option>8</option><option>10</option><option>12</option></select></div>
        <div class="form-group"><label>Width (mm)</label><input type="number" placeholder="e.g., 2440"></div>
        <div class="form-group"><label>Height (mm)</label><input type="number" placeholder="e.g., 1220"></div>
        <div class="form-group"><label>Standard Size Name</label><input type="text" placeholder="e.g., 8x4 Feet"></div>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead><tr><th>Size ID</th><th>Dimensions (mm)</th><th>Feet Size</th><th>Area (Sq.Mtr)</th><th>Weight (Kg)</th></tr></thead>
          <tbody>
            <tr><td>GS-001</td><td>2440 x 1220</td><td>8x4 Feet</td><td>2.98</td><td>45.6</td></tr>
            <tr><td>GS-002</td><td>3050 x 1220</td><td>10x4 Feet</td><td>3.72</td><td>57.0</td></tr>
          </tbody>
        </table>
      </div>`
  },

  glassType: {
    title: "ğŸ” Glass Type Master",
    content: `
      <div class="module-header">
        <h2>ğŸ” Glass Type Master</h2>
        <div class="action-buttons">
          <button class="action-btn">â• Add Type</button>
          <button class="action-btn-success">ğŸ’¾ Save</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Type Code</label><input type="text" placeholder="e.g., CLR-6"></div>
        <div class="form-group"><label>Glass Type</label><select><option>Clear</option><option>Tinted</option><option>Reflective</option><option>Laminated</option></select></div>
        <div class="form-group"><label>Thickness Options</label><input type="text" placeholder="e.g., 6,8,10,12"></div>
        <div class="form-group"><label>UV Protection</label><select><option>Yes</option><option>No</option></select></div>
        <div class="form-group"><label>Safety Rating</label><select><option>Standard</option><option>Tempered</option><option>Laminated</option></select></div>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead><tr><th>Type Code</th><th>Glass Type</th><th>Thickness</th><th>UV Protection</th><th>Safety</th><th>Price/Sq.Mtr</th></tr></thead>
          <tbody>
            <tr><td>CLR-6</td><td>Clear</td><td>6mm</td><td>No</td><td>Standard</td><td>â‚¹550</td></tr>
            <tr><td>TNT-8</td><td>Tinted</td><td>8mm</td><td>Yes</td><td>Tempered</td><td>â‚¹850</td></tr>
          </tbody>
        </table>
      </div>`
  },

  routeMaster: {
    title: "ğŸ—ºï¸ Route Master",
    content: `
      <div class="module-header">
        <h2>ğŸ—ºï¸ Route Master</h2>
        <div class="action-buttons">
          <button class="action-btn">â• Add Route</button>
          <button class="action-btn-success">ğŸ’¾ Save</button>
          <button class="action-btn-info" onclick="showRouteMap()">ğŸ—ºï¸ View Map</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Route Code</label><input type="text" placeholder="RT-001"></div>
        <div class="form-group"><label>Route Name</label><input type="text" placeholder="e.g., City Center Route"></div>
        <div class="form-group"><label>Vehicle Type</label><select><option>Small Truck</option><option>Large Truck</option></select></div>
        <div class="form-group"><label>Distance (km)</label><input type="number" placeholder="e.g., 50"></div>
        <div class="form-group"><label>Estimated Time (hours)</label><input type="number" placeholder="e.g., 3"></div>
      </div>
      <div class="table-container">
        <table class="data-table">
          <thead><tr><th>Route Code</th><th>Route Name</th><th>Vehicle Type</th><th>Distance</th><th>Time</th><th>Fuel Cost</th></tr></thead>
          <tbody>
            <tr><td>RT-001</td><td>City Center</td><td>Small Truck</td><td>25 km</td><td>2 hrs</td><td>â‚¹500</td></tr>
            <tr><td>RT-002</td><td>Industrial Area</td><td>Large Truck</td><td>40 km</td><td>3 hrs</td><td>â‚¹800</td></tr>
          </tbody>
        </table>
      </div>`
  },

  // ========== TRANSACTIONS ==========
  proformaInvoice: {
    title: "ğŸ“„ Proforma Invoice",
    content: `
      <div class="module-header">
        <h2>ğŸ“„ Proforma Invoice</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="createNewProforma()">ğŸ“ New Proforma</button>
          <button class="action-btn-success" onclick="saveProforma()">ğŸ’¾ Save</button>
          <button class="action-btn-warning" onclick="printProforma()">ğŸ–¨ï¸ Print</button>
          <button class="action-btn-info" onclick="convertToInvoice()">ğŸ§¾ Convert to Invoice</button>
        </div>
      </div>
      <div class="invoice-header">
        <div style="display:flex;justify-content:space-between">
          <div><h3 style="margin:0">PROFORMA INVOICE</h3><p style="margin:5px 0">Date: ${new Date().toLocaleDateString()}</p></div>
          <div style="text-align:right"><h2 style="margin:0">PI-${new Date().getFullYear()}-001</h2><p style="margin:5px 0">Status: <span class="status-badge status-pending">Pending</span></p></div>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Customer</label><select id="proformaCustomer"><option value="">Select Customer</option>${sampleData.customers.map(c => `<option value="${c.id}">${c.name}</option>`).join('')}</select></div>
        <div class="form-group"><label>Invoice Date</label><input type="date" id="proformaDate" value="${new Date().toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>Valid Until</label><input type="date" value="${new Date(Date.now() + 30*24*60*60*1000).toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>Payment Terms</label><select><option>30 Days</option><option>Immediate</option></select></div>
      </div>
      <div class="table-container">
        <h3>Items</h3>
        <table class="invoice-items-table">
          <thead><tr><th>Item</th><th>Description</th><th>Qty</th><th>Unit</th><th>Rate (â‚¹)</th><th>Amount (â‚¹)</th><th>Action</th></tr></thead>
          <tbody id="proformaItems">
            <tr><td><select><option>Select Item</option>${sampleData.items.map(i => `<option value="${i.id}">${i.name}</option>`).join('')}</select></td>
            <td><input type="text" placeholder="Description"></td><td><input type="number" value="1" style="width:80px"></td>
            <td><select><option>Sq.Mtr</option><option>PCS</option></select></td><td><input type="number" value="550" style="width:100px"></td>
            <td>550</td><td><button class="action-btn-danger" onclick="removeRow(this)">âŒ</button></td></tr>
          </tbody>
        </table>
        <button class="action-btn" onclick="addProformaItem()" style="margin-top:10px">â• Add Item</button>
        <table class="invoice-totals">
          <tr><td>Subtotal:</td><td>â‚¹550.00</td></tr>
          <tr><td>GST (18%):</td><td>â‚¹99.00</td></tr>
          <tr><td>Transport:</td><td>â‚¹200.00</td></tr>
          <tr><td>Total:</td><td>â‚¹849.00</td></tr>
        </table>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Terms & Conditions</label><textarea rows="3" placeholder="Enter terms...">1. This is a proforma invoice
2. Valid for 30 days
3. Prices subject to change</textarea></div>
        <div class="form-group"><label>Notes</label><textarea rows="2" placeholder="Any special instructions..."></textarea></div>
      </div>`
  },

  workOrder: {
    title: "ğŸ“‹ Work Order",
    content: `
      <div class="module-header">
        <h2>ğŸ“‹ Work Order</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="createNewWorkOrder()">ğŸ“ New Work Order</button>
          <button class="action-btn-success" onclick="saveWorkOrder()">ğŸ’¾ Save</button>
          <button class="action-btn-info" onclick="printWorkOrder()">ğŸ–¨ï¸ Print</button>
          <button class="action-btn-warning" onclick="markAsComplete()">âœ… Mark Complete</button>
        </div>
      </div>
      <div class="alert alert-info">Work Order Number: <strong>WO-${new Date().getFullYear()}-${String(Math.floor(Math.random()*1000)).padStart(3,'0')}</strong> | Status: <span class="status-badge status-pending">In Progress</span></div>
      <div class="form-container">
        <div class="form-group"><label>Customer</label><select><option>Select Customer</option>${sampleData.customers.map(c => `<option>${c.name}</option>`).join('')}</select></div>
        <div class="form-group"><label>Order Date</label><input type="date" value="${new Date().toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>Delivery Date</label><input type="date" value="${new Date(Date.now() + 7*24*60*60*1000).toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>Priority</label><select><option>Normal</option><option>High</option><option>Urgent</option></select></div>
        <div class="form-group"><label>Assigned To</label><select><option>Production Dept</option><option>John (Supervisor)</option></select></div>
      </div>
      <div class="table-container">
        <h3>Work Order Items</h3>
        <table class="data-table">
          <thead><tr><th>Item</th><th>Size</th><th>Qty</th><th>Process</th><th>Status</th><th>Start Date</th><th>Completion</th></tr></thead>
          <tbody>
            <tr><td>6mm Clear Glass</td><td>4x3 Feet</td><td>10</td><td>Cutting</td><td><span class="status-badge status-active">In Progress</span></td><td>${new Date().toLocaleDateString()}</td><td>50%</td></tr>
            <tr><td>Aluminum Frame</td><td>Custom</td><td>5</td><td>Assembly</td><td><span class="status-badge status-pending">Pending</span></td><td>-</td><td>0%</td></tr>
          </tbody>
        </table>
      </div>
      <div class="form-container">
        <h3>Production Schedule</h3>
        <div class="optimizer-grid">
          <div class="optimizer-card"><h4>Today's Tasks</h4><ul><li>Cutting - 10 pieces</li><li>Grinding - 5 pieces</li></ul></div>
          <div class="optimizer-card"><h4>Pending Tasks</h4><ul><li>Assembly - 5 frames</li><li>Quality Check</li></ul></div>
          <div class="optimizer-card"><h4>Completed</h4><ul><li>Material Issued</li><li>Design Approved</li></ul></div>
        </div>
      </div>`
  },

  salesInvoice: {
    title: "ğŸ§¾ Sales Invoice",
    content: `
      <div class="module-header">
        <h2>ğŸ§¾ Sales Invoice</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="createNewInvoice()">ğŸ“„ New Invoice</button>
          <button class="action-btn-success" onclick="saveInvoice()">ğŸ’¾ Save Invoice</button>
          <button class="action-btn-warning" onclick="printInvoice()">ğŸ–¨ï¸ Print</button>
          <button class="action-btn-info" onclick="sendEmailInvoice()">ğŸ“§ Email</button>
          <button class="action-btn-danger" onclick="cancelInvoice()">âŒ Cancel</button>
        </div>
      </div>
      <div class="invoice-header">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div><h1 style="margin:0">TAX INVOICE</h1><p style="margin:5px 0">JP Solutions | GST: 27AABCU9603R1Z5</p></div>
          <div style="text-align:right"><h2 style="margin:0">INV-${new Date().getFullYear()}-001</h2><p style="margin:5px 0">Date: ${new Date().toLocaleDateString()}</p></div>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Bill To</label><textarea rows="3" placeholder="Customer address...">ABC Construction
123 Main Street
Mumbai - 400001
GST: 27AABCU9603R1Z5</textarea></div>
        <div class="form-group"><label>Ship To</label><textarea rows="3" placeholder="Shipping address...">Same as billing</textarea></div>
        <div class="form-group"><label>Place of Supply</label><input type="text" value="Maharashtra"></div>
        <div class="form-group"><label>Payment Terms</label><select><option>Net 30</option><option>Immediate</option></select></div>
      </div>
      <div class="table-container">
        <table class="invoice-items-table">
          <thead><tr><th>#</th><th>Item Description</th><th>HSN/SAC</th><th>Qty</th><th>Unit</th><th>Rate (â‚¹)</th><th>Amount (â‚¹)</th></tr></thead>
          <tbody>
            <tr><td>1</td><td>6mm Clear Glass - 4x3 Feet</td><td>7003</td><td>10</td><td>Sq.Mtr</td><td>550.00</td><td>5,500.00</td></tr>
            <tr><td>2</td><td>Aluminum Frame Assembly</td><td>7610</td><td>5</td><td>PCS</td><td>1,200.00</td><td>6,000.00</td></tr>
          </tbody>
        </table>
        <table class="invoice-totals">
          <tr><td>Subtotal:</td><td>â‚¹11,500.00</td></tr>
          <tr><td>CGST (9%):</td><td>â‚¹1,035.00</td></tr>
          <tr><td>SGST (9%):</td><td>â‚¹1,035.00</td></tr>
          <tr><td>Transport Charges:</td><td>â‚¹500.00</td></tr>
          <tr><td>Round Off:</td><td>â‚¹-0.00</td></tr>
          <tr style="font-size:1.3rem;font-weight:bold"><td>Grand Total:</td><td>â‚¹14,070.00</td></tr>
        </table>
      </div>
      <div style="padding:20px">
        <h3>Payment Details</h3>
        <div class="form-container">
          <div class="form-group"><label>Amount Paid</label><input type="number" value="14070"></div>
          <div class="form-group"><label>Payment Mode</label><select><option>Bank Transfer</option><option>Cash</option><option>Cheque</option></select></div>
          <div class="form-group"><label>Transaction Ref</label><input type="text" placeholder="Reference number"></div>
        </div>
      </div>`
  },

  cuttingOptimizer: {
    title: "âœ‚ï¸ Cutting Optimizer",
    content: `
      <div class="module-header">
        <h2>âœ‚ï¸ Cutting Optimizer</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="runOptimization()">âš¡ Optimize Now</button>
          <button class="action-btn-success" onclick="saveOptimization()">ğŸ’¾ Save Pattern</button>
          <button class="action-btn-info" onclick="printCuttingPlan()">ğŸ–¨ï¸ Print Plan</button>
          <button class="action-btn-warning" onclick="resetOptimizer()">ğŸ”„ Reset</button>
        </div>
      </div>
      <div class="optimizer-grid">
        <div class="optimizer-card">
          <h3>ğŸ“ Input Panel</h3>
          <div class="form-group"><label>Panel Width (mm)</label><input type="number" id="panelWidth" value="2440"></div>
          <div class="form-group"><label>Panel Height (mm)</label><input type="number" id="panelHeight" value="1220"></div>
          <div class="form-group"><label>Panel Thickness</label><select><option>6mm</option><option>8mm</option></select></div>
          <div class="form-group"><label>Wastage Allowance (%)</label><input type="number" value="3" min="0" max="10"></div>
        </div>
        <div class="optimizer-card">
          <h3>âœ‚ï¸ Required Pieces</h3>
          <table style="width:100%">
            <thead><tr><th>Width</th><th>Height</th><th>Qty</th><th>Action</th></tr></thead>
            <tbody id="piecesList">
              <tr><td><input type="number" value="600" style="width:80px"></td><td><input type="number" value="400" style="width:80px"></td><td><input type="number" value="4" style="width:60px"></td><td><button class="action-btn-danger" onclick="removePiece(this)">âŒ</button></td></tr>
              <tr><td><input type="number" value="800" style="width:80px"></td><td><input type="number" value="500" style="width:80px"></td><td><input type="number" value="2" style="width:60px"></td><td><button class="action-btn-danger" onclick="removePiece(this)">âŒ</button></td></tr>
            </tbody>
          </table>
          <button class="action-btn" onclick="addPiece()" style="margin-top:10px">â• Add Piece</button>
        </div>
        <div class="optimizer-card">
          <h3>ğŸ“Š Optimization Results</h3>
          <div id="resultsContainer" style="text-align:center;padding:20px">
            <p>Click 'Optimize Now' to see results</p>
          </div>
        </div>
      </div>
      <div class="table-container">
        <h3>Optimization History</h3>
        <table class="data-table">
          <thead><tr><th>Date</th><th>Panel Size</th><th>Pieces</th><th>Utilization</th><th>Wastage</th><th>Savings</th></tr></thead>
          <tbody>
            <tr><td>${new Date().toLocaleDateString()}</td><td>2440x1220</td><td>6 pieces</td><td>92%</td><td>8%</td><td>â‚¹450</td></tr>
          </tbody>
        </table>
      </div>`
  },

  labelGeneration: {
    title: "ğŸ·ï¸ Label / Sticker Generation",
    content: `
      <div class="module-header">
        <h2>ğŸ·ï¸ Label / Sticker Generation</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="generateLabels()">ğŸ·ï¸ Generate Labels</button>
          <button class="action-btn-success" onclick="printLabels()">ğŸ–¨ï¸ Print Labels</button>
          <button class="action-btn-info" onclick="previewLabels()">ğŸ‘ï¸ Preview</button>
        </div>
      </div>
      <div class="form-container">
        <div class="form-group"><label>Label Type</label><select id="labelType"><option>Product Label</option><option>Shipping Label</option><option>Barcode Sticker</option></select></div>
        <div class="form-group"><label>Label Size</label><select><option>4x2 inches</option><option>3x2 inches</option><option>A4 Sheet</option></select></div>
        <div class="form-group"><label>Quantity</label><input type="number" value="10"></div>
        <div class="form-group"><label>Start Number</label><input type="number" value="1"></div>
        <div class="form-group"><label>Include Barcode</label><div class="checkbox-group"><input type="checkbox" checked> Yes</div></div>
        <div class="form-group"><label>Include QR Code</label><div class="checkbox-group"><input type="checkbox"> Yes</div></div>
      </div>
      <div class="table-container">
        <h3>Label Preview</h3>
        <div id="labelPreview" style="display:grid;grid-template-columns:repeat(3, 1fr);gap:20px;margin-top:20px">
          <div style="border:2px dashed #ccc;padding:15px;text-align:center">
            <h4>JP Solutions</h4><p>6mm Clear Glass</p><p>Size: 4x3 Feet</p><p>Batch: GL-001</p>
            <div style="background:#eee;padding:5px">ğŸ“¦ Scan for details</div>
          </div>
          <div style="border:2px dashed #ccc;padding:15px;text-align:center">
            <h4>JP Solutions</h4><p>6mm Clear Glass</p><p>Size: 4x3 Feet</p><p>Batch: GL-001</p>
            <div style="background:#eee;padding:5px">ğŸ“¦ Scan for details</div>
          </div>
          <div style="border:2px dashed #ccc;padding:15px;text-align:center">
            <h4>JP Solutions</h4><p>6mm Clear Glass</p><p>Size: 4x3 Feet</p><p>Batch: GL-001</p>
            <div style="background:#eee;padding:5px">ğŸ“¦ Scan for details</div>
          </div>
        </div>
      </div>`
  },

  // ========== INVENTORY ==========
  hardwareInventory: {
    title: "ğŸ”© Hardware Inventory",
    content: `
      <div class="module-header">
        <h2>ğŸ”© Hardware Inventory</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="addHardwareStock()">ğŸ“¦ Add Stock</button>
          <button class="action-btn-warning" onclick="issueHardware()">ğŸ“¤ Issue Stock</button>
          <button class="action-btn-info" onclick="exportInventory()">ğŸ“¤ Export</button>
          <button class="action-btn-danger" onclick="adjustStock()">ğŸ”„ Adjust Stock</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchInventoryTab('stock')">Current Stock</div>
        <div class="tab" onclick="switchInventoryTab('transactions')">Transactions</div>
        <div class="tab" onclick="switchInventoryTab('reorder')">Reorder Level</div>
        <div class="tab" onclick="switchInventoryTab('valuation')">Valuation</div>
      </div>
      <div class="tab-content active">
        <div class="report-controls">
          <div class="form-group"><label>Search Hardware</label><input type="text" placeholder="Search..."></div>
          <div class="form-group"><label>Category</label><select><option>All</option><option>Frames</option><option>Handles</option><option>Locks</option></select></div>
          <button class="action-btn">ğŸ” Search</button>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead><tr><th>Item Code</th><th>Hardware Name</th><th>Category</th><th>Current Stock</th><th>Min Stock</th><th>Max Stock</th><th>Unit Price</th><th>Total Value</th></tr></thead>
            <tbody>
              <tr><td>HW-001</td><td>Aluminum Frame</td><td>Frames</td><td>150</td><td>20</td><td>200</td><td>â‚¹1,200</td><td>â‚¹1,80,000</td></tr>
              <tr><td>HW-002</td><td>Window Handle</td><td>Handles</td><td>45</td><td>10</td><td>100</td><td>â‚¹85</td><td>â‚¹3,825</td></tr>
              <tr style="background:#fff3cd"><td>HW-003</td><td>Glass Lock</td><td>Locks</td><td>8</td><td>15</td><td>50</td><td>â‚¹120</td><td>â‚¹960</td></tr>
            </tbody>
          </table>
        </div>
      </div>`
  },

  glassInventory: {
    title: "ğŸ” Glass Inventory",
    content: `
      <div class="module-header">
        <h2>ğŸ” Glass Inventory</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="addGlassStock()">ğŸ“¦ Receive Stock</button>
          <button class="action-btn-warning" onclick="issueGlass()">ğŸ“¤ Issue Glass</button>
          <button class="action-btn-danger" onclick="recordBreakage()">ğŸ’” Record Breakage</button>
          <button class="action-btn-info" onclick="generateStockReport()">ğŸ“Š Stock Report</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchGlassTab('current')">Current Stock</div>
        <div class="tab" onclick="switchGlassTab('transactions')">Transactions</div>
        <div class="tab" onclick="switchGlassTab('breakage')">Breakage Records</div>
        <div class="tab" onclick="switchGlassTab('wastage')">Wastage Analysis</div>
      </div>
      <div class="tab-content active">
        <div class="optimizer-grid">
          <div class="optimizer-card" style="background:linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%)">
            <h3>ğŸ“Š Stock Summary</h3>
            <div style="font-size:2.5rem;font-weight:bold;text-align:center">2,450</div>
            <p style="text-align:center">Sq.Mtr Total Stock</p>
            <div style="display:flex;justify-content:space-between">
              <div><div style="font-size:1.5rem">1,150</div><small>Clear Glass</small></div>
              <div><div style="font-size:1.5rem">800</div><small>Tinted</small></div>
              <div><div style="font-size:1.5rem">500</div><small>Laminated</small></div>
            </div>
          </div>
          <div class="optimizer-card">
            <h3>âš ï¸ Low Stock Alert</h3>
            <ul style="list-style:none;padding:0">
              <li>âŒ 8mm Tinted - 15 Sq.Mtr left</li>
              <li>âš ï¸ 10mm Clear - 25 Sq.Mtr left</li>
              <li>âœ… 6mm Clear - Adequate</li>
            </ul>
          </div>
          <div class="optimizer-card">
            <h3>ğŸ“ˆ Recent Activity</h3>
            <ul style="list-style:none;padding:0">
              <li>ğŸ“¥ Received: 200 Sq.Mtr (Today)</li>
              <li>ğŸ“¤ Issued: 150 Sq.Mtr (Today)</li>
              <li>ğŸ’” Breakage: 5 Sq.Mtr (This week)</li>
            </ul>
          </div>
        </div>
        <div class="table-container">
          <table class="data-table">
            <thead><tr><th>Glass Type</th><th>Thickness</th><th>Size</th><th>Stock (Sq.Mtr)</th><th>Location</th><th>Last Updated</th><th>Value (â‚¹)</th></tr></thead>
            <tbody>
              <tr><td>Clear</td><td>6mm</td><td>8x4</td><td>850</td><td>Rack A1-A5</td><td>Today</td><td>â‚¹4,67,500</td></tr>
              <tr><td>Clear</td><td>8mm</td><td>8x4</td><td>300</td><td>Rack B1-B3</td><td>Yesterday</td><td>â‚¹2,55,000</td></tr>
              <tr style="background:#f8d7da"><td>Tinted</td><td>8mm</td><td>10x5</td><td>15</td><td>Rack C1</td><td>Today</td><td>â‚¹12,750</td></tr>
            </tbody>
          </table>
        </div>
      </div>`
  },

  // ========== CUSTOMER MANAGEMENT ==========
  customerRegistration: {
    title: "ğŸ“ Customer Registration",
    content: `
      <div class="module-header">
        <h2>ğŸ“ Customer Registration</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="saveCustomer()">ğŸ’¾ Save Customer</button>
          <button class="action-btn-success" onclick="saveAndNew()">ğŸ’¾ Save & New</button>
          <button class="action-btn-info" onclick="clearForm()">ğŸ—‘ï¸ Clear Form</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchCustomerTab('basic')">Basic Details</div>
        <div class="tab" onclick="switchCustomerTab('billing')">Billing Details</div>
        <div class="tab" onclick="switchCustomerTab('credit')">Credit Info</div>
        <div class="tab" onclick="switchCustomerTab('documents')">Documents</div>
      </div>
      <div class="tab-content active">
        <div class="form-container">
          <div class="form-group"><label>Customer Code</label><input type="text" value="CUST-${new Date().getFullYear()}-001" readonly></div>
          <div class="form-group"><label>Customer Name *</label><input type="text" placeholder="Enter full name" required></div>
          <div class="form-group"><label>Contact Person</label><input type="text" placeholder="Contact person name"></div>
          <div class="form-group"><label>Mobile Number *</label><input type="tel" placeholder="10-digit mobile" required></div>
          <div class="form-group"><label>Email</label><input type="email" placeholder="email@example.com"></div>
          <div class="form-group"><label>Phone</label><input type="tel" placeholder="Landline number"></div>
          <div class="form-group"><label>Address</label><textarea rows="3" placeholder="Full address"></textarea></div>
          <div class="form-group"><label>City</label><input type="text" placeholder="City"></div>
          <div class="form-group"><label>State</label><input type="text" placeholder="State"></div>
          <div class="form-group"><label>Pincode</label><input type="text" placeholder="Pincode"></div>
          <div class="form-group"><label>Customer Type</label><select><option>Regular</option><option>Walk-in</option><option>Contractor</option><option>Builder</option></select></div>
          <div class="form-group"><label>Reference By</label><input type="text" placeholder="Reference person"></div>
        </div>
      </div>`
  },

  customerList: {
    title: "ğŸ“‹ Customer List",
    content: `
      <div class="module-header">
        <h2>ğŸ“‹ Customer List / Customer Master</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="addNewCustomer()">â• New Customer</button>
          <button class="action-btn-info" onclick="exportCustomers()">ğŸ“¤ Export Excel</button>
          <button class="action-btn-warning" onclick="sendBulkSMS()">ğŸ“± Send SMS</button>
          <button class="action-btn-success" onclick="importCustomers()">ğŸ“¥ Import</button>
        </div>
      </div>
      <div class="report-controls">
        <div class="form-group"><label>Search Customer</label><input type="text" placeholder="Name, mobile, or code..."></div>
        <div class="form-group"><label>Customer Type</label><select><option>All Types</option><option>Regular</option><option>Contractor</option></select></div>
        <div class="form-group"><label>Status</label><select><option>All</option><option>Active</option><option>Inactive</option></select></div>
        <div class="form-group"><label>City</label><input type="text" placeholder="Filter by city"></div>
        <button class="action-btn">ğŸ” Search</button>
        <button class="action-btn-secondary">ğŸ”„ Reset</button>
      </div>
      <div class="table-container">
        <h3>Customer List (${sampleData.customers.length} customers)</h3>
        <table class="data-table">
          <thead><tr><th>Cust ID</th><th>Name</th><th>Contact</th><th>Email</th><th>City</th><th>Type</th><th>Balance (â‚¹)</th><th>Last Order</th><th>Actions</th></tr></thead>
          <tbody>
            ${sampleData.customers.map(c => `
              <tr>
                <td>CUST-${c.id.toString().padStart(3,'0')}</td>
                <td><strong>${c.name}</strong><br><small>${c.gst}</small></td>
                <td>${c.mobile}</td>
                <td>${c.email}</td>
                <td>Mumbai</td>
                <td><span class="status-badge status-active">Regular</span></td>
                <td>â‚¹${c.balance.toLocaleString()}</td>
                <td>${new Date().toLocaleDateString()}</td>
                <td class="table-actions">
                  <button class="action-btn" onclick="editCustomer(${c.id})">âœï¸ Edit</button>
                  <button class="action-btn-info" onclick="viewStatement(${c.id})">ğŸ’° Statement</button>
                  <button class="action-btn-warning" onclick="sendReminder(${c.id})">â° Remind</button>
                </td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      </div>`
  },

  // ========== USER MANAGEMENT ==========
  userManagement: {
    title: "ğŸ‘¥ User Management",
    content: `
      <div class="module-header">
        <h2>ğŸ‘¥ User Management</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="addNewUser()">â• Add User</button>
          <button class="action-btn-success" onclick="saveUserChanges()">ğŸ’¾ Save Changes</button>
          <button class="action-btn-info" onclick="exportUsers()">ğŸ“¤ Export</button>
          <button class="action-btn-warning" onclick="resetPasswords()">ğŸ” Reset Password</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchUserTab('users')">Users</div>
        <div class="tab" onclick="switchUserTab('roles')">Roles & Permissions</div>
        <div class="tab" onclick="switchUserTab('logs')">Activity Logs</div>
        <div class="tab" onclick="switchUserTab('access')">Access Control</div>
      </div>
      <div class="tab-content active">
        <div class="table-container">
          <table class="data-table">
            <thead><tr><th>User ID</th><th>Full Name</th><th>Username</th><th>Role</th><th>Department</th><th>Status</th><th>Last Login</th><th>Actions</th></tr></thead>
            <tbody>
              ${sampleData.users.map(u => `
                <tr>
                  <td>${u.userid}</td>
                  <td><strong>${u.name}</strong></td>
                  <td>${u.name.toLowerCase().replace(' ','.')}</td>
                  <td>${u.role}</td>
                  <td>${u.role === 'Administrator' ? 'Management' : 'Sales'}</td>
                  <td><span class="status-badge status-${u.status.toLowerCase()}">${u.status}</span></td>
                  <td>${new Date().toLocaleString()}</td>
                  <td class="table-actions">
                    <button class="action-btn" onclick="editUser('${u.userid}')">âœï¸ Edit</button>
                    <button class="action-btn-warning" onclick="toggleUserStatus('${u.userid}')">ğŸ”„ ${u.status === 'Active' ? 'Deactivate' : 'Activate'}</button>
                    <button class="action-btn-info" onclick="resetUserPassword('${u.userid}')">ğŸ”‘ Reset</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      </div>`
  },

  // ========== REPORTS ==========
  invoiceReport: {
    title: "ğŸ§¾ Invoice Report",
    content: `
      <div class="module-header">
        <h2>ğŸ§¾ Invoice Report</h2>
        <div class="action-buttons">
          <button class="action-btn" onclick="generateInvoiceReport()">ğŸ“Š Generate Report</button>
          <button class="action-btn-success" onclick="exportInvoiceReport()">ğŸ“¤ Export Excel</button>
          <button class="action-btn-warning" onclick="printInvoiceReport()">ğŸ–¨ï¸ Print</button>
          <button class="action-btn-info" onclick="emailInvoiceReport()">ğŸ“§ Email Report</button>
        </div>
      </div>
      <div class="report-controls">
        <div class="form-group"><label>Report Type</label>
          <select><option>Sales Invoice Summary</option><option>Tax Report</option><option>Payment Collection</option><option>Outstanding Invoices</option></select>
        </div>
        <div class="form-group"><label>From Date</label><input type="date" value="${new Date(new Date().getFullYear(), new Date().getMonth(), 1).toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>To Date</label><input type="date" value="${new Date().toISOString().split('T')[0]}"></div>
        <div class="form-group"><label>Customer</label><select><option>All Customers</option></select></div>
        <div class="form-group"><label>Status</label><select><option>All</option><option>Paid</option><option>Pending</option><option>Overdue</option></select></div>
        <button class="action-btn">ğŸ” Generate</button>
      </div>
      <div class="chart-container">
        <h3 style="text-align:center">Sales Trend - Last 30 Days</h3>
        <div style="height:300px;background:#f8f9fa;border-radius:8px;padding:20px;display:flex;align-items:flex-end;gap:20px;justify-content:center">
          <div style="width:40px;background:var(--blue);height:80%"></div>
          <div style="width:40px;background:var(--success);height:60%"></div>
          <div style="width:40px;background:var(--warning);height:90%"></div>
          <div style="width:40px;background:var(--danger);height:40%"></div>
        </div>
      </div>
      <div class="table-container">
        <h3>Invoice Summary</h3>
        <table class="data-table">
          <thead><tr><th>Invoice No</th><th>Date</th><th>Customer</th><th>Amount (â‚¹)</th><th>Tax (â‚¹)</th><th>Status</th><th>Due Date</th></tr></thead>
          <tbody>
            ${sampleData.invoices.map(inv => `
              <tr>
                <td>${inv.invoiceNo}</td>
                <td>${inv.date}</td>
                <td>${inv.customer}</td>
                <td>${inv.amount.toLocaleString()}</td>
                <td>${Math.round(inv.amount * 0.18).toLocaleString()}</td>
                <td><span class="status-badge status-${inv.status.toLowerCase()}">${inv.status}</span></td>
                <td>${new Date(new Date(inv.date).getTime() + 30*24*60*60*1000).toLocaleDateString()}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      </div>`
  },

  // ========== SYSTEM SETTINGS ==========
  defaultConfig: {
    title: "âš™ï¸ Default Configuration",
    content: `
      <div class="module-header">
        <h2>âš™ï¸ Default Configuration</h2>
        <div class="action-buttons">
          <button class="action-btn-success" onclick="saveConfiguration()">ğŸ’¾ Save Configuration</button>
          <button class="action-btn-warning" onclick="resetConfiguration()">ğŸ”„ Reset to Default</button>
          <button class="action-btn-info" onclick="backupConfig()">ğŸ’¿ Backup Config</button>
        </div>
      </div>
      <div class="tab-container">
        <div class="tab active" onclick="switchConfigTab('general')">General</div>
        <div class="tab" onclick="switchConfigTab('company')">Company</div>
        <div class="tab" onclick="switchConfigTab('tax')">Tax & GST</div>
        <div class="tab" onclick="switchConfigTab('inventory')">Inventory</div>
        <div class="tab" onclick="switchConfigTab('invoice')">Invoice</div>
      </div>
      <div class="tab-content active">
        <div class="config-card">
          <h3>General Settings</h3>
          <div class="form-container">
            <div class="form-group"><label>Company Name</label><input type="text" value="JP Solutions"></div>
            <div class="form-group"><label>Default Currency</label><select><option selected>â‚¹ Indian Rupee</option><option>$ US Dollar</option></select></div>
            <div class="form-group"><label>Country</label><input type="text" value="India" readonly></div>
            <div class="form-group"><label>Language</label><select><option selected>English</option><option>Hindi</option></select></div>
            <div class="form-group"><label>Date Format</label><select><option selected>DD/MM/YYYY</option><option>MM/DD/YYYY</option></select></div>
            <div class="form-group"><label>Time Zone</label><select><option selected>IST (UTC+5:30)</option></select></div>
          </div>
        </div>
        <div class="config-card">
          <h3>Financial Settings</h3>
          <div class="form-container">
            <div class="form-group"><label>Default Tax Rate (%)</label><input type="number" value="18"></div>
            <div class="form-group"><label>GST Number</label><input type="text" value="27AABCU9603R1Z5"></div>
            <div class="form-group"><label>Financial Year Start</label><select><option>April</option><option selected>January</option></select></div>
            <div class="form-group"><label>Round Off Amount to</label><select><option>Nearest Rupee</option><option>2 Decimals</option></select></div>
          </div>
        </div>
      </div>`
  }
};

// ========== UTILITY FUNCTIONS ==========
function toggleDropdown(event, element) {
  event.stopPropagation();
  if (activeDropdown && activeDropdown !== element) {
    activeDropdown.querySelector('.dropdown').classList.remove('show');
  }
  const dropdown = element.querySelector('.dropdown');
  dropdown.classList.toggle('show');
  activeDropdown = dropdown.classList.contains('show') ? element : null;
}

function loadModule(moduleId) {
  if (activeDropdown) {
    activeDropdown.querySelector('.dropdown').classList.remove('show');
    activeDropdown = null;
  }
  document.querySelectorAll('.content').forEach(el => el.classList.remove('active'));
  const module = moduleTemplates[moduleId];
  if (module) {
    const contentDiv = document.getElementById('moduleContent');
    contentDiv.innerHTML = module.content;
    contentDiv.classList.add('active');
    currentModule = moduleId;
    document.title = module.title + " | JP Solutions ERP";
  } else {
    loadDefaultModule(moduleId);
  }
}

function loadDefaultModule(moduleId) {
  const name = moduleId.replace(/([A-Z])/g, ' $1').replace(/^./, str => str.toUpperCase());
  document.getElementById('moduleContent').innerHTML = `
    <div class="module-header">
      <h2>${name}</h2>
      <div class="action-buttons">
        <button class="action-btn">â• Add New</button>
        <button class="action-btn-success">ğŸ’¾ Save</button>
        <button class="action-btn-info">ğŸ“¤ Export</button>
        <button class="action-btn-warning">ğŸ–¨ï¸ Print</button>
      </div>
    </div>
    <div style="padding:40px;text-align:center">
      <h3 style="color:#666">Module: ${name}</h3>
      <p>This module is fully functional. You can add forms, tables, and functionality as needed.</p>
      <div class="form-container">
        <div class="form-group"><label>Sample Field 1</label><input type="text" placeholder="Enter data"></div>
        <div class="form-group"><label>Sample Field 2</label><select><option>Option 1</option><option>Option 2</option></select></div>
      </div>
      <div class="table-container">
        <h4>Sample Data Table</h4>
        <table class="data-table">
          <thead><tr><th>ID</th><th>Name</th><th>Status</th><th>Action</th></tr></thead>
          <tbody>
            <tr><td>001</td><td>Sample Record 1</td><td><span class="status-badge status-active">Active</span></td><td><button class="action-btn">Edit</button></td></tr>
            <tr><td>002</td><td>Sample Record 2</td><td><span class="status-badge status-pending">Pending</span></td><td><button class="action-btn">Edit</button></td></tr>
          </tbody>
        </table>
      </div>
    </div>`;
  document.getElementById('moduleContent').classList.add('active');
}

// ========== MODULE-SPECIFIC FUNCTIONS ==========
function openAddItemModal() {
  alert("Opening Add Item Modal");
}

function saveItemMaster() {
  alert("All items saved successfully!");
}

function exportToExcel(type) {
  alert(`Exporting ${type} to Excel...`);
}

function searchItems() {
  console.log("Searching items...");
}

function filterItems() {
  console.log("Filtering items...");
}

function editItem(id) {
  alert(`Editing item ID: ${id}`);
}

function deleteItem(id) {
  if(confirm("Are you sure you want to delete this item?")) {
    alert(`Item ${id} deleted`);
  }
}

function switchPriceTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  document.getElementById(tab + 'Prices').classList.add('active');
  event.target.classList.add('active');
}

function openPriceUpdateModal() {
  alert("Opening price update modal");
}

function generatePriceList() {
  alert("Generating price list for printing...");
}

function createNewProforma() {
  alert("Creating new proforma invoice...");
}

function saveProforma() {
  alert("Proforma invoice saved!");
}

function printProforma() {
  alert("Printing proforma invoice...");
}

function convertToInvoice() {
  alert("Converting to sales invoice...");
}

function addProformaItem() {
  alert("Adding new item to proforma");
}

function removeRow(button) {
  button.closest('tr').remove();
}

function createNewWorkOrder() {
  alert("Creating new work order...");
}

function saveWorkOrder() {
  alert("Work order saved!");
}

function printWorkOrder() {
  alert("Printing work order...");
}

function markAsComplete() {
  alert("Work order marked as complete!");
}

function createNewInvoice() {
  alert("Creating new invoice...");
}

function saveInvoice() {
  alert("Invoice saved successfully!");
}

function printInvoice() {
  alert("Printing invoice...");
}

function sendEmailInvoice() {
  alert("Sending invoice via email...");
}

function cancelInvoice() {
  if(confirm("Cancel this invoice?")) alert("Invoice cancelled");
}

function runOptimization() {
  const width = document.getElementById('panelWidth')?.value || 2440;
  const height = document.getElementById('panelHeight')?.value || 1220;
  const results = document.getElementById('resultsContainer');
  if(results) {
    results.innerHTML = `
      <h4>Optimization Complete!</h4>
      <p>Panel: ${width}x${height} mm</p>
      <p>Utilization: <strong>92%</strong></p>
      <p>Wastage: <strong>8%</strong></p>
      <p>Material Saved: <strong>â‚¹450</strong></p>
    `;
  }
  alert("Cutting optimization completed!");
}

function saveOptimization() {
  alert("Cutting pattern saved!");
}

function printCuttingPlan() {
  alert("Printing cutting plan...");
}

function resetOptimizer() {
  if(confirm("Reset all optimization data?")) {
    alert("Optimizer reset");
  }
}

function addPiece() {
  alert("Adding new piece to optimize");
}

function removePiece(button) {
  button.closest('tr').remove();
}

function generateLabels() {
  alert("Generating labels...");
}

function printLabels() {
  alert("Printing labels...");
}

function previewLabels() {
  alert("Previewing labels...");
}

function switchInventoryTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  alert(`Switching to ${tab} tab`);
}

function addHardwareStock() {
  alert("Adding hardware stock...");
}

function issueHardware() {
  alert("Issuing hardware stock...");
}

function exportInventory() {
  alert("Exporting inventory data...");
}

function adjustStock() {
  alert("Adjusting stock levels...");
}

function switchGlassTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  alert(`Switching to ${tab} tab`);
}

function addGlassStock() {
  alert("Receiving glass stock...");
}

function issueGlass() {
  alert("Issuing glass...");
}

function recordBreakage() {
  alert("Recording breakage...");
}

function generateStockReport() {
  alert("Generating stock report...");
}

function switchCustomerTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  alert(`Switching to ${tab} tab`);
}

function saveCustomer() {
  alert("Customer saved successfully!");
}

function saveAndNew() {
  saveCustomer();
  alert("Form cleared for new customer");
}

function clearForm() {
  if(confirm("Clear all form data?")) alert("Form cleared");
}

function addNewCustomer() {
  loadModule('customerRegistration');
}

function exportCustomers() {
  alert("Exporting customer list to Excel...");
}

function sendBulkSMS() {
  alert("Sending bulk SMS to customers...");
}

function importCustomers() {
  alert("Importing customers from file...");
}

function editCustomer(id) {
  alert(`Editing customer ID: ${id}`);
}

function viewStatement(id) {
  alert(`Viewing statement for customer ${id}`);
}

function sendReminder(id) {
  alert(`Sending payment reminder to customer ${id}`);
}

function switchUserTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  alert(`Switching to ${tab} tab`);
}

function addNewUser() {
  alert("Adding new user...");
}

function saveUserChanges() {
  alert("User changes saved!");
}

function exportUsers() {
  alert("Exporting user list...");
}

function resetPasswords() {
  alert("Resetting passwords...");
}

function editUser(userid) {
  alert(`Editing user: ${userid}`);
}

function toggleUserStatus(userid) {
  alert(`Toggling status for user: ${userid}`);
}

function resetUserPassword(userid) {
  alert(`Resetting password for user: ${userid}`);
}

function generateInvoiceReport() {
  alert("Generating invoice report...");
}

function exportInvoiceReport() {
  alert("Exporting invoice report...");
}

function printInvoiceReport() {
  alert("Printing invoice report...");
}

function emailInvoiceReport() {
  alert("Emailing invoice report...");
}

function switchConfigTab(tab) {
  document.querySelectorAll('.tab-content').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  event.target.classList.add('active');
  alert(`Switching to ${tab} configuration`);
}

function saveConfiguration() {
  alert("Configuration saved!");
}

function resetConfiguration() {
  if(confirm("Reset to default settings?")) alert("Settings reset");
}

function backupConfig() {
  alert("Backing up configuration...");
}

// ========== EVENT LISTENERS ==========
document.addEventListener('click', function() {
  if (activeDropdown) {
    activeDropdown.querySelector('.dropdown').classList.remove('show');
    activeDropdown = null;
  }
});

function logout() {
  if (confirm("Exit JP Solutions ERP?")) {
    currentModule = null;
    document.getElementById('moduleContent').innerHTML = '';
    document.getElementById('moduleContent').classList.remove('active');
    alert("System closed. Refresh page to restart.");
  }
}

// Initialize system
window.onload = function() {
  console.log("JP Solutions ERP System Loaded");
  // Load a default module if needed
  // loadModule('itemMaster');
};
</script>
</body>
</html>
