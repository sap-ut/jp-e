<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Proforma Invoice</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    margin:0;
    padding:10px;
}
h3{margin:6px 0}
.container{
    background:#fff;
    padding:10px;
    border-radius:6px;
}
.flex{
    display:flex;
    gap:10px;
    flex-wrap:wrap;
}
.box{
    border:1px solid #ccc;
    padding:8px;
    border-radius:4px;
}
.box label{
    font-size:12px;
}
input, select{
    width:100%;
    padding:4px;
    font-size:13px;
}
.small{width:70px}
.wastage label{
    display:flex;
    align-items:center;
    gap:5px;
    font-size:13px;
    margin-bottom:4px;
}
.table-wrap{
    overflow-x:auto;
    margin-top:10px;
}
table{
    border-collapse:collapse;
    min-width:1200px;
}
th, td{
    border:1px solid #bbb;
    padding:4px;
    text-align:center;
    font-size:12px;
}
th{
    background:#e9ecef;
}
.bg-actual{background:#eef7ff}
.bg-charge{background:#d9f2ff}
.bg-rate{background:#d9ffe8}
.right-box{
    flex:1;
    min-width:300px;
}
.left-box{
    flex:1;
    min-width:300px;
}
</style>
</head>

<body>
<div class="container">

<h3>New Proforma</h3>

<div class="flex">
    <!-- LEFT -->
    <div class="left-box box">
        <div class="flex">
            <div>
                <label>Date</label>
                <input type="date" id="pidate">
            </div>
            <div>
                <label>PI No</label>
                <input value="PI-4570">
            </div>
            <div>
                <label>UOM</label>
                <select>
                    <option>Sq.Mt</option>
                    <option>Sq.Ft</option>
                </select>
            </div>
        </div>

        <h4>Wastage Mode</h4>
        <div class="wastage">
            <label>
                <input type="checkbox" id="mmCheck"> +MM
                L1 <input class="small" id="l1" value="0">
                L2 <input class="small" id="l2" value="0">
            </label>
            <label>
                <input type="checkbox" id="evenIn"> Even IN
            </label>
            <label>
                <input type="checkbox" id="evenCm"> Even CM
            </label>
        </div>
    </div>

    <!-- RIGHT -->
    <div class="right-box box">
        <h4>Bill To</h4>
        <input placeholder="Name">
        <input placeholder="Address">
        <div class="flex">
            <input placeholder="City">
            <input placeholder="State">
        </div>

        <h4>Ship To</h4>
        <input placeholder="Name">
        <input placeholder="Address">
        <div class="flex">
            <input placeholder="City">
            <input placeholder="State">
        </div>
    </div>
</div>

<div class="table-wrap">
<table>
<thead>
<tr>
    <th>Type</th>
    <th>Item Desc</th>
    <th colspan="2">Actual (IN)</th>
    <th colspan="2">Chargeable (IN)</th>
    <th>Qty</th>
    <th>Sq.Mt</th>
    <th>Rate</th>
    <th>Amount</th>
</tr>
<tr>
    <th></th>
    <th></th>
    <th class="bg-actual">W</th>
    <th class="bg-actual">H</th>
    <th class="bg-charge">W</th>
    <th class="bg-charge">H</th>
    <th></th>
    <th></th>
    <th class="bg-rate"></th>
    <th></th>
</tr>
</thead>
<tbody>
<tr>
    <td>T-DRW</td>
    <td>10MM CLEAR TOUGHENED</td>
    <td><input value="100" oninput="calcRow(this)"></td>
    <td><input value="32" oninput="calcRow(this)"></td>
    <td><input readonly></td>
    <td><input readonly></td>
    <td><input value="1" oninput="calcRow(this)"></td>
    <td></td>
    <td><input value="1270"></td>
    <td></td>
</tr>
</tbody>
</table>
</div>

</div>

<script>
function roundEven(val){
    return Math.ceil(val / 2) * 2;
}

function calcRow(el){
    let row = el.closest("tr");
    let aw = parseFloat(row.cells[2].children[0].value)||0;
    let ah = parseFloat(row.cells[3].children[0].value)||0;

    let cw = aw;
    let ch = ah;

    if(document.getElementById("mmCheck").checked){
        cw += parseFloat(l1.value)||0;
        ch += parseFloat(l2.value)||0;
    }

    if(document.getElementById("evenIn").checked){
        cw = roundEven(cw);
        ch = roundEven(ch);
    }

    if(document.getElementById("evenCm").checked){
        cw = roundEven(cw * 2.54) / 2.54;
        ch = roundEven(ch * 2.54) / 2.54;
    }

    row.cells[4].children[0].value = cw.toFixed(2);
    row.cells[5].children[0].value = ch.toFixed(2);

    let qty = parseFloat(row.cells[6].children[0].value)||0;
    let sqm = ((cw * ch) / 1550) * qty;
    row.cells[7].innerText = sqm.toFixed(3);

    let rate = parseFloat(row.cells[8].children[0].value)||0;
    row.cells[9].innerText = (sqm * rate).toFixed(2);
}

document.getElementById("pidate").valueAsDate = new Date();
</script>

</body>
</html>
