<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Glass Proforma Invoice</title>
<style>
body{font-family:Arial;background:#f4f6f8;margin:0;padding:10px}
.container{max-width:1100px;margin:auto;background:#fff;padding:15px;border-radius:8px}
h2{margin:0 0 10px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ddd;padding:6px;text-align:center;font-size:14px}
th{background:#0d6efd;color:#fff}
input,select{width:100%;padding:4px}
.total-box{text-align:right;margin-top:10px;font-size:16px}
button{padding:6px 12px;margin:5px;border:none;border-radius:4px;cursor:pointer}
.add{background:#198754;color:#fff}
</style>
</head>

<body>
<div class="container">
<h2>Proforma Invoice (Smart Glazier Style)</h2>

<table id="table">
<thead>
<tr>
<th>Glass Type</th>
<th>Unit</th>
<th>Width</th>
<th>Height</th>
<th>Qty</th>
<th>Rate / SQM</th>
<th>SQM</th>
<th>Amount</th>
<th>X</th>
</tr>
</thead>
<tbody>
<tr>
<td><input value="Toughened Glass"></td>
<td>
<select onchange="calc()">
<option value="mm">mm</option>
<option value="inch">inch</option>
</select>
</td>
<td><input type="number" value="1000" oninput="calc()"></td>
<td><input type="number" value="2000" oninput="calc()"></td>
<td><input type="number" value="1" oninput="calc()"></td>
<td><input type="number" value="150" oninput="calc()"></td>
<td class="sqm">0</td>
<td class="amt">0</td>
<td><button onclick="delRow(this)">❌</button></td>
</tr>
</tbody>
</table>

<button class="add" onclick="addRow()">+ Add Row</button>

<div class="total-box">
<p>Subtotal: ₹ <span id="sub">0</span></p>
<p>GST 18%: ₹ <span id="gst">0</span></p>
<p><b>Grand Total: ₹ <span id="grand">0</span></b></p>
</div>
</div>

<script>
function calc(){
let rows=document.querySelectorAll("#table tbody tr");
let subtotal=0;

rows.forEach(r=>{
let unit=r.cells[1].children[0].value;
let w=parseFloat(r.cells[2].children[0].value)||0;
let h=parseFloat(r.cells[3].children[0].value)||0;
let q=parseFloat(r.cells[4].children[0].value)||0;
let rate=parseFloat(r.cells[5].children[0].value)||0;

if(unit==="inch"){ w*=25.4; h*=25.4; }

let sqm=(w*h*q)/1000000;
let amt=sqm*rate;

r.querySelector(".sqm").innerText=sqm.toFixed(3);
r.querySelector(".amt").innerText=amt.toFixed(2);

subtotal+=amt;
});

let gst=subtotal*0.18;
document.getElementById("sub").innerText=subtotal.toFixed(2);
document.getElementById("gst").innerText=gst.toFixed(2);
document.getElementById("grand").innerText=(subtotal+gst).toFixed(2);
}

function addRow(){
let tr=document.querySelector("#table tbody tr").cloneNode(true);
tr.querySelectorAll("input").forEach(i=>i.value="");
document.querySelector("#table tbody").appendChild(tr);
}

function delRow(btn){
btn.parentElement.parentElement.remove();
calc();
}

calc();
</script>
</body>
</html>
