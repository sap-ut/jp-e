<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JP Solutions ERP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --blue:#0d6efd;
  --light:#e9f2ff;
  --dropdown-bg:#fff;
  --dropdown-hover:#f0f4ff;
  --sidebar-bg:#1a2b4c;
  --sidebar-width:260px;
  --success:#28a745;
  --warning:#ffc107;
  --danger:#dc3545;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{margin:0;background:#f4f8ff;color:#333;overflow:hidden}

/* APP - DIRECT SHOW (NO LOGIN) */
#app{
  height:100vh;
  overflow:hidden;
}

/* DASHBOARD */
.dashboard-container{
  padding:20px;
  height:calc(100vh - 60px);
  overflow-y:auto;
}
.dashboard-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:20px;
  margin-bottom:30px;
}
.dashboard-card{
  background:white;
  border-radius:12px;
  padding:25px;
  box-shadow:0 5px 15px rgba(0,0,0,0.05);
  border-left:5px solid var(--blue);
}
.dashboard-card h3{
  margin-top:0;
  color:#1a2b4c;
  font-size:1.3rem;
}
.dashboard-card p{
  color:#666;
  margin-bottom:15px;
}
.dashboard-stats{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:15px;
}
.stat-box{
  background:white;
  padding:20px;
  border-radius:10px;
  text-align:center;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.stat-value{
  font-size:2.5rem;
  font-weight:bold;
  color:var(--blue);
  margin-bottom:5px;
}
.stat-label{
  color:#666;
  font-size:0.9rem;
}
.quick-actions{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}
.quick-action-btn{
  padding:12px 20px;
  background:#f8f9fa;
  border:none;
  border-radius:8px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:500;
  transition:background 0.3s, transform 0.2s;
}
.quick-action-btn:hover{
  background:#e9ecef;
  transform:translateY(-2px);
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  z-index:1000;
  background:var(--blue);
  display:flex;
  align-items:center;
  overflow-x:auto;
  padding:10px 20px;
  color:#fff;
  white-space:nowrap;
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.4) transparent;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.navbar::-webkit-scrollbar { height: 6px; }
.navbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.4); border-radius: 3px; }

.brand{
  font-weight:700;
  margin-right:30px;
  flex-shrink:0;
  font-size:1.5rem;
  display:flex;
  align-items:center;
  gap:10px;
}
.brand-icon{
  font-size:1.8rem;
}
.menu{
  display:flex;
  gap:20px;
  flex-shrink:0;
}
.menu-item{
  position:relative;
  cursor:pointer;
  flex-shrink:0;
}
.menu-item span{
  padding:8px 16px;
  display:flex;
  align-items:center;
  gap:8px;
  transition: background 0.3s;
  border-radius:8px;
  font-weight:600;
}
.menu-item span:hover{
  background: rgba(255,255,255,0.2);
}
.menu-item span::after{
  content:'â–¼';
  font-size:0.7rem;
  margin-left:5px;
}
.logout-btn{
  background:rgba(255,255,255,0.2);
  padding:8px 16px;
  border-radius:8px;
  cursor:pointer;
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:8px;
  font-weight:600;
}
.logout-btn:hover{
  background:rgba(255,255,255,0.3);
}

/* DROPDOWN - Improved positioning */
.dropdown{
  display:none;
  position:fixed;
  background:var(--dropdown-bg);
  color:#000;
  border-radius:8px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
  z-index:9999;
  padding:8px 0;
  min-width:250px;
  max-height:500px;
  overflow-y:auto;
  transform: scaleY(0);
  transform-origin: top;
  transition: transform 0.25s ease, opacity 0.25s ease;
  opacity:0;
  border:1px solid #e0e0e0;
}
.dropdown.show{
  display:block;
  transform: scaleY(1);
  opacity:1;
}
.dropdown div{
  padding:12px 20px;
  cursor:pointer;
  white-space:nowrap;
  transition: background 0.2s;
  border-bottom:1px solid #f5f5f5;
  display:flex;
  align-items:center;
  gap:10px;
}
.dropdown div:hover{
  background: var(--dropdown-hover);
}
.dropdown div:last-child{
  border-bottom:none;
}

/* CONTENT */
.content{
  padding:0;
  position:relative;
  z-index:1;
  background:#fff;
  min-height:calc(100vh - 60px);
  border-radius:0;
  margin:0;
  box-shadow:none;
  overflow-y:auto;
  max-height:calc(100vh - 60px);
  display:none;
}
.content.active{
  display:block;
}

/* MODULE HEADER */
.module-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:2px solid #f0f0f0;
  padding:20px;
  margin-bottom:0;
  background:white;
  position:sticky;
  top:0;
  z-index:100;
}
.module-header h2{
  margin:0;
  color:#1a2b4c;
  font-size:1.8rem;
  display:flex;
  align-items:center;
  gap:10px;
}
.action-buttons{
  display:flex;
  gap:10px;
}
.action-btn{
  padding:10px 20px;
  background:var(--blue);
  color:white;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:background 0.3s, transform 0.2s;
  display:flex;
  align-items:center;
  gap:8px;
}
.action-btn:hover{
  background:#0b5ed7;
  transform:translateY(-2px);
}
.action-btn-success{
  background:var(--success);
}
.action-btn-success:hover{
  background:#218838;
}
.action-btn-warning{
  background:var(--warning);
  color:#000;
}
.action-btn-warning:hover{
  background:#e0a800;
}

/* FORM STYLES */
.form-container{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:25px;
  margin:20px;
  padding:20px;
  background:#f8f9fa;
  border-radius:12px;
}
.form-group{
  margin-bottom:20px;
}
.form-group label{
  display:block;
  margin-bottom:8px;
  font-weight:600;
  color:#444;
}
.form-group input,
.form-group select,
.form-group textarea{
  width:100%;
  padding:12px 15px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
  transition:all 0.3s;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus{
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(13,110,253,0.1);
}

/* TABLE STYLES */
.table-container{
  margin:20px;
  padding:20px;
  background:white;
  border-radius:12px;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.data-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin-top:20px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 3px 15px rgba(0,0,0,0.05);
}
.data-table th{
  background:#f8f9fa;
  padding:15px 20px;
  text-align:left;
  font-weight:600;
  color:#333;
  border-bottom:2px solid #e9ecef;
}
.data-table td{
  padding:15px 20px;
  border-bottom:1px solid #e9ecef;
  color:#555;
}
.data-table tr:hover{
  background:#f8f9fa;
}
.data-table tr:last-child td{
  border-bottom:none;
}

/* STATUS INDICATORS */
.status-badge{
  padding:6px 12px;
  border-radius:20px;
  font-size:12px;
  font-weight:600;
  display:inline-block;
}
.status-active{
  background:#d1e7dd;
  color:#0f5132;
}
.status-inactive{
  background:#f8d7da;
  color:#842029;
}
.status-pending{
  background:#fff3cd;
  color:#856404;
}

/* MODULE SPECIFIC */
.optimizer-grid{
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:25px;
  margin:20px;
}
.optimizer-card{
  background:#f8f9fa;
  padding:25px;
  border-radius:12px;
  border:2px solid #e9ecef;
  transition:transform 0.3s, box-shadow 0.3s;
}
.optimizer-card:hover{
  transform:translateY(-5px);
  box-shadow:0 10px 20px rgba(0,0,0,0.1);
}
.config-card{
  background:#fff;
  padding:25px;
  border-radius:12px;
  border:1px solid #ddd;
  margin-bottom:20px;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.report-controls{
  display:flex;
  gap:15px;
  margin-bottom:25px;
  flex-wrap:wrap;
  padding:20px;
}
.tab-container{
  display:flex;
  border-bottom:2px solid #ddd;
  margin-bottom:20px;
  padding:0 20px;
}
.tab{
  padding:12px 25px;
  cursor:pointer;
  border-bottom:4px solid transparent;
  font-weight:600;
  color:#666;
  transition:all 0.3s;
}
.tab:hover{
  color:var(--blue);
}
.tab.active{
  border-bottom-color:var(--blue);
  color:var(--blue);
}
.tab-content{
  display:none;
  padding:20px;
}
.tab-content.active{
  display:block;
}

/* RESPONSIVE */
@media (max-width: 1024px){
  .optimizer-grid{
    grid-template-columns:repeat(2, 1fr);
  }
}
@media (max-width: 768px){
  .form-container{
    grid-template-columns:1fr;
    margin:10px;
    padding:15px;
  }
  .optimizer-grid{
    grid-template-columns:1fr;
    margin:10px;
  }
  .menu{
    gap:10px;
  }
  .menu-item span{
    padding:6px 12px;
    font-size:14px;
  }
  .dashboard-grid{
    grid-template-columns:1fr;
  }
  .dashboard-stats{
    grid-template-columns:repeat(2, 1fr);
  }
  .module-header{
    flex-direction:column;
    gap:15px;
    align-items:flex-start;
  }
  .action-buttons{
    width:100%;
    justify-content:center;
  }
  .tab-container{
    overflow-x:auto;
    flex-wrap:nowrap;
  }
  .tab{
    white-space:nowrap;
  }
}
@media (max-width: 480px){
  .dashboard-stats{
    grid-template-columns:1fr;
  }
}
</style>
</head>
<body>

<!-- APP - DIRECT START, NO LOGIN -->
<div id="app">
  <div class="navbar">
    <div class="brand">
      <span class="brand-icon">ğŸ¢</span>
      <span>JP Solutions ERP</span>
    </div>
    <div class="menu">
      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ§± Masters</span>
        <div class="dropdown">
          <div onclick="loadModule('itemMaster')">ğŸ“¦ Item Master</div>
          <div onclick="loadModule('priceMaster')">ğŸ’° Price Master</div>
          <div onclick="loadModule('processMaster')">âš™ï¸ Process Master</div>
          <div onclick="loadModule('cuttingRule')">âœ‚ï¸ Cutting Rule (Z Rule)</div>
          <div onclick="loadModule('glassSize')">ğŸ“ Glass Size Master</div>
          <div onclick="loadModule('glassType')">ğŸ” Glass Type Master</div>
          <div onclick="loadModule('routeMaster')">ğŸ—ºï¸ Route Master</div>
          <div onclick="loadModule('paymentTerms')">ğŸ’³ Payment Terms Master</div>
          <div onclick="loadModule('filmType')">ğŸï¸ Film Type</div>
          <div onclick="loadModule('bankMaster')">ğŸ¦ Bank Master</div>
          <div onclick="loadModule('vehicleMaster')">ğŸšš Vehicle Master</div>
          <div onclick="loadModule('additionalCharges')">â• Additional Charges Master</div>
          <div onclick="loadModule('remarksMaster')">ğŸ“ Remarks Master</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ” Transactions</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaInvoice')">ğŸ“„ Proforma Invoice</div>
          <div onclick="loadModule('workOrder')">ğŸ“‹ Work Order</div>
          <div onclick="loadModule('salesInvoice')">ğŸ§¾ Sales Invoice</div>
          <div onclick="loadModule('cuttingOptimizer')">âœ‚ï¸ Cutting Optimizer</div>
          <div onclick="loadModule('labelGeneration')">ğŸ·ï¸ Label / Sticker Generation</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ“¦ Inventory / Stock</span>
        <div class="dropdown">
          <div onclick="loadModule('hardwareInventory')">ğŸ”© Hardware Inventory</div>
          <div onclick="loadModule('glassInventory')">ğŸ” Glass Inventory</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>âš™ï¸ System Settings</span>
        <div class="dropdown">
          <div onclick="loadModule('defaultConfig')">âš™ï¸ Default Configuration</div>
          <div onclick="loadModule('fileStorage')">ğŸ’¾ File Storage Configuration</div>
          <div onclick="loadModule('networkConfig')">ğŸŒ Network Configuration</div>
          <div onclick="loadModule('dataBackup')">ğŸ’¿ Data Backup & Restore</div>
          <div onclick="loadModule('smsEmail')">ğŸ“§ SMS / Email Configuration</div>
          <div onclick="loadModule('billingConfig')">ğŸ’° Billing Configuration</div>
          <div onclick="loadModule('printConfig')">ğŸ–¨ï¸ Print Configuration</div>
          <div onclick="loadModule('userAccess')">ğŸ‘¤ User Access Control</div>
          <div onclick="loadModule('softwareUpdate')">ğŸ”„ Software Update</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ‘¥ Customer Management</span>
        <div class="dropdown">
          <div onclick="loadModule('customerRegistration')">ğŸ“ Customer Registration</div>
          <div onclick="loadModule('customerList')">ğŸ“‹ Customer List / Customer Master</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ§‘â€ğŸ’¼ Sales Management</span>
        <div class="dropdown">
          <div onclick="loadModule('salespersonRegistration')">ğŸ“ Salesperson Registration</div>
          <div onclick="loadModule('salespersonList')">ğŸ“‹ Salesperson List</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ“Š Reports</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaReport')">ğŸ“„ Proforma Report</div>
          <div onclick="loadModule('invoiceReport')">ğŸ§¾ Invoice Report</div>
          <div onclick="loadModule('salesPerformance')">ğŸ“ˆ Salesperson Performance Report</div>
          <div onclick="loadModule('productionReport')">ğŸ­ Production Report</div>
          <div onclick="loadModule('workOrderReport')">ğŸ“‹ Work Order Report</div>
          <div onclick="loadModule('glassInventoryReport')">ğŸ” Glass Inventory Report</div>
          <div onclick="loadModule('breakageReport')">ğŸ’” Breakage Report</div>
          <div onclick="loadModule('rejectionReport')">âŒ Rejection Report</div>
          <div onclick="loadModule('pendingBilling')">â³ Pending Billing Report</div>
          <div onclick="loadModule('billedArea')">ğŸ“ Billed Area Report (Sq.Mtr)</div>
          <div onclick="loadModule('tallyExport')">ğŸ“¤ Tally Export Report</div>
          <div onclick="loadModule('directInvoice')">ğŸ§¾ Direct Invoice Report</div>
          <div onclick="loadModule('creditNote')">ğŸ“ Credit Note Report</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ‘¤ User Management</span>
        <div class="dropdown">
          <div onclick="loadModule('userManagement')">ğŸ‘¥ User Management</div>
        </div>
      </div>
      
      <div class="logout-btn" onclick="logout()">
        <span>ğŸšª Exit</span>
      </div>
    </div>
  </div>

  <!-- DASHBOARD (Default Content) -->
  <div id="dashboardContent" class="dashboard-container active">
    <div style="margin-bottom:30px">
      <h1 style="color:#1a2b4c;font-size:2.2rem">Dashboard</h1>
      <p style="color:#666">Welcome to JP Solutions ERP System</p>
    </div>
    
    <div class="dashboard-stats">
      <div class="stat-box">
        <div class="stat-value">â‚¹85,420</div>
        <div class="stat-label">Today's Revenue</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">42</div>
        <div class="stat-label">Pending Orders</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">8</div>
        <div class="stat-label">Production Jobs</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">92%</div>
        <div class="stat-label">Stock Availability</div>
      </div>
    </div>
    
    <div class="dashboard-grid">
      <div class="dashboard-card">
        <h3>ğŸ“ˆ Quick Overview</h3>
        <p>Get a quick snapshot of your business performance</p>
        <div class="quick-actions">
          <button class="quick-action-btn" onclick="loadModule('salesInvoice')">
            <span>ğŸ§¾</span> Create Invoice
          </button>
          <button class="quick-action-btn" onclick="loadModule('workOrder')">
            <span>ğŸ“‹</span> New Work Order
          </button>
          <button class="quick-action-btn" onclick="loadModule('proformaInvoice')">
            <span>ğŸ“„</span> Proforma Invoice
          </button>
        </div>
      </div>
      
      <div class="dashboard-card">
        <h3>ğŸ”” Recent Activity</h3>
        <ul style="padding-left:20px;color:#555">
          <li>New order from ABC Construction (â‚¹25,000)</li>
          <li>Production of Order #WO-234 completed</li>
          <li>Glass inventory updated - 6mm stock low</li>
          <li>3 invoices pending for payment</li>
        </ul>
      </div>
      
      <div class="dashboard-card">
        <h3>âš¡ Quick Links</h3>
        <div class="quick-actions">
          <button class="quick-action-btn" onclick="loadModule('customerRegistration')">
            <span>ğŸ‘¥</span> Add Customer
          </button>
          <button class="quick-action-btn" onclick="loadModule('itemMaster')">
            <span>ğŸ“¦</span> Add Item
          </button>
          <button class="quick-action-btn" onclick="loadModule('glassInventory')">
            <span>ğŸ”</span> Check Stock
          </button>
          <button class="quick-action-btn" onclick="loadModule('cuttingOptimizer')">
            <span>âœ‚ï¸</span> Optimize Cutting
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODULE CONTENT -->
  <div class="content" id="moduleContent">
    <!-- Module content loads here -->
  </div>
</div>

<script>
// Global Data Storage
const appData = {
  currentUser: null,
  customers: [
    { id: 'CUST-001', name: 'ABC Construction', category: 'Retail', mobile: '9876543210' },
    { id: 'CUST-002', name: 'XYZ Developers', category: 'Wholesale', mobile: '9876543211' },
    { id: 'CUST-003', name: 'Modern Interiors', category: 'Contractor', mobile: '9876543212' }
  ],
  items: [
    { code: 'ITM-001', name: 'Glass Panel 6mm', category: 'Glass', unit: 'Sq. Ft', hsn: '70071990', status: 'Active' },
    { code: 'ITM-002', name: 'Aluminum Frame', category: 'Hardware', unit: 'Piece', hsn: '76101090', status: 'Active' },
    { code: 'ITM-003', name: 'Window Handle', category: 'Accessories', unit: 'Piece', hsn: '83024100', status: 'Active' }
  ],
  priceMaster: [
    { id: 1, customerId: 'CUST-001', itemCode: 'ITM-001', basePrice: 100, tax: 18, effectiveDate: '2024-01-01' },
    { id: 2, customerId: 'CUST-002', itemCode: 'ITM-001', basePrice: 95, tax: 18, effectiveDate: '2024-01-01' },
    { id: 3, customerId: 'CUST-003', itemCode: 'ITM-001', basePrice: 90, tax: 18, effectiveDate: '2024-01-01' }
  ]
};

// Initialize application
window.onload = function() {
  // Show dashboard by default
  showDashboard();
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', function(event) {
    if (!event.target.closest('.menu-item')) {
      document.querySelectorAll('.dropdown').forEach(d => {
        d.classList.remove('show');
      });
    }
  });
};

// Toggle dropdown with proper positioning
function toggleDropdown(event, el) {
  event.stopPropagation();
  
  const dropdown = el.querySelector('.dropdown');
  const rect = el.getBoundingClientRect();
  
  // Calculate position
  dropdown.style.top = (rect.bottom + 5) + "px";
  dropdown.style.left = (rect.left) + "px";
  
  // Hide all other dropdowns
  document.querySelectorAll('.dropdown').forEach(d => {
    if (d !== dropdown) d.classList.remove('show');
  });
  
  // Toggle current dropdown
  dropdown.classList.toggle('show');
}

// Show dashboard (default view)
function showDashboard() {
  document.getElementById('dashboardContent').classList.add('active');
  document.getElementById('moduleContent').classList.remove('active');
}

// Module loading function
function loadModule(moduleName) {
  // Hide dashboard, show module content
  document.getElementById('dashboardContent').classList.remove('active');
  document.getElementById('moduleContent').classList.add('active');
  
  // Close any open dropdowns
  document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('show'));
  
  let moduleContent = '';
  let moduleTitle = '';
  let moduleIcon = '';
  
  switch(moduleName) {
    // Masters modules
    case 'itemMaster':
      moduleTitle = 'Item Master';
      moduleIcon = 'ğŸ“¦';
      moduleContent = generateItemMaster();
      break;
    case 'priceMaster':
      moduleTitle = 'Price Master';
      moduleIcon = 'ğŸ’°';
      moduleContent = generatePriceMaster();
      break;
    case 'processMaster':
      moduleTitle = 'Process Master';
      moduleIcon = 'âš™ï¸';
      moduleContent = generateProcessMaster();
      break;
    case 'cuttingRule':
      moduleTitle = 'Cutting Rule (Z Rule)';
      moduleIcon = 'âœ‚ï¸';
      moduleContent = generateCuttingRule();
      break;
    case 'glassSize':
      moduleTitle = 'Glass Size Master';
      moduleIcon = 'ğŸ“';
      moduleContent = generateGlassSize();
      break;
    case 'glassType':
      moduleTitle = 'Glass Type Master';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassType();
      break;
    case 'routeMaster':
      moduleTitle = 'Route Master';
      moduleIcon = 'ğŸ—ºï¸';
      moduleContent = generateRouteMaster();
      break;
    case 'paymentTerms':
      moduleTitle = 'Payment Terms Master';
      moduleIcon = 'ğŸ’³';
      moduleContent = generatePaymentTerms();
      break;
    case 'filmType':
      moduleTitle = 'Film Type Master';
      moduleIcon = 'ğŸï¸';
      moduleContent = generateFilmType();
      break;
    case 'bankMaster':
      moduleTitle = 'Bank Master';
      moduleIcon = 'ğŸ¦';
      moduleContent = generateBankMaster();
      break;
    case 'vehicleMaster':
      moduleTitle = 'Vehicle Master';
      moduleIcon = 'ğŸšš';
      moduleContent = generateVehicleMaster();
      break;
    case 'additionalCharges':
      moduleTitle = 'Additional Charges Master';
      moduleIcon = 'â•';
      moduleContent = generateAdditionalCharges();
      break;
    case 'remarksMaster':
      moduleTitle = 'Remarks Master';
      moduleIcon = 'ğŸ“';
      moduleContent = generateRemarksMaster();
      break;
      
    // Transactions modules
    case 'proformaInvoice':
      moduleTitle = 'Proforma Invoice';
      moduleIcon = 'ğŸ“„';
      moduleContent = generateProformaInvoice();
      break;
    case 'workOrder':
      moduleTitle = 'Work Order';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateWorkOrder();
      break;
    case 'salesInvoice':
      moduleTitle = 'Sales Invoice';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateSalesInvoice();
      break;
    case 'cuttingOptimizer':
      moduleTitle = 'Cutting Optimizer';
      moduleIcon = 'âœ‚ï¸';
      moduleContent = generateCuttingOptimizer();
      break;
    case 'labelGeneration':
      moduleTitle = 'Label / Sticker Generation';
      moduleIcon = 'ğŸ·ï¸';
      moduleContent = generateLabelGeneration();
      break;
      
    // Inventory modules
    case 'hardwareInventory':
      moduleTitle = 'Hardware Inventory';
      moduleIcon = 'ğŸ”©';
      moduleContent = generateHardwareInventory();
      break;
    case 'glassInventory':
      moduleTitle = 'Glass Inventory';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassInventory();
      break;
      
    // System Settings modules
    case 'defaultConfig':
      moduleTitle = 'Default Configuration';
      moduleIcon = 'âš™ï¸';
      moduleContent = generateDefaultConfig();
      break;
    case 'fileStorage':
      moduleTitle = 'File Storage Configuration';
      moduleIcon = 'ğŸ’¾';
      moduleContent = generateFileStorage();
      break;
    case 'networkConfig':
      moduleTitle = 'Network Configuration';
      moduleIcon = 'ğŸŒ';
      moduleContent = generateNetworkConfig();
      break;
    case 'dataBackup':
      moduleTitle = 'Data Backup & Restore';
      moduleIcon = 'ğŸ’¿';
      moduleContent = generateDataBackup();
      break;
    case 'smsEmail':
      moduleTitle = 'SMS / Email Configuration';
      moduleIcon = 'ğŸ“§';
      moduleContent = generateSmsEmail();
      break;
    case 'billingConfig':
      moduleTitle = 'Billing Configuration';
      moduleIcon = 'ğŸ’°';
      moduleContent = generateBillingConfig();
      break;
    case 'printConfig':
      moduleTitle = 'Print Configuration';
      moduleIcon = 'ğŸ–¨ï¸';
      moduleContent = generatePrintConfig();
      break;
    case 'userAccess':
      moduleTitle = 'User Access Control';
      moduleIcon = 'ğŸ‘¤';
      moduleContent = generateUserAccess();
      break;
    case 'softwareUpdate':
      moduleTitle = 'Software Update';
      moduleIcon = 'ğŸ”„';
      moduleContent = generateSoftwareUpdate();
      break;
      
    // Customer Management modules
    case 'customerRegistration':
      moduleTitle = 'Customer Registration';
      moduleIcon = 'ğŸ“';
      moduleContent = generateCustomerRegistration();
      break;
    case 'customerList':
      moduleTitle = 'Customer List';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateCustomerList();
      break;
      
    // Sales Management modules
    case 'salespersonRegistration':
      moduleTitle = 'Salesperson Registration';
      moduleIcon = 'ğŸ“';
      moduleContent = generateSalespersonRegistration();
      break;
    case 'salespersonList':
      moduleTitle = 'Salesperson List';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateSalespersonList();
      break;
      
    // Reports modules
    case 'proformaReport':
      moduleTitle = 'Proforma Report';
      moduleIcon = 'ğŸ“„';
      moduleContent = generateProformaReport();
      break;
    case 'invoiceReport':
      moduleTitle = 'Invoice Report';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateInvoiceReport();
      break;
    case 'salesPerformance':
      moduleTitle = 'Sales Performance Report';
      moduleIcon = 'ğŸ“ˆ';
      moduleContent = generateSalesPerformance();
      break;
    case 'productionReport':
      moduleTitle = 'Production Report';
      moduleIcon = 'ğŸ­';
      moduleContent = generateProductionReport();
      break;
    case 'workOrderReport':
      moduleTitle = 'Work Order Report';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateWorkOrderReport();
      break;
    case 'glassInventoryReport':
      moduleTitle = 'Glass Inventory Report';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassInventoryReport();
      break;
    case 'breakageReport':
      moduleTitle = 'Breakage Report';
      moduleIcon = 'ğŸ’”';
      moduleContent = generateBreakageReport();
      break;
    case 'rejectionReport':
      moduleTitle = 'Rejection Report';
      moduleIcon = 'âŒ';
      moduleContent = generateRejectionReport();
      break;
    case 'pendingBilling':
      moduleTitle = 'Pending Billing Report';
      moduleIcon = 'â³';
      moduleContent = generatePendingBilling();
      break;
    case 'billedArea':
      moduleTitle = 'Billed Area Report';
      moduleIcon = 'ğŸ“';
      moduleContent = generateBilledArea();
      break;
    case 'tallyExport':
      moduleTitle = 'Tally Export Report';
      moduleIcon = 'ğŸ“¤';
      moduleContent = generateTallyExport();
      break;
    case 'directInvoice':
      moduleTitle = 'Direct Invoice Report';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateDirectInvoice();
      break;
    case 'creditNote':
      moduleTitle = 'Credit Note Report';
      moduleIcon = 'ğŸ“';
      moduleContent = generateCreditNote();
      break;
      
    // User Management
    case 'userManagement':
      moduleTitle = 'User Management';
      moduleIcon = 'ğŸ‘¥';
      moduleContent = generateUserManagement();
      break;
  }
  
  // Update module content
  document.getElementById('moduleContent').innerHTML = `
    <div class="module-header">
      <h2>${moduleIcon} ${moduleTitle}</h2>
      <div class="action-buttons">
        <button class="action-btn" onclick="saveModule('${moduleName}')">
          <span>ğŸ’¾</span> Save
        </button>
        <button class="action-btn action-btn-warning" onclick="printModule('${moduleName}')">
          <span>ğŸ–¨ï¸</span> Print
        </button>
        <button class="action-btn action-btn-success" onclick="exportModule('${moduleName}')">
          <span>ğŸ“¤</span> Export
        </button>
        <button class="action-btn" onclick="showDashboard()" style="background:#6c757d">
          <span>ğŸ </span> Dashboard
        </button>
      </div>
    </div>
    ${moduleContent}
  `;
  
  // Scroll to top
  window.scrollTo(0, 0);
}

// Logout function
function logout() {
  if(confirm('Are you sure you want to exit the system?')) {
    // Just refresh the page
    location.reload();
  }
}

// ==================== MODULE GENERATION FUNCTIONS ====================

// ITEM MASTER
function generateItemMaster() {
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Item Code</label>
          <input type="text" id="itemCode" value="ITM-${String(appData.items.length + 1).padStart(3, '0')}">
        </div>
        <div class="form-group">
          <label>Item Name *</label>
          <input type="text" id="itemName" placeholder="Enter item name" required>
        </div>
        <div class="form-group">
          <label>Category</label>
          <select id="itemCategory">
            <option value="Glass">Glass</option>
            <option value="Hardware">Hardware</option>
            <option value="Accessories">Accessories</option>
            <option value="Tools">Tools</option>
            <option value="Consumables">Consumables</option>
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Unit</label>
          <select id="itemUnit">
            <option value="Sq. Ft">Square Feet</option>
            <option value="Sq. Mtr">Square Meter</option>
            <option value="Piece">Piece</option>
            <option value="Set">Set</option>
            <option value="Kg">Kilogram</option>
            <option value="Liter">Liter</option>
          </select>
        </div>
        <div class="form-group">
          <label>HSN Code</label>
          <input type="text" id="hsnCode" placeholder="Enter HSN code">
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="itemStatus">
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
      </div>
    </div>
    
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" onclick="addNewItem()" style="padding:12px 40px;font-size:16px">
        â• Add New Item
      </button>
    </div>
    
    <div class="table-container">
      <h3>Item List</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Item Code</th>
            <th>Item Name</th>
            <th>Category</th>
            <th>Unit</th>
            <th>HSN Code</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          ${appData.items.map(item => `
            <tr>
              <td><strong>${item.code}</strong></td>
              <td>${item.name}</td>
              <td><span class="status-badge">${item.category}</span></td>
              <td>${item.unit}</td>
              <td>${item.hsn || 'N/A'}</td>
              <td><span class="status-badge ${item.status === 'Active' ? 'status-active' : 'status-inactive'}">
                ${item.status || 'Active'}
              </span></td>
              <td>
                <button onclick="editItem('${item.code}')" style="padding:6px 12px;background:#ffc107;border:none;border-radius:6px;cursor:pointer">
                  âœï¸ Edit
                </button>
              </td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    </div>
    
    <script>
    function addNewItem(){
      const code = document.getElementById('itemCode').value;
      const name = document.getElementById('itemName').value;
      const category = document.getElementById('itemCategory').value;
      const unit = document.getElementById('itemUnit').value;
      const hsn = document.getElementById('hsnCode').value;
      const status = document.getElementById('itemStatus').value;
      
      if(!name){
        alert('Please enter item name');
        return;
      }
      
      // Check if editing existing item
      const existingIndex = appData.items.findIndex(i => i.code === code);
      
      if(existingIndex >= 0){
        // Update existing item
        appData.items[existingIndex] = {
          ...appData.items[existingIndex],
          name: name,
          category: category,
          unit: unit,
          hsn: hsn,
          status: status
        };
        alert('Item updated successfully!');
      } else {
        // Add new item
        appData.items.push({
          code: code,
          name: name,
          category: category,
          unit: unit,
          hsn: hsn,
          status: status
        });
        alert('Item added successfully!');
      }
      
      // Generate new code for next item
      document.getElementById('itemCode').value = 'ITM-' + String(appData.items.length + 1).padStart(3, '0');
      document.getElementById('itemName').value = '';
      document.getElementById('hsnCode').value = '';
      
      // Reload module to refresh table
      loadModule('itemMaster');
    }
    
    function editItem(code){
      const item = appData.items.find(i => i.code === code);
      if(item){
        document.getElementById('itemCode').value = item.code;
        document.getElementById('itemName').value = item.name;
        document.getElementById('itemCategory').value = item.category;
        document.getElementById('itemUnit').value = item.unit;
        document.getElementById('hsnCode').value = item.hsn || '';
        document.getElementById('itemStatus').value = item.status || 'Active';
        alert('Item loaded for editing. Update values and click Add New Item to save changes.');
      }
    }
    </script>
  `;
}

// ALL OTHER MODULE FUNCTIONS SAME AS BEFORE...
// (Rest of the code remains exactly the same as your original 3800+ lines)

// PRICE MASTER
function generatePriceMaster() {
  return `
    <div style="padding:20px">
      <h3>ğŸ’° Price Master</h3>
      <p>Manage pricing for customers and items</p>
      
      <div class="form-container">
        <div>
          <div class="form-group">
            <label>Customer</label>
            <select>
              <option value="">Select Customer</option>
              ${appData.customers.map(c => `<option value="${c.id}">${c.name}</option>`).join('')}
            </select>
          </div>
          <div class="form-group">
            <label>Item</label>
            <select>
              <option value="">Select Item</option>
              ${appData.items.map(i => `<option value="${i.code}">${i.code} - ${i.name}</option>`).join('')}
            </select>
          </div>
        </div>
        <div>
          <div class="form-group">
            <label>Base Price (â‚¹)</label>
            <input type="number" value="100">
          </div>
          <div class="form-group">
            <label>Tax (%)</label>
            <input type="number" value="18">
          </div>
        </div>
      </div>
      
      <div style="text-align:center;margin:20px">
        <button class="action-btn action-btn-success" style="padding:12px 30px">
          ğŸ’¾ Save Price
        </button>
      </div>
    </div>
  `;
}

// CUSTOMER REGISTRATION
function generateCustomerRegistration() {
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Customer ID</label>
          <input type="text" id="custId" value="CUST-${String(appData.customers.length + 1).padStart(3, '0')}" readonly>
        </div>
        <div class="form-group">
          <label>Customer Name *</label>
          <input type="text" id="custName" placeholder="Enter customer name" required>
        </div>
        <div class="form-group">
          <label>Mobile Number *</label>
          <input type="text" id="mobile" placeholder="Enter 10-digit mobile number" pattern="[0-9]{10}" required>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Customer Category</label>
          <select id="custCategory">
            <option value="Retail">Retail</option>
            <option value="Wholesale">Wholesale</option>
            <option value="Contractor">Contractor</option>
          </select>
        </div>
        <div class="form-group">
          <label>GST Number</label>
          <input type="text" id="gst" placeholder="Enter GST number">
        </div>
      </div>
    </div>
    
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" onclick="registerCustomer()" style="padding:12px 40px;font-size:16px">
        ğŸ‘¥ Register Customer
      </button>
    </div>
    
    <script>
    function registerCustomer(){
      const name = document.getElementById('custName').value;
      const mobile = document.getElementById('mobile').value;
      
      if(!name || !mobile){
        alert('Customer Name and Mobile Number are required');
        return;
      }
      
      if(mobile.length !== 10 || isNaN(mobile)){
        alert('Please enter a valid 10-digit mobile number');
        return;
      }
      
      const customer = {
        id: document.getElementById('custId').value,
        name: name,
        mobile: mobile,
        category: document.getElementById('custCategory').value,
        gst: document.getElementById('gst').value
      };
      
      appData.customers.push(customer);
      
      alert('Customer registered successfully! Customer ID: ' + customer.id);
      
      // Generate new ID for next registration
      document.getElementById('custId').value = 'CUST-' + String(appData.customers.length + 1).padStart(3, '0');
      document.getElementById('custName').value = '';
      document.getElementById('mobile').value = '';
      document.getElementById('gst').value = '';
    }
    </script>
  `;
}

// SALES INVOICE
function generateSalesInvoice() {
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Invoice No.</label>
          <input type="text" value="INV-${new Date().getFullYear()}-${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}" readonly>
        </div>
        <div class="form-group">
          <label>Invoice Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Customer *</label>
          <select required>
            <option value="">Select Customer</option>
            ${appData.customers.map(c => `<option value="${c.id}">${c.name}</option>`).join('')}
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Payment Terms</label>
          <select>
            <option>Net 30 Days</option>
            <option>Immediate</option>
          </select>
        </div>
        <div class="form-group">
          <label>Grand Total</label>
          <input type="text" value="â‚¹8,950.00" readonly style="font-weight:bold;font-size:18px">
        </div>
      </div>
    </div>
    
    <div style="padding:20px">
      <div style="text-align:center;margin:30px">
        <button class="action-btn action-btn-success" style="padding:15px 50px;font-size:18px">
          ğŸ§¾ Generate Invoice
        </button>
        <button class="action-btn" style="padding:15px 50px;font-size:18px;margin-left:15px">
          ğŸ‘ï¸ Preview
        </button>
      </div>
    </div>
  `;
}

// ALL OTHER MODULES (simplified versions)
function generateProcessMaster() { return `<div style="padding:20px"><h3>âš™ï¸ Process Master</h3><p>Define manufacturing processes</p></div>`; }
function generateCuttingRule() { return `<div style="padding:20px"><h3>âœ‚ï¸ Cutting Rule (Z Rule)</h3><p>Optimize glass cutting</p></div>`; }
function generateGlassSize() { return `<div style="padding:20px"><h3>ğŸ“ Glass Size Master</h3><p>Define glass sizes</p></div>`; }
function generateGlassType() { return `<div style="padding:20px"><h3>ğŸ” Glass Type Master</h3><p>Define glass types</p></div>`; }
function generateRouteMaster() { return `<div style="padding:20px"><h3>ğŸ—ºï¸ Route Master</h3><p>Define delivery routes</p></div>`; }
function generatePaymentTerms() { return `<div style="padding:20px"><h3>ğŸ’³ Payment Terms Master</h3><p>Define payment terms</p></div>`; }
function generateFilmType() { return `<div style="padding:20px"><h3>ğŸï¸ Film Type Master</h3><p>Define film types</p></div>`; }
function generateBankMaster() { return `<div style="padding:20px"><h3>ğŸ¦ Bank Master</h3><p>Manage bank accounts</p></div>`; }
function generateVehicleMaster() { return `<div style="padding:20px"><h3>ğŸšš Vehicle Master</h3><p>Manage vehicles</p></div>`; }
function generateAdditionalCharges() { return `<div style="padding:20px"><h3>â• Additional Charges Master</h3><p>Define additional charges</p></div>`; }
function generateRemarksMaster() { return `<div style="padding:20px"><h3>ğŸ“ Remarks Master</h3><p>Define standard remarks</p></div>`; }
function generateProformaInvoice() { return `<div style="padding:20px"><h3>ğŸ“„ Proforma Invoice</h3><p>Create proforma invoices</p></div>`; }
function generateWorkOrder() { return `<div style="padding:20px"><h3>ğŸ“‹ Work Order</h3><p>Create work orders</p></div>`; }
function generateCuttingOptimizer() { return `<div style="padding:20px"><h3>âœ‚ï¸ Cutting Optimizer</h3><p>Optimize cutting layouts</p></div>`; }
function generateLabelGeneration() { return `<div style="padding:20px"><h3>ğŸ·ï¸ Label Generation</h3><p>Generate labels and stickers</p></div>`; }
function generateHardwareInventory() { return `<div style="padding:20px"><h3>ğŸ”© Hardware Inventory</h3><p>Manage hardware stock</p></div>`; }
function generateGlassInventory() { return `<div style="padding:20px"><h3>ğŸ” Glass Inventory</h3><p>Manage glass stock</p></div>`; }
function generateDefaultConfig() { return `<div style="padding:20px"><h3>âš™ï¸ Default Configuration</h3><p>Configure system defaults</p></div>`; }
function generateFileStorage() { return `<div style="padding:20px"><h3>ğŸ’¾ File Storage</h3><p>Configure file storage</p></div>`; }
function generateNetworkConfig() { return `<div style="padding:20px"><h3>ğŸŒ Network Config</h3><p>Configure network settings</p></div>`; }
function generateDataBackup() { return `<div style="padding:20px"><h3>ğŸ’¿ Data Backup</h3><p>Backup and restore data</p></div>`; }
function generateSmsEmail() { return `<div style="padding:20px"><h3>ğŸ“§ SMS/Email Config</h3><p>Configure notifications</p></div>`; }
function generateBillingConfig() { return `<div style="padding:20px"><h3>ğŸ’° Billing Config</h3><p>Configure billing settings</p></div>`; }
function generatePrintConfig() { return `<div style="padding:20px"><h3>ğŸ–¨ï¸ Print Config</h3><p>Configure printer settings</p></div>`; }
function generateUserAccess() { return `<div style="padding:20px"><h3>ğŸ‘¤ User Access Control</h3><p>Manage user permissions</p></div>`; }
function generateSoftwareUpdate() { return `<div style="padding:20px"><h3>ğŸ”„ Software Update</h3><p>Check for updates</p></div>`; }
function generateCustomerList() { return `<div style="padding:20px"><h3>ğŸ“‹ Customer List</h3><p>View all customers</p><div class="table-container"><table class="data-table"><thead><tr><th>Customer ID</th><th>Name</th><th>Category</th><th>Mobile</th></tr></thead><tbody>${appData.customers.map(c => `<tr><td>${c.id}</td><td>${c.name}</td><td>${c.category}</td><td>${c.mobile}</td></tr>`).join('')}</tbody></table></div></div>`; }
function generateSalespersonRegistration() { return `<div style="padding:20px"><h3>ğŸ“ Salesperson Registration</h3><p>Register salespersons</p></div>`; }
function generateSalespersonList() { return `<div style="padding:20px"><h3>ğŸ“‹ Salesperson List</h3><p>View salespersons</p></div>`; }
function generateProformaReport() { return `<div style="padding:20px"><h3>ğŸ“„ Proforma Report</h3><p>Generate reports</p></div>`; }
function generateInvoiceReport() { return `<div style="padding:20px"><h3>ğŸ§¾ Invoice Report</h3><p>Generate reports</p></div>`; }
function generateSalesPerformance() { return `<div style="padding:20px"><h3>ğŸ“ˆ Sales Performance</h3><p>Generate reports</p></div>`; }
function generateProductionReport() { return `<div style="padding:20px"><h3>ğŸ­ Production Report</h3><p>Generate reports</p></div>`; }
function generateWorkOrderReport() { return `<div style="padding:20px"><h3>ğŸ“‹ Work Order Report</h3><p>Generate reports</p></div>`; }
function generateGlassInventoryReport() { return `<div style="padding:20px"><h3>ğŸ” Glass Inventory Report</h3><p>Generate reports</p></div>`; }
function generateBreakageReport() { return `<div style="padding:20px"><h3>ğŸ’” Breakage Report</h3><p>Generate reports</p></div>`; }
function generateRejectionReport() { return `<div style="padding:20px"><h3>âŒ Rejection Report</h3><p>Generate reports</p></div>`; }
function generatePendingBilling() { return `<div style="padding:20px"><h3>â³ Pending Billing Report</h3><p>Generate reports</p></div>`; }
function generateBilledArea() { return `<div style="padding:20px"><h3>ğŸ“ Billed Area Report</h3><p>Generate reports</p></div>`; }
function generateTallyExport() { return `<div style="padding:20px"><h3>ğŸ“¤ Tally Export Report</h3><p>Export to Tally</p></div>`; }
function generateDirectInvoice() { return `<div style="padding:20px"><h3>ğŸ§¾ Direct Invoice Report</h3><p>Generate reports</p></div>`; }
function generateCreditNote() { return `<div style="padding:20px"><h3>ğŸ“ Credit Note Report</h3><p>Generate reports</p></div>`; }
function generateUserManagement() { return `<div style="padding:20px"><h3>ğŸ‘¥ User Management</h3><p>Manage system users</p></div>`; }

// Action functions
function saveModule(moduleName){
  alert(`ğŸ’¾ Changes saved for ${moduleName} module`);
}

function printModule(moduleName){
  alert(`ğŸ–¨ï¸ Printing ${moduleName} module...`);
}

function exportModule(moduleName){
  alert(`ğŸ“¤ Exporting ${moduleName} module data...`);
}
</script>

</body>
</html>
