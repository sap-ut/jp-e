<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JP Solutions ERP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
:root{
  --blue:#0d6efd;
  --light:#e9f2ff;
  --dropdown-bg:#fff;
  --dropdown-hover:#f0f4ff;
  --sidebar-bg:#1a2b4c;
  --sidebar-width:260px;
  --success:#28a745;
  --warning:#ffc107;
  --danger:#dc3545;
}
*{box-sizing:border-box;font-family:Segoe UI,Arial}
body{margin:0;background:#f4f8ff;color:#333;overflow:hidden}

/* LOGIN SCREEN */
.login-screen{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background:linear-gradient(135deg, #f4f8ff 0%, #e9f2ff 100%);
  display:flex;
  justify-content:center;
  align-items:center;
  z-index:9998;
  opacity:0;
  pointer-events:none;
  transition:opacity 0.5s ease;
}
.login-screen.active{
  opacity:1;
  pointer-events:all;
}
.login-container{
  background:white;
  padding:40px;
  border-radius:16px;
  box-shadow:0 15px 35px rgba(0,0,0,0.1);
  width:90%;
  max-width:400px;
}
.login-title{
  text-align:center;
  color:#1a2b4c;
  margin-bottom:30px;
  font-size:1.8rem;
}
.login-form .form-group{
  margin-bottom:20px;
}
.login-form label{
  display:block;
  margin-bottom:8px;
  color:#555;
  font-weight:500;
}
.login-form input{
  width:100%;
  padding:12px 15px;
  border:1px solid #ddd;
  border-radius:8px;
  font-size:16px;
  transition:border 0.3s;
}
.login-form input:focus{
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(13,110,253,0.1);
}
.login-btn{
  width:100%;
  padding:14px;
  background:var(--blue);
  color:white;
  border:none;
  border-radius:8px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:background 0.3s;
}
.login-btn:hover{
  background:#0b5ed7;
}
.server-select{
  margin-bottom:15px;
}
.server-select select{
  width:100%;
  padding:10px;
  border:1px solid #ddd;
  border-radius:8px;
  background:white;
}

/* APP - Initially hidden */
#app{
  display:none;
  height:100vh;
  overflow:hidden;
}
#app.active{
  display:block;
}

/* DASHBOARD */
.dashboard-container{
  padding:20px;
  height:calc(100vh - 60px);
  overflow-y:auto;
}
.dashboard-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:20px;
  margin-bottom:30px;
}
.dashboard-card{
  background:white;
  border-radius:12px;
  padding:25px;
  box-shadow:0 5px 15px rgba(0,0,0,0.05);
  border-left:5px solid var(--blue);
}
.dashboard-card h3{
  margin-top:0;
  color:#1a2b4c;
  font-size:1.3rem;
}
.dashboard-card p{
  color:#666;
  margin-bottom:15px;
}
.dashboard-stats{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));
  gap:15px;
}
.stat-box{
  background:white;
  padding:20px;
  border-radius:10px;
  text-align:center;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.stat-value{
  font-size:2.5rem;
  font-weight:bold;
  color:var(--blue);
  margin-bottom:5px;
}
.stat-label{
  color:#666;
  font-size:0.9rem;
}
.quick-actions{
  display:flex;
  gap:15px;
  flex-wrap:wrap;
}
.quick-action-btn{
  padding:12px 20px;
  background:#f8f9fa;
  border:none;
  border-radius:8px;
  cursor:pointer;
  display:flex;
  align-items:center;
  gap:10px;
  font-weight:500;
  transition:background 0.3s, transform 0.2s;
}
.quick-action-btn:hover{
  background:#e9ecef;
  transform:translateY(-2px);
}

/* NAVBAR */
.navbar{
  position:sticky;
  top:0;
  z-index:1000;
  background:var(--blue);
  display:flex;
  align-items:center;
  overflow-x:auto;
  padding:10px 20px;
  color:#fff;
  white-space:nowrap;
  scrollbar-width: thin;
  scrollbar-color: rgba(255,255,255,0.4) transparent;
  box-shadow: 0 4px 12px rgba(0,0,0,0.1);
}
.navbar::-webkit-scrollbar { height: 6px; }
.navbar::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.4); border-radius: 3px; }

.brand{
  font-weight:700;
  margin-right:30px;
  flex-shrink:0;
  font-size:1.5rem;
  display:flex;
  align-items:center;
  gap:10px;
}
.brand-icon{
  font-size:1.8rem;
}
.menu{
  display:flex;
  gap:20px;
  flex-shrink:0;
}
.menu-item{
  position:relative;
  cursor:pointer;
  flex-shrink:0;
}
.menu-item span{
  padding:8px 16px;
  display:flex;
  align-items:center;
  gap:8px;
  transition: background 0.3s;
  border-radius:8px;
  font-weight:600;
}
.menu-item span:hover{
  background: rgba(255,255,255,0.2);
}
.menu-item span::after{
  content:'â–¼';
  font-size:0.7rem;
  margin-left:5px;
}
.logout-btn{
  background:rgba(255,255,255,0.2);
  padding:8px 16px;
  border-radius:8px;
  cursor:pointer;
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:8px;
  font-weight:600;
}
.logout-btn:hover{
  background:rgba(255,255,255,0.3);
}

/* DROPDOWN - Improved positioning */
.dropdown{
  display:none;
  position:fixed;
  background:var(--dropdown-bg);
  color:#000;
  border-radius:8px;
  box-shadow:0 10px 25px rgba(0,0,0,.15);
  z-index:9999;
  padding:8px 0;
  min-width:250px;
  max-height:500px;
  overflow-y:auto;
  transform: scaleY(0);
  transform-origin: top;
  transition: transform 0.25s ease, opacity 0.25s ease;
  opacity:0;
  border:1px solid #e0e0e0;
}
.dropdown.show{
  display:block;
  transform: scaleY(1);
  opacity:1;
}
.dropdown div{
  padding:12px 20px;
  cursor:pointer;
  white-space:nowrap;
  transition: background 0.2s;
  border-bottom:1px solid #f5f5f5;
  display:flex;
  align-items:center;
  gap:10px;
}
.dropdown div:hover{
  background: var(--dropdown-hover);
}
.dropdown div:last-child{
  border-bottom:none;
}

/* CONTENT */
.content{
  padding:0;
  position:relative;
  z-index:1;
  background:#fff;
  min-height:calc(100vh - 60px);
  border-radius:0;
  margin:0;
  box-shadow:none;
  overflow-y:auto;
  max-height:calc(100vh - 60px);
  display:none;
}
.content.active{
  display:block;
}

/* MODULE HEADER */
.module-header{
  display:flex;
  justify-content:space-between;
  align-items:center;
  border-bottom:2px solid #f0f0f0;
  padding:20px;
  margin-bottom:0;
  background:white;
  position:sticky;
  top:0;
  z-index:100;
}
.module-header h2{
  margin:0;
  color:#1a2b4c;
  font-size:1.8rem;
  display:flex;
  align-items:center;
  gap:10px;
}
.action-buttons{
  display:flex;
  gap:10px;
}
.action-btn{
  padding:10px 20px;
  background:var(--blue);
  color:white;
  border:none;
  border-radius:8px;
  cursor:pointer;
  font-weight:600;
  transition:background 0.3s, transform 0.2s;
  display:flex;
  align-items:center;
  gap:8px;
}
.action-btn:hover{
  background:#0b5ed7;
  transform:translateY(-2px);
}
.action-btn-success{
  background:var(--success);
}
.action-btn-success:hover{
  background:#218838;
}
.action-btn-warning{
  background:var(--warning);
  color:#000;
}
.action-btn-warning:hover{
  background:#e0a800;
}

/* FORM STYLES */
.form-container{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(300px, 1fr));
  gap:25px;
  margin:20px;
  padding:20px;
  background:#f8f9fa;
  border-radius:12px;
}
.form-group{
  margin-bottom:20px;
}
.form-group label{
  display:block;
  margin-bottom:8px;
  font-weight:600;
  color:#444;
}
.form-group input,
.form-group select,
.form-group textarea{
  width:100%;
  padding:12px 15px;
  border-radius:8px;
  border:1px solid #ccc;
  font-size:15px;
  transition:all 0.3s;
}
.form-group input:focus,
.form-group select:focus,
.form-group textarea:focus{
  outline:none;
  border-color:var(--blue);
  box-shadow:0 0 0 3px rgba(13,110,253,0.1);
}

/* TABLE STYLES */
.table-container{
  margin:20px;
  padding:20px;
  background:white;
  border-radius:12px;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.data-table{
  width:100%;
  border-collapse:separate;
  border-spacing:0;
  margin-top:20px;
  background:#fff;
  border-radius:12px;
  overflow:hidden;
  box-shadow:0 3px 15px rgba(0,0,0,0.05);
}
.data-table th{
  background:#f8f9fa;
  padding:15px 20px;
  text-align:left;
  font-weight:600;
  color:#333;
  border-bottom:2px solid #e9ecef;
}
.data-table td{
  padding:15px 20px;
  border-bottom:1px solid #e9ecef;
  color:#555;
}
.data-table tr:hover{
  background:#f8f9fa;
}
.data-table tr:last-child td{
  border-bottom:none;
}

/* STATUS INDICATORS */
.status-badge{
  padding:6px 12px;
  border-radius:20px;
  font-size:12px;
  font-weight:600;
  display:inline-block;
}
.status-active{
  background:#d1e7dd;
  color:#0f5132;
}
.status-inactive{
  background:#f8d7da;
  color:#842029;
}
.status-pending{
  background:#fff3cd;
  color:#856404;
}

/* MODULE SPECIFIC */
.optimizer-grid{
  display:grid;
  grid-template-columns:repeat(3, 1fr);
  gap:25px;
  margin:20px;
}
.optimizer-card{
  background:#f8f9fa;
  padding:25px;
  border-radius:12px;
  border:2px solid #e9ecef;
  transition:transform 0.3s, box-shadow 0.3s;
}
.optimizer-card:hover{
  transform:translateY(-5px);
  box-shadow:0 10px 20px rgba(0,0,0,0.1);
}
.config-card{
  background:#fff;
  padding:25px;
  border-radius:12px;
  border:1px solid #ddd;
  margin-bottom:20px;
  box-shadow:0 3px 10px rgba(0,0,0,0.05);
}
.report-controls{
  display:flex;
  gap:15px;
  margin-bottom:25px;
  flex-wrap:wrap;
  padding:20px;
}
.tab-container{
  display:flex;
  border-bottom:2px solid #ddd;
  margin-bottom:20px;
  padding:0 20px;
}
.tab{
  padding:12px 25px;
  cursor:pointer;
  border-bottom:4px solid transparent;
  font-weight:600;
  color:#666;
  transition:all 0.3s;
}
.tab:hover{
  color:var(--blue);
}
.tab.active{
  border-bottom-color:var(--blue);
  color:var(--blue);
}
.tab-content{
  display:none;
  padding:20px;
}
.tab-content.active{
  display:block;
}

/* RESPONSIVE */
@media (max-width: 1024px){
  .optimizer-grid{
    grid-template-columns:repeat(2, 1fr);
  }
}
@media (max-width: 768px){
  .form-container{
    grid-template-columns:1fr;
    margin:10px;
    padding:15px;
  }
  .optimizer-grid{
    grid-template-columns:1fr;
    margin:10px;
  }
  .menu{
    gap:10px;
  }
  .menu-item span{
    padding:6px 12px;
    font-size:14px;
  }
  .dashboard-grid{
    grid-template-columns:1fr;
  }
  .dashboard-stats{
    grid-template-columns:repeat(2, 1fr);
  }
  .module-header{
    flex-direction:column;
    gap:15px;
    align-items:flex-start;
  }
  .action-buttons{
    width:100%;
    justify-content:center;
  }
  .tab-container{
    overflow-x:auto;
    flex-wrap:nowrap;
  }
  .tab{
    white-space:nowrap;
  }
}
@media (max-width: 480px){
  .dashboard-stats{
    grid-template-columns:1fr;
  }
  .login-container{
    padding:30px 20px;
  }
}
</style>
</head>
<body>

<!-- SPLASH SCREEN -->
<div id="splashScreen" class="splash-screen">
  <div class="splash-logo">ğŸ¢</div>
  <h1 class="splash-title">JP Solutions ERP</h1>
  <p class="splash-subtitle">Enterprise Resource Planning System</p>
  <div class="splash-loader">
    <div class="splash-loader-bar"></div>
  </div>
</div>

<!-- LOGIN SCREEN -->
<div id="loginScreen" class="login-screen">
  <div class="login-container">
    <h2 class="login-title">ğŸ” User Login</h2>
    <form class="login-form" id="loginForm">
      <div class="server-select">
        <label>Select Server</label>
        <select id="serverSelect">
          <option value="server1">Main Server - Production</option>
          <option value="server2">Backup Server</option>
          <option value="server3">Local Server</option>
          <option value="server4">Cloud Server</option>
        </select>
      </div>
      
      <div class="form-group">
        <label>Username</label>
        <input type="text" id="username" placeholder="Enter your username" required>
      </div>
      
      <div class="form-group">
        <label>Password</label>
        <input type="password" id="password" placeholder="Enter your password" required>
      </div>
      
      <button type="submit" class="login-btn">Login to System</button>
    </form>
  </div>
</div>

<!-- APP -->
<div id="app">
  <div class="navbar">
    <div class="brand">
      <span class="brand-icon">ğŸ¢</span>
      <span>JP Solutions ERP</span>
    </div>
    <div class="menu">
      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ§± Masters</span>
        <div class="dropdown">
          <div onclick="loadModule('itemMaster')">ğŸ“¦ Item Master</div>
          <div onclick="loadModule('priceMaster')">ğŸ’° Price Master</div>
          <div onclick="loadModule('processMaster')">âš™ï¸ Process Master</div>
          <div onclick="loadModule('cuttingRule')">âœ‚ï¸ Cutting Rule (Z Rule)</div>
          <div onclick="loadModule('glassSize')">ğŸ“ Glass Size Master</div>
          <div onclick="loadModule('glassType')">ğŸ” Glass Type Master</div>
          <div onclick="loadModule('routeMaster')">ğŸ—ºï¸ Route Master</div>
          <div onclick="loadModule('paymentTerms')">ğŸ’³ Payment Terms Master</div>
          <div onclick="loadModule('filmType')">ğŸï¸ Film Type</div>
          <div onclick="loadModule('bankMaster')">ğŸ¦ Bank Master</div>
          <div onclick="loadModule('vehicleMaster')">ğŸšš Vehicle Master</div>
          <div onclick="loadModule('additionalCharges')">â• Additional Charges Master</div>
          <div onclick="loadModule('remarksMaster')">ğŸ“ Remarks Master</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ” Transactions</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaInvoice')">ğŸ“„ Proforma Invoice</div>
          <div onclick="loadModule('workOrder')">ğŸ“‹ Work Order</div>
          <div onclick="loadModule('salesInvoice')">ğŸ§¾ Sales Invoice</div>
          <div onclick="loadModule('cuttingOptimizer')">âœ‚ï¸ Cutting Optimizer</div>
          <div onclick="loadModule('labelGeneration')">ğŸ·ï¸ Label / Sticker Generation</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ“¦ Inventory / Stock</span>
        <div class="dropdown">
          <div onclick="loadModule('hardwareInventory')">ğŸ”© Hardware Inventory</div>
          <div onclick="loadModule('glassInventory')">ğŸ” Glass Inventory</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>âš™ï¸ System Settings</span>
        <div class="dropdown">
          <div onclick="loadModule('defaultConfig')">âš™ï¸ Default Configuration</div>
          <div onclick="loadModule('fileStorage')">ğŸ’¾ File Storage Configuration</div>
          <div onclick="loadModule('networkConfig')">ğŸŒ Network Configuration</div>
          <div onclick="loadModule('dataBackup')">ğŸ’¿ Data Backup & Restore</div>
          <div onclick="loadModule('smsEmail')">ğŸ“§ SMS / Email Configuration</div>
          <div onclick="loadModule('billingConfig')">ğŸ’° Billing Configuration</div>
          <div onclick="loadModule('printConfig')">ğŸ–¨ï¸ Print Configuration</div>
          <div onclick="loadModule('userAccess')">ğŸ‘¤ User Access Control</div>
          <div onclick="loadModule('softwareUpdate')">ğŸ”„ Software Update</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ‘¥ Customer Management</span>
        <div class="dropdown">
          <div onclick="loadModule('customerRegistration')">ğŸ“ Customer Registration</div>
          <div onclick="loadModule('customerList')">ğŸ“‹ Customer List / Customer Master</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ§‘â€ğŸ’¼ Sales Management</span>
        <div class="dropdown">
          <div onclick="loadModule('salespersonRegistration')">ğŸ“ Salesperson Registration</div>
          <div onclick="loadModule('salespersonList')">ğŸ“‹ Salesperson List</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ“Š Reports</span>
        <div class="dropdown">
          <div onclick="loadModule('proformaReport')">ğŸ“„ Proforma Report</div>
          <div onclick="loadModule('invoiceReport')">ğŸ§¾ Invoice Report</div>
          <div onclick="loadModule('salesPerformance')">ğŸ“ˆ Salesperson Performance Report</div>
          <div onclick="loadModule('productionReport')">ğŸ­ Production Report</div>
          <div onclick="loadModule('workOrderReport')">ğŸ“‹ Work Order Report</div>
          <div onclick="loadModule('glassInventoryReport')">ğŸ” Glass Inventory Report</div>
          <div onclick="loadModule('breakageReport')">ğŸ’” Breakage Report</div>
          <div onclick="loadModule('rejectionReport')">âŒ Rejection Report</div>
          <div onclick="loadModule('pendingBilling')">â³ Pending Billing Report</div>
          <div onclick="loadModule('billedArea')">ğŸ“ Billed Area Report (Sq.Mtr)</div>
          <div onclick="loadModule('tallyExport')">ğŸ“¤ Tally Export Report</div>
          <div onclick="loadModule('directInvoice')">ğŸ§¾ Direct Invoice Report</div>
          <div onclick="loadModule('creditNote')">ğŸ“ Credit Note Report</div>
        </div>
      </div>

      <div class="menu-item" onclick="toggleDropdown(event,this)">
        <span>ğŸ‘¤ User Management</span>
        <div class="dropdown">
          <div onclick="loadModule('userManagement')">ğŸ‘¥ User Management</div>
        </div>
      </div>
      
      <div class="logout-btn" onclick="logout()">
        <span>ğŸšª Exit</span>
      </div>
    </div>
  </div>

  <!-- DASHBOARD (Default Content) -->
  <div id="dashboardContent" class="dashboard-container active">
    <div style="margin-bottom:30px">
      <h1 style="color:#1a2b4c;font-size:2.2rem">Dashboard</h1>
      <p style="color:#666">Welcome back! Here's what's happening with your business today.</p>
    </div>
    
    <div class="dashboard-stats">
      <div class="stat-box">
        <div class="stat-value">â‚¹85,420</div>
        <div class="stat-label">Today's Revenue</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">42</div>
        <div class="stat-label">Pending Orders</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">8</div>
        <div class="stat-label">Production Jobs</div>
      </div>
      <div class="stat-box">
        <div class="stat-value">92%</div>
        <div class="stat-label">Stock Availability</div>
      </div>
    </div>
    
    <div class="dashboard-grid">
      <div class="dashboard-card">
        <h3>ğŸ“ˆ Quick Overview</h3>
        <p>Get a quick snapshot of your business performance</p>
        <div class="quick-actions">
          <button class="quick-action-btn" onclick="loadModule('salesInvoice')">
            <span>ğŸ§¾</span> Create Invoice
          </button>
          <button class="quick-action-btn" onclick="loadModule('workOrder')">
            <span>ğŸ“‹</span> New Work Order
          </button>
          <button class="quick-action-btn" onclick="loadModule('proformaInvoice')">
            <span>ğŸ“„</span> Proforma Invoice
          </button>
        </div>
      </div>
      
      <div class="dashboard-card">
        <h3>ğŸ”” Recent Activity</h3>
        <ul style="padding-left:20px;color:#555">
          <li>New order from ABC Construction (â‚¹25,000)</li>
          <li>Production of Order #WO-234 completed</li>
          <li>Glass inventory updated - 6mm stock low</li>
          <li>3 invoices pending for payment</li>
        </ul>
      </div>
      
      <div class="dashboard-card">
        <h3>âš¡ Quick Links</h3>
        <div class="quick-actions">
          <button class="quick-action-btn" onclick="loadModule('customerRegistration')">
            <span>ğŸ‘¥</span> Add Customer
          </button>
          <button class="quick-action-btn" onclick="loadModule('itemMaster')">
            <span>ğŸ“¦</span> Add Item
          </button>
          <button class="quick-action-btn" onclick="loadModule('glassInventory')">
            <span>ğŸ”</span> Check Stock
          </button>
          <button class="quick-action-btn" onclick="loadModule('cuttingOptimizer')">
            <span>âœ‚ï¸</span> Optimize Cutting
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- MODULE CONTENT -->
  <div class="content" id="moduleContent">
    <!-- Module content loads here -->
  </div>
</div>

<script>
// Global Data Storage
const appData = {
  currentUser: null,
  customers: [
    { id: 'CUST-001', name: 'ABC Construction', category: 'Retail', mobile: '9876543210' },
    { id: 'CUST-002', name: 'XYZ Developers', category: 'Wholesale', mobile: '9876543211' },
    { id: 'CUST-003', name: 'Modern Interiors', category: 'Contractor', mobile: '9876543212' }
  ],
  items: [
    { code: 'ITM-001', name: 'Glass Panel 6mm', category: 'Glass', unit: 'Sq. Ft', hsn: '70071990', status: 'Active' },
    { code: 'ITM-002', name: 'Aluminum Frame', category: 'Hardware', unit: 'Piece', hsn: '76101090', status: 'Active' },
    { code: 'ITM-003', name: 'Window Handle', category: 'Accessories', unit: 'Piece', hsn: '83024100', status: 'Active' }
  ],
  priceMaster: [
    { id: 1, customerId: 'CUST-001', itemCode: 'ITM-001', basePrice: 100, tax: 18, effectiveDate: '2024-01-01' },
    { id: 2, customerId: 'CUST-002', itemCode: 'ITM-001', basePrice: 95, tax: 18, effectiveDate: '2024-01-01' },
    { id: 3, customerId: 'CUST-003', itemCode: 'ITM-001', basePrice: 90, tax: 18, effectiveDate: '2024-01-01' }
  ]
};

// Initialize application
document.addEventListener('DOMContentLoaded', function() {
  // Show splash screen for 3 seconds
  setTimeout(() => {
    document.getElementById('splashScreen').classList.add('fade-out');
    
    setTimeout(() => {
      document.getElementById('loginScreen').classList.add('active');
    }, 500);
  }, 3000);
  
  // Handle login form submission
  document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    const server = document.getElementById('serverSelect').value;
    
    // Simple validation
    if(username && password) {
      // Store current user
      appData.currentUser = {
        username: username,
        server: server,
        loginTime: new Date().toLocaleTimeString()
      };
      
      // Hide login screen
      document.getElementById('loginScreen').classList.remove('active');
      
      // Show app with dashboard
      setTimeout(() => {
        document.getElementById('app').classList.add('active');
        showDashboard();
      }, 500);
    } else {
      alert('Please enter both username and password');
    }
  });
  
  // Close dropdowns when clicking outside
  document.addEventListener('click', function(event) {
    if (!event.target.closest('.menu-item')) {
      document.querySelectorAll('.dropdown').forEach(d => {
        d.classList.remove('show');
      });
    }
  });
});

// Toggle dropdown with proper positioning
function toggleDropdown(event, el) {
  event.stopPropagation();
  
  const dropdown = el.querySelector('.dropdown');
  const rect = el.getBoundingClientRect();
  
  // Calculate position
  dropdown.style.top = (rect.bottom + 5) + "px";
  dropdown.style.left = (rect.left) + "px";
  
  // Hide all other dropdowns
  document.querySelectorAll('.dropdown').forEach(d => {
    if (d !== dropdown) d.classList.remove('show');
  });
  
  // Toggle current dropdown
  dropdown.classList.toggle('show');
}

// Show dashboard (default view)
function showDashboard() {
  document.getElementById('dashboardContent').classList.add('active');
  document.getElementById('moduleContent').classList.remove('active');
}

// Module loading function
function loadModule(moduleName) {
  // Hide dashboard, show module content
  document.getElementById('dashboardContent').classList.remove('active');
  document.getElementById('moduleContent').classList.add('active');
  
  // Close any open dropdowns
  document.querySelectorAll('.dropdown').forEach(d => d.classList.remove('show'));
  
  let moduleContent = '';
  let moduleTitle = '';
  let moduleIcon = '';
  
  switch(moduleName) {
    // Masters modules
    case 'itemMaster':
      moduleTitle = 'Item Master';
      moduleIcon = 'ğŸ“¦';
      moduleContent = generateItemMaster();
      break;
    case 'priceMaster':
      moduleTitle = 'Price Master';
      moduleIcon = 'ğŸ’°';
      moduleContent = generatePriceMaster();
      break;
    case 'processMaster':
      moduleTitle = 'Process Master';
      moduleIcon = 'âš™ï¸';
      moduleContent = generateProcessMaster();
      break;
    case 'cuttingRule':
      moduleTitle = 'Cutting Rule (Z Rule)';
      moduleIcon = 'âœ‚ï¸';
      moduleContent = generateCuttingRule();
      break;
    case 'glassSize':
      moduleTitle = 'Glass Size Master';
      moduleIcon = 'ğŸ“';
      moduleContent = generateGlassSize();
      break;
    case 'glassType':
      moduleTitle = 'Glass Type Master';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassType();
      break;
    case 'routeMaster':
      moduleTitle = 'Route Master';
      moduleIcon = 'ğŸ—ºï¸';
      moduleContent = generateRouteMaster();
      break;
    case 'paymentTerms':
      moduleTitle = 'Payment Terms Master';
      moduleIcon = 'ğŸ’³';
      moduleContent = generatePaymentTerms();
      break;
    case 'filmType':
      moduleTitle = 'Film Type Master';
      moduleIcon = 'ğŸï¸';
      moduleContent = generateFilmType();
      break;
    case 'bankMaster':
      moduleTitle = 'Bank Master';
      moduleIcon = 'ğŸ¦';
      moduleContent = generateBankMaster();
      break;
    case 'vehicleMaster':
      moduleTitle = 'Vehicle Master';
      moduleIcon = 'ğŸšš';
      moduleContent = generateVehicleMaster();
      break;
    case 'additionalCharges':
      moduleTitle = 'Additional Charges Master';
      moduleIcon = 'â•';
      moduleContent = generateAdditionalCharges();
      break;
    case 'remarksMaster':
      moduleTitle = 'Remarks Master';
      moduleIcon = 'ğŸ“';
      moduleContent = generateRemarksMaster();
      break;
      
    // Transactions modules
    case 'proformaInvoice':
      moduleTitle = 'Proforma Invoice';
      moduleIcon = 'ğŸ“„';
      moduleContent = generateProformaInvoice();
      break;
    case 'workOrder':
      moduleTitle = 'Work Order';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateWorkOrder();
      break;
    case 'salesInvoice':
      moduleTitle = 'Sales Invoice';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateSalesInvoice();
      break;
    case 'cuttingOptimizer':
      moduleTitle = 'Cutting Optimizer';
      moduleIcon = 'âœ‚ï¸';
      moduleContent = generateCuttingOptimizer();
      break;
    case 'labelGeneration':
      moduleTitle = 'Label / Sticker Generation';
      moduleIcon = 'ğŸ·ï¸';
      moduleContent = generateLabelGeneration();
      break;
      
    // Inventory modules
    case 'hardwareInventory':
      moduleTitle = 'Hardware Inventory';
      moduleIcon = 'ğŸ”©';
      moduleContent = generateHardwareInventory();
      break;
    case 'glassInventory':
      moduleTitle = 'Glass Inventory';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassInventory();
      break;
      
    // System Settings modules
    case 'defaultConfig':
      moduleTitle = 'Default Configuration';
      moduleIcon = 'âš™ï¸';
      moduleContent = generateDefaultConfig();
      break;
    case 'fileStorage':
      moduleTitle = 'File Storage Configuration';
      moduleIcon = 'ğŸ’¾';
      moduleContent = generateFileStorage();
      break;
    case 'networkConfig':
      moduleTitle = 'Network Configuration';
      moduleIcon = 'ğŸŒ';
      moduleContent = generateNetworkConfig();
      break;
    case 'dataBackup':
      moduleTitle = 'Data Backup & Restore';
      moduleIcon = 'ğŸ’¿';
      moduleContent = generateDataBackup();
      break;
    case 'smsEmail':
      moduleTitle = 'SMS / Email Configuration';
      moduleIcon = 'ğŸ“§';
      moduleContent = generateSmsEmail();
      break;
    case 'billingConfig':
      moduleTitle = 'Billing Configuration';
      moduleIcon = 'ğŸ’°';
      moduleContent = generateBillingConfig();
      break;
    case 'printConfig':
      moduleTitle = 'Print Configuration';
      moduleIcon = 'ğŸ–¨ï¸';
      moduleContent = generatePrintConfig();
      break;
    case 'userAccess':
      moduleTitle = 'User Access Control';
      moduleIcon = 'ğŸ‘¤';
      moduleContent = generateUserAccess();
      break;
    case 'softwareUpdate':
      moduleTitle = 'Software Update';
      moduleIcon = 'ğŸ”„';
      moduleContent = generateSoftwareUpdate();
      break;
      
    // Customer Management modules
    case 'customerRegistration':
      moduleTitle = 'Customer Registration';
      moduleIcon = 'ğŸ“';
      moduleContent = generateCustomerRegistration();
      break;
    case 'customerList':
      moduleTitle = 'Customer List';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateCustomerList();
      break;
      
    // Sales Management modules
    case 'salespersonRegistration':
      moduleTitle = 'Salesperson Registration';
      moduleIcon = 'ğŸ“';
      moduleContent = generateSalespersonRegistration();
      break;
    case 'salespersonList':
      moduleTitle = 'Salesperson List';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateSalespersonList();
      break;
      
    // Reports modules
    case 'proformaReport':
      moduleTitle = 'Proforma Report';
      moduleIcon = 'ğŸ“„';
      moduleContent = generateProformaReport();
      break;
    case 'invoiceReport':
      moduleTitle = 'Invoice Report';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateInvoiceReport();
      break;
    case 'salesPerformance':
      moduleTitle = 'Sales Performance Report';
      moduleIcon = 'ğŸ“ˆ';
      moduleContent = generateSalesPerformance();
      break;
    case 'productionReport':
      moduleTitle = 'Production Report';
      moduleIcon = 'ğŸ­';
      moduleContent = generateProductionReport();
      break;
    case 'workOrderReport':
      moduleTitle = 'Work Order Report';
      moduleIcon = 'ğŸ“‹';
      moduleContent = generateWorkOrderReport();
      break;
    case 'glassInventoryReport':
      moduleTitle = 'Glass Inventory Report';
      moduleIcon = 'ğŸ”';
      moduleContent = generateGlassInventoryReport();
      break;
    case 'breakageReport':
      moduleTitle = 'Breakage Report';
      moduleIcon = 'ğŸ’”';
      moduleContent = generateBreakageReport();
      break;
    case 'rejectionReport':
      moduleTitle = 'Rejection Report';
      moduleIcon = 'âŒ';
      moduleContent = generateRejectionReport();
      break;
    case 'pendingBilling':
      moduleTitle = 'Pending Billing Report';
      moduleIcon = 'â³';
      moduleContent = generatePendingBilling();
      break;
    case 'billedArea':
      moduleTitle = 'Billed Area Report';
      moduleIcon = 'ğŸ“';
      moduleContent = generateBilledArea();
      break;
    case 'tallyExport':
      moduleTitle = 'Tally Export Report';
      moduleIcon = 'ğŸ“¤';
      moduleContent = generateTallyExport();
      break;
    case 'directInvoice':
      moduleTitle = 'Direct Invoice Report';
      moduleIcon = 'ğŸ§¾';
      moduleContent = generateDirectInvoice();
      break;
    case 'creditNote':
      moduleTitle = 'Credit Note Report';
      moduleIcon = 'ğŸ“';
      moduleContent = generateCreditNote();
      break;
      
    // User Management
    case 'userManagement':
      moduleTitle = 'User Management';
      moduleIcon = 'ğŸ‘¥';
      moduleContent = generateUserManagement();
      break;
  }
  
  // Update module content
  document.getElementById('moduleContent').innerHTML = `
    <div class="module-header">
      <h2>${moduleIcon} ${moduleTitle}</h2>
      <div class="action-buttons">
        <button class="action-btn" onclick="saveModule('${moduleName}')">
          <span>ğŸ’¾</span> Save
        </button>
        <button class="action-btn action-btn-warning" onclick="printModule('${moduleName}')">
          <span>ğŸ–¨ï¸</span> Print
        </button>
        <button class="action-btn action-btn-success" onclick="exportModule('${moduleName}')">
          <span>ğŸ“¤</span> Export
        </button>
        <button class="action-btn" onclick="showDashboard()" style="background:#6c757d">
          <span>ğŸ </span> Dashboard
        </button>
      </div>
    </div>
    ${moduleContent}
  `;
  
  // Scroll to top
  window.scrollTo(0, 0);
}

// Logout function
function logout() {
  if(confirm('Are you sure you want to exit the system?')) {
    // Hide app
    document.getElementById('app').classList.remove('active');
    
    // Show login screen
    document.getElementById('loginScreen').classList.add('active');
    
    // Clear form
    document.getElementById('loginForm').reset();
    
    // Reset current user
    appData.currentUser = null;
  }
}

// ==================== MODULE GENERATION FUNCTIONS ====================

// PRICE MASTER - Enhanced version
function generatePriceMaster() {
  const priceRecords = appData.priceMaster.map(price => {
    const customer = appData.customers.find(c => c.id === price.customerId);
    const item = appData.items.find(i => i.code === price.itemCode);
    const finalPrice = price.basePrice + (price.basePrice * price.tax / 100);
    
    return {
      ...price,
      customerName: customer ? customer.name : 'Unknown',
      itemName: item ? item.name : 'Unknown',
      finalPrice: finalPrice
    };
  });
  
  return `
    <div class="tab-container">
      <div class="tab active" onclick="switchTab('priceTab', 'setup')">Setup Price</div>
      <div class="tab" onclick="switchTab('priceTab', 'view')">View Prices</div>
      <div class="tab" onclick="switchTab('priceTab', 'bulk')">Bulk Update</div>
    </div>
    
    <div id="setupPrice" class="tab-content active">
      <div class="form-container">
        <div>
          <div class="form-group">
            <label>Customer</label>
            <select id="priceCustomer" onchange="updateCustomerCategory()">
              <option value="">Select Customer</option>
              ${appData.customers.map(c => `<option value="${c.id}">${c.name} (${c.category})</option>`).join('')}
            </select>
          </div>
          <div class="form-group">
            <label>Customer Category</label>
            <input type="text" id="customerCategory" readonly>
          </div>
          <div class="form-group">
            <label>Item</label>
            <select id="priceItem" onchange="updateItemDetails()">
              <option value="">Select Item</option>
              ${appData.items.map(i => `<option value="${i.code}">${i.code} - ${i.name}</option>`).join('')}
            </select>
          </div>
        </div>
        <div>
          <div class="form-group">
            <label>Base Price (â‚¹)</label>
            <input type="number" id="basePrice" value="100" oninput="calculateFinalPrice()">
          </div>
          <div class="form-group">
            <label>Tax (%)</label>
            <input type="number" id="taxPercent" value="18" oninput="calculateFinalPrice()">
          </div>
          <div class="form-group">
            <label>Final Price (â‚¹)</label>
            <input type="number" id="finalPrice" value="118" readonly style="background:#f0f0f0;font-weight:bold">
          </div>
          <div class="form-group">
            <label>Effective Date</label>
            <input type="date" id="effectiveDate" value="${new Date().toISOString().split('T')[0]}">
          </div>
        </div>
      </div>
      <div style="margin:30px;text-align:center">
        <button class="action-btn action-btn-success" onclick="savePriceRecord()" style="padding:12px 40px;font-size:16px">
          ğŸ’¾ Save Price for this Customer
        </button>
        <button class="action-btn" onclick="savePriceForAllCustomers()" style="padding:12px 40px;font-size:16px;margin-left:15px">
          ğŸŒŸ Apply to All Customers
        </button>
      </div>
    </div>
    
    <div id="viewPrice" class="tab-content">
      <div class="report-controls">
        <input type="text" id="searchPrice" placeholder="ğŸ” Search customer or item..." 
               style="padding:12px;border-radius:8px;border:1px solid #ccc;flex-grow:1"
               onkeyup="filterPriceTable()">
        <select id="filterCustomer" style="padding:12px;border-radius:8px;border:1px solid #ccc" onchange="filterPriceTable()">
          <option value="">All Customers</option>
          ${appData.customers.map(c => `<option value="${c.id}">${c.name}</option>`).join('')}
        </select>
        <select id="filterItem" style="padding:12px;border-radius:8px;border:1px solid #ccc" onchange="filterPriceTable()">
          <option value="">All Items</option>
          ${appData.items.map(i => `<option value="${i.code}">${i.code}</option>`).join('')}
        </select>
        <button class="action-btn" onclick="refreshPriceTable()" style="padding:12px 20px">
          ğŸ”„ Refresh
        </button>
      </div>
      
      <div class="table-container">
        <table class="data-table" id="priceTable">
          <thead>
            <tr>
              <th>Customer</th>
              <th>Category</th>
              <th>Item Code</th>
              <th>Item Name</th>
              <th>Base Price</th>
              <th>Tax %</th>
              <th>Final Price</th>
              <th>Effective From</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            ${priceRecords.map(price => {
              const customer = appData.customers.find(c => c.id === price.customerId);
              return `
              <tr>
                <td>${price.customerName}</td>
                <td><span class="status-badge">${customer ? customer.category : ''}</span></td>
                <td><strong>${price.itemCode}</strong></td>
                <td>${price.itemName}</td>
                <td>â‚¹${price.basePrice}</td>
                <td>${price.tax}%</td>
                <td><strong>â‚¹${price.finalPrice.toFixed(2)}</strong></td>
                <td>${price.effectiveDate}</td>
                <td>
                  <button onclick="editPrice(${price.id})" style="padding:6px 12px;background:#ffc107;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:5px">
                    <span>âœï¸</span> Edit
                  </button>
                  <button onclick="deletePrice(${price.id})" style="padding:6px 12px;background:#dc3545;color:white;border:none;border-radius:6px;cursor:pointer;margin-left:5px;display:flex;align-items:center;gap:5px">
                    <span>ğŸ—‘ï¸</span> Delete
                  </button>
                </td>
              </tr>
              `;
            }).join('')}
          </tbody>
        </table>
      </div>
    </div>
    
    <div id="bulkPrice" class="tab-content">
      <div style="background:#f8f9fa;padding:30px;border-radius:12px;margin:20px">
        <h3>Bulk Price Update</h3>
        <p>Update prices for multiple customers at once</p>
        
        <div class="form-container">
          <div>
            <div class="form-group">
              <label>Select Item</label>
              <select id="bulkItem">
                ${appData.items.map(i => `<option value="${i.code}">${i.code} - ${i.name}</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label>Price Adjustment Type</label>
              <select id="adjustmentType">
                <option value="fixed">Fixed Amount</option>
                <option value="percentage">Percentage Increase</option>
                <option value="decrease">Percentage Decrease</option>
              </select>
            </div>
          </div>
          <div>
            <div class="form-group">
              <label>Adjustment Value</label>
              <input type="number" id="adjustmentValue" value="0">
            </div>
            <div class="form-group">
              <label>Effective Date</label>
              <input type="date" id="bulkEffectiveDate" value="${new Date().toISOString().split('T')[0]}">
            </div>
          </div>
        </div>
        
        <div style="margin-top:25px">
          <h4>Select Customers for Bulk Update</h4>
          <div style="max-height:200px;overflow-y:auto;border:1px solid #ddd;padding:15px;border-radius:8px;background:white">
            ${appData.customers.map(c => `
              <div style="margin-bottom:8px">
                <input type="checkbox" id="cust_${c.id}" value="${c.id}" checked>
                <label for="cust_${c.id}" style="margin-left:8px">${c.name} (${c.category})</label>
              </div>
            `).join('')}
          </div>
        </div>
        
        <div style="margin-top:30px;text-align:center">
          <button class="action-btn action-btn-success" onclick="applyBulkUpdate()" style="padding:12px 40px;font-size:16px">
            âœ… Apply Bulk Update
          </button>
        </div>
      </div>
      
      <div style="background:#e9f2ff;padding:20px;border-radius:12px;margin:20px">
        <h4>Bulk Update Preview</h4>
        <div id="bulkPreview" style="font-size:14px;padding:15px;background:white;border-radius:8px;border:1px solid #ccc">
          <p>Select options above to see preview of changes</p>
        </div>
      </div>
    </div>
    
    <script>
    function switchTab(tabGroup, tabName){
      document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
      
      event.target.classList.add('active');
      document.getElementById(tabName + 'Price').classList.add('active');
    }
    
    function updateCustomerCategory(){
      const customerId = document.getElementById('priceCustomer').value;
      const customer = appData.customers.find(c => c.id === customerId);
      if(customer){
        document.getElementById('customerCategory').value = customer.category;
      } else {
        document.getElementById('customerCategory').value = '';
      }
    }
    
    function calculateFinalPrice(){
      const basePrice = parseFloat(document.getElementById('basePrice').value) || 0;
      const taxPercent = parseFloat(document.getElementById('taxPercent').value) || 0;
      const finalPrice = basePrice + (basePrice * taxPercent / 100);
      document.getElementById('finalPrice').value = finalPrice.toFixed(2);
    }
    
    function savePriceRecord(){
      const customerId = document.getElementById('priceCustomer').value;
      const itemCode = document.getElementById('priceItem').value;
      const basePrice = parseFloat(document.getElementById('basePrice').value);
      const taxPercent = parseFloat(document.getElementById('taxPercent').value);
      const effectiveDate = document.getElementById('effectiveDate').value;
      
      if(!customerId || !itemCode){
        alert('Please select customer and item');
        return;
      }
      
      // Check if price already exists
      const existingIndex = appData.priceMaster.findIndex(
        p => p.customerId === customerId && p.itemCode === itemCode
      );
      
      if(existingIndex >= 0){
        // Update existing
        appData.priceMaster[existingIndex].basePrice = basePrice;
        appData.priceMaster[existingIndex].tax = taxPercent;
        appData.priceMaster[existingIndex].effectiveDate = effectiveDate;
        alert('Price updated successfully!');
      } else {
        // Add new
        const newId = appData.priceMaster.length > 0 ? 
          Math.max(...appData.priceMaster.map(p => p.id)) + 1 : 1;
        
        appData.priceMaster.push({
          id: newId,
          customerId: customerId,
          itemCode: itemCode,
          basePrice: basePrice,
          tax: taxPercent,
          effectiveDate: effectiveDate
        });
        alert('Price saved successfully for this customer!');
      }
      
      // Refresh view
      loadModule('priceMaster');
    }
    
    function savePriceForAllCustomers(){
      const itemCode = document.getElementById('priceItem').value;
      const basePrice = parseFloat(document.getElementById('basePrice').value);
      const taxPercent = parseFloat(document.getElementById('taxPercent').value);
      const effectiveDate = document.getElementById('effectiveDate').value;
      
      if(!itemCode){
        alert('Please select an item first');
        return;
      }
      
      if(confirm('Apply this price to ALL customers?')){
        const customers = appData.customers;
        customers.forEach(customer => {
          const existingIndex = appData.priceMaster.findIndex(
            p => p.customerId === customer.id && p.itemCode === itemCode
          );
          
          if(existingIndex >= 0){
            appData.priceMaster[existingIndex].basePrice = basePrice;
            appData.priceMaster[existingIndex].tax = taxPercent;
            appData.priceMaster[existingIndex].effectiveDate = effectiveDate;
          } else {
            const newId = appData.priceMaster.length > 0 ? 
              Math.max(...appData.priceMaster.map(p => p.id)) + 1 : 1;
            
            appData.priceMaster.push({
              id: newId,
              customerId: customer.id,
              itemCode: itemCode,
              basePrice: basePrice,
              tax: taxPercent,
              effectiveDate: effectiveDate
            });
          }
        });
        
        alert('Price applied to all customers successfully!');
        loadModule('priceMaster');
      }
    }
    
    function filterPriceTable(){
      // Filter implementation
      console.log('Filtering price table...');
    }
    
    function refreshPriceTable(){
      // Refresh table data
      loadModule('priceMaster');
    }
    
    function editPrice(id){
      const price = appData.priceMaster.find(p => p.id === id);
      if(price){
        document.getElementById('priceCustomer').value = price.customerId;
        document.getElementById('priceItem').value = price.itemCode;
        document.getElementById('basePrice').value = price.basePrice;
        document.getElementById('taxPercent').value = price.tax;
        document.getElementById('effectiveDate').value = price.effectiveDate;
        calculateFinalPrice();
        updateCustomerCategory();
        
        switchTab('priceTab', 'setup');
        alert('Price loaded for editing. Update values and click Save.');
      }
    }
    
    function deletePrice(id){
      if(confirm('Are you sure you want to delete this price record?')){
        const index = appData.priceMaster.findIndex(p => p.id === id);
        if(index > -1){
          appData.priceMaster.splice(index, 1);
          loadModule('priceMaster');
        }
      }
    }
    
    function applyBulkUpdate(){
      const itemCode = document.getElementById('bulkItem').value;
      const adjustmentType = document.getElementById('adjustmentType').value;
      const adjustmentValue = parseFloat(document.getElementById('adjustmentValue').value) || 0;
      const effectiveDate = document.getElementById('bulkEffectiveDate').value;
      
      if(!itemCode){
        alert('Please select an item');
        return;
      }
      
      if(adjustmentValue <= 0){
        alert('Please enter a valid adjustment value');
        return;
      }
      
      // Get selected customers
      const selectedCustomers = [];
      document.querySelectorAll('input[type="checkbox"]:checked').forEach(checkbox => {
        selectedCustomers.push(checkbox.value);
      });
      
      if(selectedCustomers.length === 0){
        alert('Please select at least one customer');
        return;
      }
      
      if(confirm(`Apply ${adjustmentType} update to ${selectedCustomers.length} customers?`)){
        // Apply bulk update
        selectedCustomers.forEach(customerId => {
          const existingIndex = appData.priceMaster.findIndex(
            p => p.customerId === customerId && p.itemCode === itemCode
          );
          
          let newBasePrice = 100; // Default base price
          
          if(existingIndex >= 0){
            newBasePrice = appData.priceMaster[existingIndex].basePrice;
          }
          
          // Apply adjustment
          switch(adjustmentType){
            case 'fixed':
              newBasePrice += adjustmentValue;
              break;
            case 'percentage':
              newBasePrice += (newBasePrice * adjustmentValue / 100);
              break;
            case 'decrease':
              newBasePrice -= (newBasePrice * adjustmentValue / 100);
              break;
          }
          
          if(existingIndex >= 0){
            appData.priceMaster[existingIndex].basePrice = newBasePrice;
            appData.priceMaster[existingIndex].effectiveDate = effectiveDate;
          } else {
            const newId = appData.priceMaster.length > 0 ? 
              Math.max(...appData.priceMaster.map(p => p.id)) + 1 : 1;
            
            appData.priceMaster.push({
              id: newId,
              customerId: customerId,
              itemCode: itemCode,
              basePrice: newBasePrice,
              tax: 18, // Default tax
              effectiveDate: effectiveDate
            });
          }
        });
        
        alert('Bulk update applied successfully!');
        loadModule('priceMaster');
      }
    }
    </script>
  `;
}

// ITEM MASTER
function generateItemMaster() {
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Item Code</label>
          <input type="text" id="itemCode" value="ITM-${String(appData.items.length + 1).padStart(3, '0')}">
        </div>
        <div class="form-group">
          <label>Item Name *</label>
          <input type="text" id="itemName" placeholder="Enter item name" required>
        </div>
        <div class="form-group">
          <label>Category</label>
          <select id="itemCategory">
            <option value="Glass">Glass</option>
            <option value="Hardware">Hardware</option>
            <option value="Accessories">Accessories</option>
            <option value="Tools">Tools</option>
            <option value="Consumables">Consumables</option>
          </select>
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea id="itemDesc" rows="3" placeholder="Enter item description"></textarea>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Unit</label>
          <select id="itemUnit">
            <option value="Sq. Ft">Square Feet</option>
            <option value="Sq. Mtr">Square Meter</option>
            <option value="Piece">Piece</option>
            <option value="Set">Set</option>
            <option value="Kg">Kilogram</option>
            <option value="Liter">Liter</option>
          </select>
        </div>
        <div class="form-group">
          <label>HSN Code</label>
          <input type="text" id="hsnCode" placeholder="Enter HSN code">
        </div>
        <div class="form-group">
          <label>Base Price (â‚¹)</label>
          <input type="number" id="itemPrice" value="0">
        </div>
        <div class="form-group">
          <label>Status</label>
          <select id="itemStatus">
            <option value="Active">Active</option>
            <option value="Inactive">Inactive</option>
          </select>
        </div>
      </div>
    </div>
    
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" onclick="addNewItem()" style="padding:12px 40px;font-size:16px">
        â• Add New Item
      </button>
      <button class="action-btn" onclick="clearItemForm()" style="padding:12px 40px;font-size:16px;margin-left:15px">
        ğŸ—‘ï¸ Clear Form
      </button>
    </div>
    
    <div class="table-container">
      <h3>Item List</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Item Code</th>
            <th>Item Name</th>
            <th>Category</th>
            <th>Unit</th>
            <th>HSN Code</th>
            <th>Base Price</th>
            <th>Status</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          ${appData.items.map(item => `
            <tr>
              <td><strong>${item.code}</strong></td>
              <td>${item.name}</td>
              <td><span class="status-badge">${item.category}</span></td>
              <td>${item.unit}</td>
              <td>${item.hsn || 'N/A'}</td>
              <td>â‚¹${item.price || '0'}</td>
              <td><span class="status-badge ${item.status === 'Active' ? 'status-active' : 'status-inactive'}">
                ${item.status || 'Active'}
              </span></td>
              <td>
                <button onclick="editItem('${item.code}')" style="padding:6px 12px;background:#ffc107;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:5px">
                  <span>âœï¸</span> Edit
                </button>
              </td>
            </tr>
          `).join('')}
        </tbody>
      </table>
    </div>
    
    <script>
    function addNewItem(){
      const code = document.getElementById('itemCode').value;
      const name = document.getElementById('itemName').value;
      const category = document.getElementById('itemCategory').value;
      const unit = document.getElementById('itemUnit').value;
      const hsn = document.getElementById('hsnCode').value;
      const price = parseFloat(document.getElementById('itemPrice').value) || 0;
      const status = document.getElementById('itemStatus').value;
      const desc = document.getElementById('itemDesc').value;
      
      if(!name){
        alert('Please enter item name');
        return;
      }
      
      // Check if editing existing item
      const existingIndex = appData.items.findIndex(i => i.code === code);
      
      if(existingIndex >= 0){
        // Update existing item
        appData.items[existingIndex] = {
          ...appData.items[existingIndex],
          name: name,
          category: category,
          unit: unit,
          hsn: hsn,
          price: price,
          status: status,
          description: desc
        };
        alert('Item updated successfully!');
      } else {
        // Add new item
        appData.items.push({
          code: code,
          name: name,
          category: category,
          unit: unit,
          hsn: hsn,
          price: price,
          status: status,
          description: desc
        });
        alert('Item added successfully!');
      }
      
      clearItemForm();
      // Generate new code for next item
      document.getElementById('itemCode').value = 'ITM-' + String(appData.items.length + 1).padStart(3, '0');
      // Refresh the view
      loadModule('itemMaster');
    }
    
    function editItem(code){
      const item = appData.items.find(i => i.code === code);
      if(item){
        document.getElementById('itemCode').value = item.code;
        document.getElementById('itemName').value = item.name;
        document.getElementById('itemCategory').value = item.category;
        document.getElementById('itemUnit').value = item.unit;
        document.getElementById('hsnCode').value = item.hsn || '';
        document.getElementById('itemPrice').value = item.price || 0;
        document.getElementById('itemStatus').value = item.status || 'Active';
        document.getElementById('itemDesc').value = item.description || '';
        alert('Item loaded for editing. Update values and click Add New Item to save changes.');
      }
    }
    
    function clearItemForm(){
      document.getElementById('itemName').value = '';
      document.getElementById('hsnCode').value = '';
      document.getElementById('itemPrice').value = 0;
      document.getElementById('itemDesc').value = '';
    }
    </script>
  `;
}

// CUSTOMER REGISTRATION
function generateCustomerRegistration() {
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Customer ID</label>
          <input type="text" id="custId" value="CUST-${String(appData.customers.length + 1).padStart(3, '0')}" readonly>
        </div>
        <div class="form-group">
          <label>Customer Name *</label>
          <input type="text" id="custName" placeholder="Enter customer name" required>
        </div>
        <div class="form-group">
          <label>Contact Person</label>
          <input type="text" id="contactPerson" placeholder="Enter contact person name">
        </div>
        <div class="form-group">
          <label>Mobile Number *</label>
          <input type="text" id="mobile" placeholder="Enter 10-digit mobile number" pattern="[0-9]{10}" required>
        </div>
        <div class="form-group">
          <label>Email</label>
          <input type="email" id="email" placeholder="Enter email address">
        </div>
        <div class="form-group">
          <label>Customer Type</label>
          <select id="custType">
            <option value="Regular">Regular</option>
            <option value="VIP">VIP</option>
            <option value="Contractor">Contractor</option>
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Customer Category</label>
          <select id="custCategory">
            <option value="Retail">Retail</option>
            <option value="Wholesale">Wholesale</option>
            <option value="Contractor">Contractor</option>
            <option value="Dealer">Dealer</option>
            <option value="Corporate">Corporate</option>
          </select>
        </div>
        <div class="form-group">
          <label>Address</label>
          <textarea id="address" rows="3" placeholder="Enter complete address"></textarea>
        </div>
        <div class="form-group">
          <label>City</label>
          <input type="text" id="city" placeholder="Enter city">
        </div>
        <div class="form-group">
          <label>State</label>
          <input type="text" id="state" placeholder="Enter state">
        </div>
        <div class="form-group">
          <label>Pincode</label>
          <input type="text" id="pincode" placeholder="Enter pincode">
        </div>
        <div class="form-group">
          <label>GST Number</label>
          <input type="text" id="gst" placeholder="Enter GST number">
        </div>
      </div>
    </div>
    
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" onclick="registerCustomer()" style="padding:12px 40px;font-size:16px">
        ğŸ‘¥ Register Customer
      </button>
      <button class="action-btn" onclick="clearCustomerForm()" style="padding:12px 40px;font-size:16px;margin-left:15px">
        ğŸ—‘ï¸ Clear Form
      </button>
    </div>
    
    <script>
    function registerCustomer(){
      const name = document.getElementById('custName').value;
      const mobile = document.getElementById('mobile').value;
      
      if(!name || !mobile){
        alert('Customer Name and Mobile Number are required');
        return;
      }
      
      if(mobile.length !== 10 || isNaN(mobile)){
        alert('Please enter a valid 10-digit mobile number');
        return;
      }
      
      const customer = {
        id: document.getElementById('custId').value,
        name: name,
        contactPerson: document.getElementById('contactPerson').value,
        mobile: mobile,
        email: document.getElementById('email').value,
        type: document.getElementById('custType').value,
        category: document.getElementById('custCategory').value,
        address: document.getElementById('address').value,
        city: document.getElementById('city').value,
        state: document.getElementById('state').value,
        pincode: document.getElementById('pincode').value,
        gst: document.getElementById('gst').value,
        registrationDate: new Date().toISOString().split('T')[0]
      };
      
      appData.customers.push(customer);
      
      alert('Customer registered successfully!\\nCustomer ID: ' + customer.id);
      clearCustomerForm();
      // Generate new ID for next registration
      document.getElementById('custId').value = 'CUST-' + String(appData.customers.length + 1).padStart(3, '0');
    }
    
    function clearCustomerForm(){
      document.getElementById('custName').value = '';
      document.getElementById('contactPerson').value = '';
      document.getElementById('mobile').value = '';
      document.getElementById('email').value = '';
      document.getElementById('address').value = '';
      document.getElementById('city').value = '';
      document.getElementById('state').value = '';
      document.getElementById('pincode').value = '';
      document.getElementById('gst').value = '';
    }
    </script>
  `;
}

// SALES INVOICE
function generateSalesInvoice() {
  const invoiceItems = [
    { code: 'ITM-001', name: 'Glass Panel 6mm', qty: 50, unit: 'Sq. Ft', rate: 120, amount: 6000 },
    { code: 'ITM-002', name: 'Aluminum Frame', qty: 20, unit: 'Piece', rate: 85, amount: 1700 },
    { code: 'ITM-003', name: 'Window Handle', qty: 50, unit: 'Piece', rate: 25, amount: 1250 }
  ];
  
  const subtotal = invoiceItems.reduce((sum, item) => sum + item.amount, 0);
  const tax = subtotal * 0.18;
  const total = subtotal + tax;
  
  return `
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Invoice No.</label>
          <input type="text" value="INV-${new Date().getFullYear()}-${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}" readonly style="font-weight:bold">
        </div>
        <div class="form-group">
          <label>Invoice Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Customer *</label>
          <select id="invoiceCustomer" required>
            <option value="">Select Customer</option>
            ${appData.customers.map(c => `<option value="${c.id}">${c.name} - ${c.mobile}</option>`).join('')}
          </select>
        </div>
        <div class="form-group">
          <label>Sales Person</label>
          <select>
            <option>Rahul Verma</option>
            <option>Priya Singh</option>
            <option>Amit Sharma</option>
          </select>
        </div>
        <div class="form-group">
          <label>PO Number</label>
          <input type="text" placeholder="Enter Purchase Order number">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Payment Terms</label>
          <select>
            <option>Net 30 Days</option>
            <option>Net 45 Days</option>
            <option>Immediate</option>
            <option>50% Advance</option>
          </select>
        </div>
        <div class="form-group">
          <label>Transport Mode</label>
          <select>
            <option>By Road</option>
            <option>By Courier</option>
            <option>Customer Pickup</option>
          </select>
        </div>
        <div class="form-group">
          <label>Delivery Date</label>
          <input type="date" value="${new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Sub Total</label>
          <input type="text" value="â‚¹${subtotal.toFixed(2)}" readonly style="background:#f0f0f0">
        </div>
        <div class="form-group">
          <label>Tax (18%)</label>
          <input type="text" value="â‚¹${tax.toFixed(2)}" readonly style="background:#f0f0f0">
        </div>
        <div class="form-group">
          <label>Grand Total</label>
          <input type="text" value="â‚¹${total.toFixed(2)}" readonly style="background:#e9f2ff;font-weight:bold;font-size:18px">
        </div>
      </div>
    </div>
    
    <div style="padding:20px">
      <h3>Add Items to Invoice</h3>
      <div style="background:#f8f9fa;padding:25px;border-radius:12px;margin-bottom:25px">
        <div class="form-container">
          <div>
            <div class="form-group">
              <label>Select Item *</label>
              <select id="invoiceItem" required>
                <option value="">Select Item</option>
                ${appData.items.map(i => `<option value="${i.code}">${i.code} - ${i.name} (${i.unit})</option>`).join('')}
              </select>
            </div>
            <div class="form-group">
              <label>Quantity *</label>
              <input type="number" id="itemQty" value="1" min="1" required>
            </div>
          </div>
          <div>
            <div class="form-group">
              <label>Rate (â‚¹) *</label>
              <input type="number" id="itemRate" placeholder="Enter rate" required>
            </div>
            <div class="form-group">
              <label>Amount (â‚¹)</label>
              <input type="number" id="itemAmount" readonly style="background:#f0f0f0;font-weight:bold">
            </div>
          </div>
        </div>
        <div style="text-align:center;margin-top:20px">
          <button class="action-btn action-btn-success" onclick="addInvoiceItem()" style="padding:12px 30px">
            â• Add Item to Invoice
          </button>
        </div>
      </div>
    </div>
    
    <div class="table-container">
      <h3>Invoice Items</h3>
      <table class="data-table">
        <thead>
          <tr>
            <th>Sr.</th>
            <th>Item Code</th>
            <th>Item Name</th>
            <th>Quantity</th>
            <th>Unit</th>
            <th>Rate (â‚¹)</th>
            <th>Amount (â‚¹)</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody id="invoiceItemsTable">
          ${invoiceItems.map((item, index) => `
            <tr>
              <td>${index + 1}</td>
              <td><strong>${item.code}</strong></td>
              <td>${item.name}</td>
              <td>${item.qty}</td>
              <td>${item.unit}</td>
              <td>â‚¹${item.rate}</td>
              <td>â‚¹${item.amount}</td>
              <td>
                <button onclick="removeInvoiceItem(${index})" style="padding:6px 12px;background:#dc3545;color:white;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:5px">
                  <span>ğŸ—‘ï¸</span> Remove
                </button>
              </td>
            </tr>
          `).join('')}
          <tr style="background:#f8f9fa">
            <td colspan="6" style="text-align:right;font-weight:bold;font-size:16px">Sub Total</td>
            <td colspan="2" style="font-weight:bold;font-size:16px">â‚¹${subtotal.toFixed(2)}</td>
          </tr>
          <tr style="background:#f8f9fa">
            <td colspan="6" style="text-align:right;font-weight:bold;font-size:16px">Tax (18%)</td>
            <td colspan="2" style="font-weight:bold;font-size:16px">â‚¹${tax.toFixed(2)}</td>
          </tr>
          <tr style="background:#e9f2ff">
            <td colspan="6" style="text-align:right;font-weight:bold;font-size:18px">Grand Total</td>
            <td colspan="2" style="font-weight:bold;font-size:18px;color:var(--blue)">â‚¹${total.toFixed(2)}</td>
          </tr>
        </tbody>
      </table>
    </div>
    
    <div style="margin:30px;text-align:center">
      <button class="action-btn action-btn-success" style="padding:15px 50px;font-size:18px">
        ğŸ§¾ Generate Invoice
      </button>
      <button class="action-btn" style="padding:15px 50px;font-size:18px;margin-left:15px">
        ğŸ’¾ Save as Draft
      </button>
      <button class="action-btn action-btn-warning" style="padding:15px 50px;font-size:18px;margin-left:15px">
        ğŸ‘ï¸ Print Preview
      </button>
    </div>
    
    <script>
    function addInvoiceItem(){
      const itemCode = document.getElementById('invoiceItem').value;
      const qty = parseFloat(document.getElementById('itemQty').value) || 0;
      const rate = parseFloat(document.getElementById('itemRate').value) || 0;
      
      if(!itemCode || qty <= 0 || rate <= 0){
        alert('Please select item and enter valid quantity and rate');
        return;
      }
      
      const item = appData.items.find(i => i.code === itemCode);
      if(item){
        alert('Item added: ' + item.name + ' (Quantity: ' + qty + ', Rate: ' + rate + ')');
        // In real implementation, this would add to the table
      }
    }
    
    function removeInvoiceItem(index){
      if(confirm('Remove this item from invoice?')){
        alert('Item removed');
        // In real implementation, this would remove from array and refresh table
      }
    }
    </script>
  `;
}

// OTHER MODULES (Simplified but functional implementations)

function generateProcessMaster() {
  return `<div class="form-container">
    <h3>âš™ï¸ Process Master</h3>
    <p>Define manufacturing processes with time and cost details</p>
    <div class="form-group">
      <label>Process Code</label>
      <input type="text" value="PROC-001">
    </div>
    <div class="form-group">
      <label>Process Name</label>
      <input type="text" placeholder="Enter process name">
    </div>
    <div class="form-group">
      <label>Time Required (Hours)</label>
      <input type="number" value="2">
    </div>
    <div class="form-group">
      <label>Labor Cost (â‚¹)</label>
      <input type="number" value="500">
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn" onclick="saveProcess()">Save Process</button>
    </div>
  </div>`;
}

function generateCuttingRule() {
  return `<div class="optimizer-grid">
    <div class="optimizer-card">
      <h3>âœ‚ï¸ Cutting Optimization</h3>
      <p>Optimize glass cutting to minimize waste</p>
      <div class="form-group">
        <label>Glass Sheet Size (W x H)</label>
        <div style="display:flex;gap:10px">
          <input type="number" placeholder="Width" value="1200" style="width:100px"> mm
          <input type="number" placeholder="Height" value="2400" style="width:100px"> mm
        </div>
      </div>
      <button class="action-btn" style="margin-top:15px">Calculate Optimal Cutting</button>
    </div>
    <div class="optimizer-card">
      <h3>ğŸ”§ Cut Pieces</h3>
      <p>Add pieces to be cut from sheet</p>
      <div id="cutPiecesList">
        <div style="padding:10px;background:#e9ecef;margin-bottom:5px;border-radius:4px">Piece 1: 600x800mm</div>
        <div style="padding:10px;background:#e9ecef;margin-bottom:5px;border-radius:4px">Piece 2: 400x600mm</div>
      </div>
      <button class="action-btn" style="margin-top:15px">Add Piece</button>
    </div>
    <div class="optimizer-card">
      <h3>ğŸ“Š Results</h3>
      <p>Optimization results will appear here</p>
      <div style="background:#f8f9fa;padding:15px;border-radius:8px;margin-top:15px">
        <p><strong>Material Utilization:</strong> 85%</p>
        <p><strong>Waste:</strong> 15%</p>
        <p><strong>Sheets Required:</strong> 3</p>
      </div>
    </div>
  </div>`;
}

function generateGlassSize() {
  return `<div class="form-container">
    <h3>ğŸ“ Glass Size Master</h3>
    <p>Define standard and jumbo glass sizes</p>
    <div class="form-group">
      <label>Glass Type</label>
      <select>
        <option>Clear Glass</option>
        <option>Tinted Glass</option>
        <option>Reflective Glass</option>
        <option>Laminated Glass</option>
      </select>
    </div>
    <div class="form-group">
      <label>Thickness (mm)</label>
      <select>
        <option>4mm</option>
        <option>5mm</option>
        <option>6mm</option>
        <option>8mm</option>
        <option>10mm</option>
        <option>12mm</option>
      </select>
    </div>
    <div class="form-group">
      <label>Standard Size (W x H in mm)</label>
      <div style="display:flex;gap:10px">
        <input type="number" placeholder="Width" value="1200"> x
        <input type="number" placeholder="Height" value="1800">
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn">Add Glass Size</button>
    </div>
  </div>`;
}

function generateGlassType() {
  return `<div class="form-container">
    <h3>ğŸ” Glass Type Master</h3>
    <p>Define different types of glass with specifications</p>
    <div class="form-group">
      <label>Glass Type Code</label>
      <input type="text" value="GT-001">
    </div>
    <div class="form-group">
      <label>Glass Type Name</label>
      <input type="text" placeholder="Enter glass type name">
    </div>
    <div class="form-group">
      <label>Description</label>
      <textarea rows="3" placeholder="Enter description"></textarea>
    </div>
    <div class="form-group">
      <label>U-Value</label>
      <input type="text" placeholder="Enter U-value">
    </div>
    <div class="form-group">
      <label>Solar Heat Gain</label>
      <input type="text" placeholder="Enter solar heat gain coefficient">
    </div>
  </div>`;
}

function generateRouteMaster() {
  return `<div class="form-container">
    <h3>ğŸ—ºï¸ Route Master</h3>
    <p>Define delivery routes and transportation details</p>
    <div class="form-group">
      <label>Route Code</label>
      <input type="text" value="RT-001">
    </div>
    <div class="form-group">
      <label>Route Name</label>
      <input type="text" placeholder="Enter route name">
    </div>
    <div class="form-group">
      <label>Start Point</label>
      <input type="text" placeholder="Enter start point">
    </div>
    <div class="form-group">
      <label>End Point</label>
      <input type="text" placeholder="Enter end point">
    </div>
    <div class="form-group">
      <label>Distance (km)</label>
      <input type="number" placeholder="Enter distance">
    </div>
  </div>`;
}

function generatePaymentTerms() {
  return `<div class="form-container">
    <h3>ğŸ’³ Payment Terms Master</h3>
    <p>Define payment terms for different customer categories</p>
    <div class="form-group">
      <label>Term Code</label>
      <input type="text" value="PT-001">
    </div>
    <div class="form-group">
      <label>Term Name</label>
      <input type="text" placeholder="Enter term name">
    </div>
    <div class="form-group">
      <label>Due Days</label>
      <input type="number" placeholder="Enter due days" value="30">
    </div>
    <div class="form-group">
      <label>Early Payment Discount (%)</label>
      <input type="number" placeholder="Enter discount" value="2">
    </div>
    <div class="form-group">
      <label>Late Payment Interest (%)</label>
      <input type="number" placeholder="Enter interest" value="1.5">
    </div>
  </div>`;
}

function generateFilmType() {
  return `<div class="form-container">
    <h3>ğŸï¸ Film Type Master</h3>
    <p>Define different types of films for glass</p>
    <div class="form-group">
      <label>Film Code</label>
      <input type="text" value="FT-001">
    </div>
    <div class="form-group">
      <label>Film Name</label>
      <input type="text" placeholder="Enter film name">
    </div>
    <div class="form-group">
      <label>Thickness (mil)</label>
      <input type="number" placeholder="Enter thickness">
    </div>
    <div class="form-group">
      <label>Color</label>
      <input type="text" placeholder="Enter color">
    </div>
    <div class="form-group">
      <label>UV Rejection (%)</label>
      <input type="number" placeholder="Enter UV rejection">
    </div>
  </div>`;
}

function generateBankMaster() {
  return `<div class="form-container">
    <h3>ğŸ¦ Bank Master</h3>
    <p>Manage bank accounts and details</p>
    <div class="form-group">
      <label>Bank Name</label>
      <input type="text" placeholder="Enter bank name">
    </div>
    <div class="form-group">
      <label>Account Number</label>
      <input type="text" placeholder="Enter account number">
    </div>
    <div class="form-group">
      <label>IFSC Code</label>
      <input type="text" placeholder="Enter IFSC code">
    </div>
    <div class="form-group">
      <label>Branch</label>
      <input type="text" placeholder="Enter branch name">
    </div>
    <div class="form-group">
      <label>Account Type</label>
      <select>
        <option>Current</option>
        <option>Savings</option>
        <option>CC</option>
        <option>OD</option>
      </select>
    </div>
  </div>`;
}

function generateVehicleMaster() {
  return `<div class="form-container">
    <h3>ğŸšš Vehicle Master</h3>
    <p>Manage company vehicles and details</p>
    <div class="form-group">
      <label>Vehicle Number</label>
      <input type="text" placeholder="Enter vehicle number">
    </div>
    <div class="form-group">
      <label>Vehicle Type</label>
      <select>
        <option>Truck</option>
        <option>Van</option>
        <option>Car</option>
        <option>Two-wheeler</option>
      </select>
    </div>
    <div class="form-group">
      <label>Capacity (kg)</label>
      <input type="number" placeholder="Enter capacity">
    </div>
    <div class="form-group">
      <label>Driver Name</label>
      <input type="text" placeholder="Enter driver name">
    </div>
    <div class="form-group">
      <label>Insurance Expiry</label>
      <input type="date">
    </div>
  </div>`;
}

function generateAdditionalCharges() {
  return `<div class="form-container">
    <h3>â• Additional Charges Master</h3>
    <p>Define additional charges like transportation, packaging etc.</p>
    <div class="form-group">
      <label>Charge Code</label>
      <input type="text" value="CHG-001">
    </div>
    <div class="form-group">
      <label>Charge Name</label>
      <input type="text" placeholder="Enter charge name">
    </div>
    <div class="form-group">
      <label>Charge Type</label>
      <select>
        <option>Fixed Amount</option>
        <option>Percentage</option>
        <option>Per Unit</option>
      </select>
    </div>
    <div class="form-group">
      <label>Default Value (â‚¹ or %)</label>
      <input type="number" placeholder="Enter default value">
    </div>
    <div class="form-group">
      <label>Taxable</label>
      <select>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>
  </div>`;
}

function generateRemarksMaster() {
  return `<div class="form-container">
    <h3>ğŸ“ Remarks Master</h3>
    <p>Define standard remarks for invoices and orders</p>
    <div class="form-group">
      <label>Remark Code</label>
      <input type="text" value="RMK-001">
    </div>
    <div class="form-group">
      <label>Remark Text</label>
      <textarea rows="4" placeholder="Enter remark text"></textarea>
    </div>
    <div class="form-group">
      <label>Category</label>
      <select>
        <option>Invoice</option>
        <option>Delivery</option>
        <option>Payment</option>
        <option>General</option>
      </select>
    </div>
    <div class="form-group">
      <label>Status</label>
      <select>
        <option>Active</option>
        <option>Inactive</option>
      </select>
    </div>
  </div>`;
}

function generateProformaInvoice() {
  return `<div class="form-container">
    <h3>ğŸ“„ Proforma Invoice</h3>
    <p>Create proforma invoices for customers</p>
    <!-- Similar to sales invoice but simplified -->
    <p>This module allows you to create preliminary invoices for quotation purposes.</p>
    <div style="text-align:center;margin-top:30px">
      <button class="action-btn" onclick="loadModule('salesInvoice')" style="padding:12px 30px">
        ğŸ§¾ Go to Sales Invoice
      </button>
    </div>
  </div>`;
}

function generateWorkOrder() {
  return `<div class="form-container">
    <h3>ğŸ“‹ Work Order</h3>
    <p>Create and manage work orders for production</p>
    <div class="form-group">
      <label>Work Order No.</label>
      <input type="text" value="WO-${new Date().getFullYear()}-${String(Math.floor(Math.random() * 1000)).padStart(3, '0')}" readonly>
    </div>
    <div class="form-group">
      <label>Customer</label>
      <select>
        <option>Select Customer</option>
        ${appData.customers.map(c => `<option>${c.name}</option>`).join('')}
      </select>
    </div>
    <div class="form-group">
      <label>Order Date</label>
      <input type="date" value="${new Date().toISOString().split('T')[0]}">
    </div>
    <div class="form-group">
      <label>Delivery Date</label>
      <input type="date" value="${new Date(Date.now() + 14 * 24 * 60 * 60 * 1000).toISOString().split('T')[0]}">
    </div>
    <div class="form-group">
      <label>Priority</label>
      <select>
        <option>Normal</option>
        <option>High</option>
        <option>Urgent</option>
      </select>
    </div>
  </div>`;
}

function generateCuttingOptimizer() {
  return `<div class="optimizer-grid">
    <div class="optimizer-card">
      <h3>âœ‚ï¸ Cutting Optimizer</h3>
      <p>Optimize glass cutting layouts to minimize waste</p>
      <div class="form-group">
        <label>Glass Sheet Size</label>
        <input type="text" value="2440 x 1830 mm" readonly>
      </div>
      <div class="form-group">
        <label>Glass Thickness</label>
        <input type="text" value="6mm" readonly>
      </div>
      <button class="action-btn" style="margin-top:15px;width:100%">
        ğŸš€ Start Optimization
      </button>
    </div>
    <div class="optimizer-card">
      <h3>ğŸ“ Pieces to Cut</h3>
      <div style="max-height:300px;overflow-y:auto">
        <div style="padding:10px;border-bottom:1px solid #ddd">
          <strong>Piece 1:</strong> 600x800mm (Qty: 4)
        </div>
        <div style="padding:10px;border-bottom:1px solid #ddd">
          <strong>Piece 2:</strong> 400x600mm (Qty: 8)
        </div>
        <div style="padding:10px;border-bottom:1px solid #ddd">
          <strong>Piece 3:</strong> 1200x900mm (Qty: 2)
        </div>
      </div>
      <button class="action-btn" style="margin-top:15px;width:100%">
        â• Add More Pieces
      </button>
    </div>
    <div class="optimizer-card">
      <h3>ğŸ“Š Optimization Results</h3>
      <div style="background:#f8f9fa;padding:15px;border-radius:8px;margin-top:10px">
        <p><strong>Material Utilization:</strong> <span style="color:green">92%</span></p>
        <p><strong>Sheets Required:</strong> 3</p>
        <p><strong>Waste:</strong> 8%</p>
        <p><strong>Estimated Savings:</strong> â‚¹1,250</p>
      </div>
      <button class="action-btn action-btn-success" style="margin-top:15px;width:100%">
        ğŸ’¾ Save Layout
      </button>
    </div>
  </div>`;
}

function generateLabelGeneration() {
  return `<div class="form-container">
    <h3>ğŸ·ï¸ Label / Sticker Generation</h3>
    <p>Generate labels and stickers for products</p>
    <div class="form-group">
      <label>Label Type</label>
      <select>
        <option>Product Label</option>
        <option>Shipping Label</option>
        <option>Barcode Label</option>
        <option>QR Code Label</option>
      </select>
    </div>
    <div class="form-group">
      <label>Label Size</label>
      <select>
        <option>50x30 mm</option>
        <option>75x50 mm</option>
        <option>100x70 mm</option>
        <option>Custom</option>
      </select>
    </div>
    <div class="form-group">
      <label>Items to Label</label>
      <select multiple style="height:150px">
        ${appData.items.map(i => `<option>${i.code} - ${i.name}</option>`).join('')}
      </select>
    </div>
    <div class="form-group">
      <label>Quantity of Labels</label>
      <input type="number" value="10">
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ–¨ï¸ Generate Labels
      </button>
      <button class="action-btn" style="padding:12px 30px;margin-left:10px">
        ğŸ‘ï¸ Preview
      </button>
    </div>
  </div>`;
}

function generateHardwareInventory() {
  return `<div class="table-container">
    <h3>ğŸ”© Hardware Inventory</h3>
    <p>Manage hardware stock with alerts for low inventory</p>
    <div style="margin-bottom:20px;display:flex;gap:15px">
      <input type="text" placeholder="Search hardware..." style="padding:10px;border:1px solid #ddd;border-radius:6px;flex-grow:1">
      <button class="action-btn">Search</button>
      <button class="action-btn action-btn-success">â• Add Stock</button>
    </div>
    <table class="data-table">
      <thead>
        <tr>
          <th>Item Code</th>
          <th>Item Name</th>
          <th>Category</th>
          <th>Current Stock</th>
          <th>Min Stock</th>
          <th>Max Stock</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>HW-001</td>
          <td>Aluminum Frame</td>
          <td>Frames</td>
          <td>150</td>
          <td>50</td>
          <td>500</td>
          <td><span class="status-badge status-active">In Stock</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ“ Edit</button></td>
        </tr>
        <tr>
          <td>HW-002</td>
          <td>Window Handle</td>
          <td>Handles</td>
          <td>25</td>
          <td>30</td>
          <td>200</td>
          <td><span class="status-badge status-warning">Low Stock</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ“ Edit</button></td>
        </tr>
        <tr>
          <td>HW-003</td>
          <td>Hinges</td>
          <td>Hardware</td>
          <td>0</td>
          <td>20</td>
          <td>100</td>
          <td><span class="status-badge status-inactive">Out of Stock</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ“ Edit</button></td>
        </tr>
      </tbody>
    </table>
  </div>`;
}

function generateGlassInventory() {
  return `<div class="table-container">
    <h3>ğŸ” Glass Inventory</h3>
    <p>Manage glass stock with size and type details</p>
    <div class="form-container" style="margin-bottom:20px">
      <div>
        <div class="form-group">
          <label>Glass Type</label>
          <select>
            <option>Clear Glass</option>
            <option>Tinted Glass</option>
            <option>Reflective Glass</option>
          </select>
        </div>
        <div class="form-group">
          <label>Thickness</label>
          <select>
            <option>4mm</option>
            <option>5mm</option>
            <option>6mm</option>
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Size (W x H in mm)</label>
          <div style="display:flex;gap:10px">
            <input type="number" placeholder="Width" value="1200"> x
            <input type="number" placeholder="Height" value="1800">
          </div>
        </div>
        <div class="form-group">
          <label>Quantity (Sheets)</label>
          <input type="number" value="10">
        </div>
      </div>
    </div>
    <button class="action-btn action-btn-success" style="margin-bottom:20px">â• Add to Inventory</button>
    
    <table class="data-table">
      <thead>
        <tr>
          <th>Glass Type</th>
          <th>Thickness</th>
          <th>Size</th>
          <th>Quantity</th>
          <th>Area (Sq.Ft)</th>
          <th>Location</th>
          <th>Status</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Clear Glass</td>
          <td>6mm</td>
          <td>1200x1800</td>
          <td>25</td>
          <td>232.56</td>
          <td>Rack A-01</td>
          <td><span class="status-badge status-active">In Stock</span></td>
        </tr>
        <tr>
          <td>Tinted Glass</td>
          <td>5mm</td>
          <td>1500x2000</td>
          <td>12</td>
          <td>322.92</td>
          <td>Rack B-03</td>
          <td><span class="status-badge status-active">In Stock</span></td>
        </tr>
      </tbody>
    </table>
  </div>`;
}

function generateDefaultConfig() {
  return `<div class="config-card">
    <h3>âš™ï¸ Default Configuration</h3>
    <p>Configure system defaults and preferences</p>
    <div class="form-group">
      <label>Default Company Name</label>
      <input type="text" value="JP Solutions">
    </div>
    <div class="form-group">
      <label>Default Currency</label>
      <select>
        <option>Indian Rupee (â‚¹)</option>
        <option>US Dollar ($)</option>
        <option>Euro (â‚¬)</option>
      </select>
    </div>
    <div class="form-group">
      <label>Default Tax Rate (%)</label>
      <input type="number" value="18">
    </div>
    <div class="form-group">
      <label>Invoice Number Prefix</label>
      <input type="text" value="INV">
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success">ğŸ’¾ Save Configuration</button>
    </div>
  </div>`;
}

function generateFileStorage() {
  return `<div class="config-card">
    <h3>ğŸ’¾ File Storage Configuration</h3>
    <p>Configure file storage locations and backups</p>
    <div class="form-group">
      <label>Document Storage Path</label>
      <input type="text" value="C:/JP_ERP/Documents">
    </div>
    <div class="form-group">
      <label>Image Storage Path</label>
      <input type="text" value="C:/JP_ERP/Images">
    </div>
    <div class="form-group">
      <label>Backup Location</label>
      <input type="text" value="D:/Backups/JP_ERP">
    </div>
    <div class="form-group">
      <label>Auto Backup Frequency</label>
      <select>
        <option>Daily</option>
        <option>Weekly</option>
        <option>Monthly</option>
      </select>
    </div>
  </div>`;
}

function generateNetworkConfig() {
  return `<div class="config-card">
    <h3>ğŸŒ Network Configuration</h3>
    <p>Configure network settings and connectivity</p>
    <div class="form-group">
      <label>Server IP Address</label>
      <input type="text" value="192.168.1.100">
    </div>
    <div class="form-group">
      <label>Server Port</label>
      <input type="number" value="8080">
    </div>
    <div class="form-group">
      <label>Database Server</label>
      <input type="text" value="localhost">
    </div>
    <div class="form-group">
      <label>Database Name</label>
      <input type="text" value="jp_erp_db">
    </div>
  </div>`;
}

function generateDataBackup() {
  return `<div class="config-card">
    <h3>ğŸ’¿ Data Backup & Restore</h3>
    <p>Backup and restore system data</p>
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" style="padding:15px 30px;font-size:16px">
        ğŸ’¾ Create Backup Now
      </button>
      <button class="action-btn" style="padding:15px 30px;font-size:16px;margin-left:15px">
        ğŸ”„ Restore from Backup
      </button>
    </div>
    <div style="background:#f8f9fa;padding:20px;border-radius:8px">
      <h4>Recent Backups</h4>
      <ul>
        <li>Backup_2024_01_15_1200.zip - 15 Jan 2024, 12:00 PM</li>
        <li>Backup_2024_01_14_1200.zip - 14 Jan 2024, 12:00 PM</li>
        <li>Backup_2024_01_13_1200.zip - 13 Jan 2024, 12:00 PM</li>
      </ul>
    </div>
  </div>`;
}

function generateSmsEmail() {
  return `<div class="config-card">
    <h3>ğŸ“§ SMS / Email Configuration</h3>
    <p>Configure SMS and email notifications</p>
    <div class="form-group">
      <label>SMS Gateway API Key</label>
      <input type="text" placeholder="Enter SMS gateway API key">
    </div>
    <div class="form-group">
      <label>SMTP Server</label>
      <input type="text" placeholder="Enter SMTP server address">
    </div>
    <div class="form-group">
      <label>Email Address</label>
      <input type="email" placeholder="Enter sender email">
    </div>
    <div class="form-group">
      <label>Send Invoice via SMS</label>
      <select>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>
    <div class="form-group">
      <label>Send Invoice via Email</label>
      <select>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>
  </div>`;
}

function generateBillingConfig() {
  return `<div class="config-card">
    <h3>ğŸ’° Billing Configuration</h3>
    <p>Configure billing and invoice settings</p>
    <div class="form-group">
      <label>Invoice Number Format</label>
      <input type="text" value="INV-YYYY-0000">
    </div>
    <div class="form-group">
      <label>Default Payment Terms</label>
      <select>
        <option>Net 30 Days</option>
        <option>Net 45 Days</option>
        <option>Immediate</option>
      </select>
    </div>
    <div class="form-group">
      <label>Tax Calculation Method</label>
      <select>
        <option>Inclusive</option>
        <option>Exclusive</option>
      </select>
    </div>
    <div class="form-group">
      <label>Round Off Amount</label>
      <select>
        <option>Yes</option>
        <option>No</option>
      </select>
    </div>
  </div>`;
}

function generatePrintConfig() {
  return `<div class="config-card">
    <h3>ğŸ–¨ï¸ Print Configuration</h3>
    <p>Configure printer settings and templates</p>
    <div class="form-group">
      <label>Default Printer</label>
      <select>
        <option>HP LaserJet Pro</option>
        <option>Epson L3150</option>
        <option>Canon IP 2870</option>
      </select>
    </div>
    <div class="form-group">
      <label>Invoice Template</label>
      <select>
        <option>Template 1 - Simple</option>
        <option>Template 2 - Detailed</option>
        <option>Template 3 - Professional</option>
      </select>
    </div>
    <div class="form-group">
      <label>Paper Size</label>
      <select>
        <option>A4</option>
        <option>A5</option>
        <option>Letter</option>
        <option>Legal</option>
      </select>
    </div>
    <div class="form-group">
      <label>Print Quality</label>
      <select>
        <option>Draft</option>
        <option>Normal</option>
        <option>High</option>
      </select>
    </div>
  </div>`;
}

function generateUserAccess() {
  return `<div class="table-container">
    <h3>ğŸ‘¤ User Access Control</h3>
    <p>Manage user permissions and access levels</p>
    <table class="data-table">
      <thead>
        <tr>
          <th>Username</th>
          <th>Full Name</th>
          <th>Role</th>
          <th>Last Login</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>admin</td>
          <td>System Administrator</td>
          <td>Administrator</td>
          <td>Today, 09:30 AM</td>
          <td><span class="status-badge status-active">Active</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ”‘ Reset Password</button></td>
        </tr>
        <tr>
          <td>manager</td>
          <td>Operations Manager</td>
          <td>Manager</td>
          <td>Yesterday, 04:15 PM</td>
          <td><span class="status-badge status-active">Active</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ”‘ Reset Password</button></td>
        </tr>
        <tr>
          <td>sales1</td>
          <td>Sales Executive</td>
          <td>Sales</td>
          <td>Today, 10:00 AM</td>
          <td><span class="status-badge status-active">Active</span></td>
          <td><button class="action-btn" style="padding:6px 12px">ğŸ”‘ Reset Password</button></td>
        </tr>
      </tbody>
    </table>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success">â• Add New User</button>
    </div>
  </div>`;
}

function generateSoftwareUpdate() {
  return `<div class="config-card">
    <h3>ğŸ”„ Software Update</h3>
    <p>Check for and install software updates</p>
    <div style="text-align:center;margin:30px">
      <button class="action-btn action-btn-success" style="padding:15px 30px;font-size:16px">
        ğŸ” Check for Updates
      </button>
    </div>
    <div style="background:#f8f9fa;padding:20px;border-radius:8px">
      <h4>Current Version Information</h4>
      <p><strong>Version:</strong> 2.1.4</p>
      <p><strong>Release Date:</strong> January 15, 2024</p>
      <p><strong>Last Update Check:</strong> Today, 09:00 AM</p>
      <p><strong>Status:</strong> <span style="color:green">âœ“ Up to date</span></p>
    </div>
  </div>`;
}

function generateCustomerList() {
  return `<div class="table-container">
    <h3>ğŸ“‹ Customer List / Customer Master</h3>
    <p>View and manage all customers</p>
    <div style="margin-bottom:20px;display:flex;gap:15px">
      <input type="text" placeholder="Search customers..." style="padding:10px;border:1px solid #ddd;border-radius:6px;flex-grow:1">
      <button class="action-btn">Search</button>
      <button class="action-btn action-btn-success" onclick="loadModule('customerRegistration')">
        â• Add Customer
      </button>
    </div>
    <table class="data-table">
      <thead>
        <tr>
          <th>Customer ID</th>
          <th>Customer Name</th>
          <th>Category</th>
          <th>Mobile</th>
          <th>City</th>
          <th>GST</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        ${appData.customers.map(customer => `
          <tr>
            <td><strong>${customer.id}</strong></td>
            <td>${customer.name}</td>
            <td><span class="status-badge">${customer.category}</span></td>
            <td>${customer.mobile}</td>
            <td>${customer.city || 'N/A'}</td>
            <td>${customer.gst || 'N/A'}</td>
            <td><span class="status-badge status-active">Active</span></td>
            <td>
              <button onclick="editCustomer('${customer.id}')" style="padding:6px 12px;background:#ffc107;border:none;border-radius:6px;cursor:pointer;display:flex;align-items:center;gap:5px">
                <span>âœï¸</span> Edit
              </button>
            </td>
          </tr>
        `).join('')}
      </tbody>
    </table>
  </div>`;
}

function generateSalespersonRegistration() {
  return `<div class="form-container">
    <h3>ğŸ“ Salesperson Registration</h3>
    <p>Register new salespersons</p>
    <div class="form-group">
      <label>Salesperson ID</label>
      <input type="text" value="SP-001" readonly>
    </div>
    <div class="form-group">
      <label>Full Name</label>
      <input type="text" placeholder="Enter full name">
    </div>
    <div class="form-group">
      <label>Mobile Number</label>
      <input type="text" placeholder="Enter mobile number">
    </div>
    <div class="form-group">
      <label>Email</label>
      <input type="email" placeholder="Enter email">
    </div>
    <div class="form-group">
      <label>Commission Rate (%)</label>
      <input type="number" value="5">
    </div>
    <div class="form-group">
      <label>Joining Date</label>
      <input type="date" value="${new Date().toISOString().split('T')[0]}">
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success">ğŸ’¾ Register Salesperson</button>
    </div>
  </div>`;
}

function generateSalespersonList() {
  return `<div class="table-container">
    <h3>ğŸ“‹ Salesperson List</h3>
    <p>View and manage all salespersons</p>
    <table class="data-table">
      <thead>
        <tr>
          <th>Salesperson ID</th>
          <th>Name</th>
          <th>Mobile</th>
          <th>Email</th>
          <th>Commission %</th>
          <th>Total Sales</th>
          <th>Status</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>SP-001</td>
          <td>Rahul Verma</td>
          <td>9876543210</td>
          <td>rahul@jp.com</td>
          <td>5%</td>
          <td>â‚¹2,45,000</td>
          <td><span class="status-badge status-active">Active</span></td>
          <td><button class="action-btn" style="padding:6px 12px">âœï¸ Edit</button></td>
        </tr>
        <tr>
          <td>SP-002</td>
          <td>Priya Singh</td>
          <td>9876543211</td>
          <td>priya@jp.com</td>
          <td>4.5%</td>
          <td>â‚¹1,89,500</td>
          <td><span class="status-badge status-active">Active</span></td>
          <td><button class="action-btn" style="padding:6px 12px">âœï¸ Edit</button></td>
        </tr>
      </tbody>
    </table>
  </div>`;
}

function generateProformaReport() {
  return `<div class="report-controls">
    <h3>ğŸ“„ Proforma Report</h3>
    <p>Generate proforma invoice reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Customer</label>
          <select>
            <option>All Customers</option>
            ${appData.customers.map(c => `<option>${c.name}</option>`).join('')}
          </select>
        </div>
        <div class="form-group">
          <label>Status</label>
          <select>
            <option>All</option>
            <option>Pending</option>
            <option>Converted to Invoice</option>
            <option>Cancelled</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Report
      </button>
      <button class="action-btn" style="padding:12px 30px;margin-left:10px">
        ğŸ“¤ Export to Excel
      </button>
    </div>
  </div>`;
}

function generateInvoiceReport() {
  return `<div class="report-controls">
    <h3>ğŸ§¾ Invoice Report</h3>
    <p>Generate sales invoice reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Report Type</label>
          <select>
            <option>Sales Summary</option>
            <option>Detailed Sales</option>
            <option>Tax Report</option>
            <option>Collection Report</option>
          </select>
        </div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Group By</label>
          <select>
            <option>Daily</option>
            <option>Weekly</option>
            <option>Monthly</option>
            <option>Customer</option>
            <option>Salesperson</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Report
      </button>
    </div>
  </div>`;
}

function generateSalesPerformance() {
  return `<div class="report-controls">
    <h3>ğŸ“ˆ Salesperson Performance Report</h3>
    <p>Analyze salesperson performance</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setMonth(new Date().getMonth() - 1)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Salesperson</label>
          <select>
            <option>All Salespersons</option>
            <option>Rahul Verma</option>
            <option>Priya Singh</option>
            <option>Amit Sharma</option>
          </select>
        </div>
        <div class="form-group">
          <label>Performance Metric</label>
          <select>
            <option>Sales Value</option>
            <option>Number of Invoices</option>
            <option>Collection Efficiency</option>
            <option>Customer Acquisition</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Performance Report
      </button>
    </div>
  </div>`;
}

function generateProductionReport() {
  return `<div class="report-controls">
    <h3>ğŸ­ Production Report</h3>
    <p>Generate production reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 7)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Department</label>
          <select>
            <option>All Departments</option>
            <option>Cutting</option>
            <option>Fabrication</option>
            <option>Assembly</option>
            <option>Quality Control</option>
          </select>
        </div>
        <div class="form-group">
          <label>Report Type</label>
          <select>
            <option>Daily Production</option>
            <option>Efficiency Report</option>
            <option>Waste Report</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Production Report
      </button>
    </div>
  </div>`;
}

function generateWorkOrderReport() {
  return `<div class="report-controls">
    <h3>ğŸ“‹ Work Order Report</h3>
    <p>Generate work order reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Status</label>
          <select>
            <option>All</option>
            <option>Pending</option>
            <option>In Progress</option>
            <option>Completed</option>
            <option>Delivered</option>
          </select>
        </div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Customer</label>
          <select>
            <option>All Customers</option>
            ${appData.customers.map(c => `<option>${c.name}</option>`).join('')}
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Work Order Report
      </button>
    </div>
  </div>`;
}

function generateGlassInventoryReport() {
  return `<div class="report-controls">
    <h3>ğŸ” Glass Inventory Report</h3>
    <p>Generate glass inventory reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Glass Type</label>
          <select>
            <option>All Types</option>
            <option>Clear Glass</option>
            <option>Tinted Glass</option>
            <option>Reflective Glass</option>
          </select>
        </div>
        <div class="form-group">
          <label>Thickness</label>
          <select>
            <option>All</option>
            <option>4mm</option>
            <option>5mm</option>
            <option>6mm</option>
            <option>8mm</option>
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Stock Status</label>
          <select>
            <option>All</option>
            <option>In Stock</option>
            <option>Low Stock</option>
            <option>Out of Stock</option>
          </select>
        </div>
        <div class="form-group">
          <label>Sort By</label>
          <select>
            <option>Quantity</option>
            <option>Size</option>
            <option>Last Updated</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Inventory Report
      </button>
    </div>
  </div>`;
}

function generateBreakageReport() {
  return `<div class="report-controls">
    <h3>ğŸ’” Breakage Report</h3>
    <p>Generate breakage reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Department</label>
          <select>
            <option>All Departments</option>
            <option>Cutting</option>
            <option>Fabrication</option>
            <option>Assembly</option>
            <option>Transportation</option>
          </select>
        </div>
        <div class="form-group">
          <label>Breakage Type</label>
          <select>
            <option>All Types</option>
            <option>Handling</option>
            <option>Manufacturing</option>
            <option>Transport</option>
            <option>Storage</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Breakage Report
      </button>
    </div>
  </div>`;
}

function generateRejectionReport() {
  return `<div class="report-controls">
    <h3>âŒ Rejection Report</h3>
    <p>Generate rejection reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Reason</label>
          <select>
            <option>All Reasons</option>
            <option>Quality Issue</option>
            <option>Specification Mismatch</option>
            <option>Damage</option>
            <option>Customer Return</option>
          </select>
        </div>
        <div class="form-group">
          <label>Department</label>
          <select>
            <option>All Departments</option>
            <option>Production</option>
            <option>Quality Control</option>
            <option>Dispatch</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Rejection Report
      </button>
    </div>
  </div>`;
}

function generatePendingBilling() {
  return `<div class="report-controls">
    <h3>â³ Pending Billing Report</h3>
    <p>Generate pending billing reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Aging Days</label>
          <select>
            <option>All</option>
            <option>0-30 days</option>
            <option>31-60 days</option>
            <option>61-90 days</option>
            <option>Over 90 days</option>
          </select>
        </div>
        <div class="form-group">
          <label>Customer</label>
          <select>
            <option>All Customers</option>
            ${appData.customers.map(c => `<option>${c.name}</option>`).join('')}
          </select>
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Minimum Amount</label>
          <input type="number" placeholder="Enter minimum amount">
        </div>
        <div class="form-group">
          <label>Sort By</label>
          <select>
            <option>Amount</option>
            <option>Aging Days</option>
            <option>Customer Name</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Pending Billing Report
      </button>
    </div>
  </div>`;
}

function generateBilledArea() {
  return `<div class="report-controls">
    <h3>ğŸ“ Billed Area Report (Sq.Mtr)</h3>
    <p>Generate billed area reports in square meters</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setMonth(new Date().getMonth() - 1)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Group By</label>
          <select>
            <option>Daily</option>
            <option>Weekly</option>
            <option>Monthly</option>
            <option>Customer</option>
            <option>Glass Type</option>
          </select>
        </div>
        <div class="form-group">
          <label>Measurement Unit</label>
          <select>
            <option>Square Meters</option>
            <option>Square Feet</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Area Report
      </button>
    </div>
  </div>`;
}

function generateTallyExport() {
  return `<div class="report-controls">
    <h3>ğŸ“¤ Tally Export Report</h3>
    <p>Export data to Tally format</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>Export Type</label>
          <select>
            <option>Sales Vouchers</option>
            <option>Purchase Vouchers</option>
            <option>Journal Vouchers</option>
            <option>Payment Vouchers</option>
            <option>Receipt Vouchers</option>
          </select>
        </div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>Export Format</label>
          <select>
            <option>Tally XML</option>
            <option>Excel</option>
            <option>CSV</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“¤ Export to Tally
      </button>
    </div>
  </div>`;
}

function generateDirectInvoice() {
  return `<div class="report-controls">
    <h3>ğŸ§¾ Direct Invoice Report</h3>
    <p>Generate direct invoice reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Customer</label>
          <select>
            <option>All Customers</option>
            ${appData.customers.map(c => `<option>${c.name}</option>`).join('')}
          </select>
        </div>
        <div class="form-group">
          <label>Sort By</label>
          <select>
            <option>Invoice Date</option>
            <option>Amount</option>
            <option>Customer Name</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Direct Invoice Report
      </button>
    </div>
  </div>`;
}

function generateCreditNote() {
  return `<div class="report-controls">
    <h3>ğŸ“ Credit Note Report</h3>
    <p>Generate credit note reports</p>
    <div class="form-container">
      <div>
        <div class="form-group">
          <label>From Date</label>
          <input type="date" value="${new Date(new Date().setDate(new Date().getDate() - 90)).toISOString().split('T')[0]}">
        </div>
        <div class="form-group">
          <label>To Date</label>
          <input type="date" value="${new Date().toISOString().split('T')[0]}">
        </div>
      </div>
      <div>
        <div class="form-group">
          <label>Reason</label>
          <select>
            <option>All Reasons</option>
            <option>Return of Goods</option>
            <option>Price Adjustment</option>
            <option>Discount</option>
            <option>Damaged Goods</option>
          </select>
        </div>
        <div class="form-group">
          <label>Status</label>
          <select>
            <option>All</option>
            <option>Pending</option>
            <option>Approved</option>
            <option>Rejected</option>
          </select>
        </div>
      </div>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success" style="padding:12px 30px">
        ğŸ“Š Generate Credit Note Report
      </button>
    </div>
  </div>`;
}

function generateUserManagement() {
  return `<div class="form-container">
    <h3>ğŸ‘¥ User Management</h3>
    <p>Manage system users and permissions</p>
    <div class="form-group">
      <label>Username</label>
      <input type="text" placeholder="Enter username">
    </div>
    <div class="form-group">
      <label>Full Name</label>
      <input type="text" placeholder="Enter full name">
    </div>
    <div class="form-group">
      <label>Email</label>
      <input type="email" placeholder="Enter email">
    </div>
    <div class="form-group">
      <label>Role</label>
      <select>
        <option>Administrator</option>
        <option>Manager</option>
        <option>Sales</option>
        <option>Production</option>
        <option>Inventory</option>
        <option>Accounts</option>
      </select>
    </div>
    <div class="form-group">
      <label>Password</label>
      <input type="password" placeholder="Enter password">
    </div>
    <div class="form-group">
      <label>Confirm Password</label>
      <input type="password" placeholder="Confirm password">
    </div>
    <div class="form-group">
      <label>Status</label>
      <select>
        <option>Active</option>
        <option>Inactive</option>
      </select>
    </div>
    <div style="text-align:center;margin-top:20px">
      <button class="action-btn action-btn-success">ğŸ’¾ Create User</button>
      <button class="action-btn" style="margin-left:10px">ğŸ”„ Reset Password</button>
    </div>
  </div>`;
}

// Helper functions for customer editing
function editCustomer(customerId) {
  const customer = appData.customers.find(c => c.id === customerId);
  if(customer) {
    alert(`Edit customer: ${customer.name}\n\nThis would open the customer edit form in a real application.`);
    // In real implementation, load customer data into registration form
    loadModule('customerRegistration');
  }
}

// Action functions
function saveModule(moduleName){
  alert(`ğŸ’¾ Changes saved for ${moduleName} module`);
}

function printModule(moduleName){
  alert(`ğŸ–¨ï¸ Printing ${moduleName} module...`);
  // In real implementation, this would trigger print dialog
  window.print();
}

function exportModule(moduleName){
  alert(`ğŸ“¤ Exporting ${moduleName} module data...`);
  // In real implementation, this would trigger file download
}
</script>

</body>
</html>
